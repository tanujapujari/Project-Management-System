import{r,u as fe,j as e,M as Je,L as ze,a as Re,b as Ee,F as Qe,c as Ke,d as je,e as Xe,R as we,f as xe,g as pe,h as ye,i as De,D as Ae,k as Ie,l as ue,m as he,n as Ne,o as me,p as ve,I as be,B as et,q as tt,s as Te,y as j,t as He,v as We,w as rt,x as st,z as ge,N as at,A as lt}from"./vendor-react-DvBFsgZ_.js";import{a as H,C as Ve,A as Ge,p as Ye,b as _e,d as ot,e as nt,P as dt,f as it,h as ct}from"./vendor-BJXNeatY.js";(function(){const U=document.createElement("link").relList;if(U&&U.supports&&U.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))ee(O);new MutationObserver(O=>{for(const Q of O)if(Q.type==="childList")for(const W of Q.addedNodes)W.tagName==="LINK"&&W.rel==="modulepreload"&&ee(W)}).observe(document,{childList:!0,subtree:!0});function z(O){const Q={};return O.integrity&&(Q.integrity=O.integrity),O.referrerPolicy&&(Q.referrerPolicy=O.referrerPolicy),O.crossOrigin==="use-credentials"?Q.credentials="include":O.crossOrigin==="anonymous"?Q.credentials="omit":Q.credentials="same-origin",Q}function ee(O){if(O.ep)return;O.ep=!0;const Q=z(O);fetch(O.href,Q)}})();const mt=["Admin","Project Manager","Developer"],ut=()=>{const[o,U]=r.useState(!1),[z,ee]=r.useState(""),[O,Q]=r.useState(!1),[W,X]=r.useState(""),[q,R]=r.useState(""),[_,Z]=r.useState(""),[G,C]=r.useState(""),[w,M]=r.useState(!1),[V,E]=r.useState(!1),D=fe(),f=G?"h-132":"h-130",I=G?"h-132":" h-130",N=async K=>{var s,d;if(K.preventDefault(),!W){C("Please enter your email address."),M(!1);return}if(!q){C("Please enter your password."),M(!1);return}if(!_){C("Please select your role."),M(!1);return}E(!0),C(""),M(!1);try{console.log("Attempting login with:",{UserEmail:W,UserRole:_,Password:"********"});const x=await H.post("http://localhost:5294/api/Auth/login",{UserEmail:W.trim(),Password:q,UserRole:_.trim()},{timeout:1e4,headers:{"Content-Type":"application/json"}}),{message:$,accessToken:k,refreshToken:P,userId:y,userName:F,userRole:A}=x.data;console.log("Login successful:",{userId:y,userName:F,userRole:A,accessToken:"********",refreshToken:"********"}),C($||"Login Successful!"),M(!0),localStorage.setItem("token",k),localStorage.setItem("userId",y),localStorage.setItem("userName",F),localStorage.setItem("userRole",A),localStorage.setItem("refreshToken",P),setTimeout(()=>{switch(A){case"Admin":D("/adminDashboard");break;case"Project Manager":D("/projectManagerDashboard");break;case"Developer":D("/developerDashboard");break;default:alert("Unknown role")}},1e3)}catch(x){console.error("Login error:",x),x.code==="ECONNABORTED"?C("Login request timed out. Please try again."):x.response?x.response.status===401?C(x.response.data.message||"Invalid email, password, or role. Please try again."):x.response.status===400?C(x.response.data.message||"Invalid login details. Please check your information."):x.response.status>=500?C("Server error. Please try again later."):C(((d=(s=x.response)==null?void 0:s.data)==null?void 0:d.message)||"Login failed. Please check your credentials."):C("Cannot connect to the server. Please check your internet connection."),M(!1)}finally{E(!1)}};return e.jsx("div",{className:"min-h-screen md:p-6 bg-gradient-rainbow bg-[length:200%_200%] animate-gradient-x flex items-center justify-center",children:e.jsxs("div",{className:`grid-cols-2 bg-white rounded-2xl md:w-full md:grid max-w-5xl ${f} sm:w-100`,children:[e.jsxs("div",{className:"p-8 flex flex-col justify-center",children:[e.jsx("h1",{className:"md:text-right text-center font-bold md:text-xl text-2xl underline",children:"Login"}),e.jsx("h2",{className:"md:text-right text-center text-md font-semibold",children:"Welcome Back!"}),e.jsx("h2",{className:"md:text-right text-center text-md font-semibold",children:"Please Login to your Account"}),e.jsxs("form",{onSubmit:N,id:"loginForm",className:"flex flex-col gap-1.5 mt-8",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",placeholder:"Enter your Email Address",value:W,onChange:K=>X(K.target.value),className:"rounded-lg p-2 bg-violet-300 w-full text-sm font-medium placeholder:text-white",required:!0}),e.jsx("span",{className:"absolute top-2.5 right-4 text-black",children:e.jsx(Je,{})})]}),e.jsxs("label",{className:"text-sm font-medium",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:O?"text":"password",placeholder:"Enter your Password",value:q,onChange:K=>R(K.target.value),className:"rounded-lg p-2 placeholder:text-white w-full text-sm font-medium bg-violet-300",required:!0}),e.jsx("span",{className:"absolute top-2.5 right-4 text-black cursor-pointer",onClick:()=>Q(!O),children:O?e.jsx(ze,{}):e.jsx(Re,{})})]}),e.jsx(Ee,{to:"/forgotPassword",className:"text-blue-500 text-sm text-right font-semibold",children:"Forgot Password?"}),e.jsxs("label",{className:"block text-sm font-medium",children:["Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsxs("button",{type:"button",onClick:()=>U(!o),className:"w-full p-2 bg-violet-300 text-sm font-medium rounded-lg text-left flex justify-between items-center",style:{color:z?"black":"white"},children:[z||"Select your Role",o?e.jsx(Qe,{className:"ml-4 text-black"}):e.jsx(Ke,{className:"ml-4 text-black"})]}),o&&e.jsx("ul",{className:"absolute mt-1 w-full bg-violet-100 rounded-lg shadow z-10",children:mt.map((K,s)=>e.jsx("li",{onClick:()=>{ee(K),Z(K),U(!1)},className:"px-4 py-2 hover:bg-black hover:text-white border-b border-gray-300 last:border-b-0 cursor-pointer transition",children:K},s))})]}),e.jsx("button",{type:"submit",className:`bg-black mt-4 text-white rounded-lg p-2 cursor-pointer
               hover:bg-gray-800 transition duration-300 ease-in-out ${V?"opacity-50 cursor-not-allowed":""}`,disabled:V,children:V?"Logging In...":"Login"}),G&&e.jsx("div",{className:`text-center font-semibold text-md mt-2 p-1 rounded-lg  ${w?"text-green-600 bg-green-100":"text-red-600 bg-red-100"}`,children:G}),e.jsxs("div",{className:"flex justify-center items-center ",children:[e.jsx("h2",{children:"Don't have an account yet?"}),e.jsx(Ee,{to:"/register",className:"text-blue-500 font-semibold ml-1",children:"Register Now"})]})]})]}),e.jsx("div",{className:`bg-[url(/src/assets/login-register-bg.png)] hidden md:flex bg-cover ${I} rounded-2xl rounded-l-none bg-no-repeat bg-center justify-center items-center`,children:e.jsx("h1",{className:"text-5xl font-bold font-serif text-center bg-white text-transparent bg-clip-text animate-pulse drop-shadow-2xl",children:"Welcome Back to Project Management System"})})]})})},ht=["Admin","Project Manager","Developer"],gt=()=>{const[o,U]=r.useState(!1),[z,ee]=r.useState(""),[O,Q]=r.useState(!1),[W,X]=r.useState(""),[q,R]=r.useState(""),[_,Z]=r.useState(""),[G,C]=r.useState(""),[w,M]=r.useState(""),[V,E]=r.useState(!1),[D,f]=r.useState(!1),I=fe(),N=w?"lg:h-133":"lg:h-130",K=w?"lg:h-133":" lg:h-130",s=w?"p-5":"p-8",d=async x=>{var $,k,P,y,F,A;if(x.preventDefault(),!W||!q||!_||!G){M("Please fill in all the details"),E(!1);return}f(!0),M(""),E(!1);try{const v=await H.post("http://localhost:5294/api/Auth/register",{UserName:W,UserEmail:q,Password:_,UserRole:G}),{message:L}=v.data;M(L||"Registeration Successfull!"),E(!0),setTimeout(()=>{I("/login")},1e3)}catch(v){v.response?(console.error("Register error:",($=v.response.data)==null?void 0:$.message),console.log("HTTP Status Code:",v.response.status),v.response.status===400?(P=(k=v.response.data)==null?void 0:k.message)!=null&&P.includes("Username already exists")?M("Username already taken. Choose another."):(F=(y=v.response.data)==null?void 0:y.message)!=null&&F.includes("Email already exists")?M("Email already exists."):M(((A=v.response.data)==null?void 0:A.message)||"Registration failed. Please check your credentials."):M("Registration failed. Please try again later.")):v.request?(console.error("No response received from server:",v.request),M("Server is unreachable. Please try again later.")):(console.error("Error setting up request:",v.message),M("Unexpected error occurred.")),E(!1)}finally{f(!1)}};return e.jsx("div",{className:"min-h-screen md:p-6 bg-gradient-rainbow bg-[length:200%_200%] animate-gradient-x flex items-center justify-center",children:e.jsxs("div",{className:`md:grid grid-cols-2 bg-white rounded-2xl md:w-full sm:w-100 max-w-5xl ${N}`,children:[e.jsx("div",{className:`bg-[url(/src/assets/login-register-bg.png)] bg-cover hidden md:flex rounded-2xl rounded-r-none bg-no-repeat bg-center ${K} justify-center items-center`,children:e.jsx("h1",{className:"text-5xl font-bold font-serif text-center bg-white text-transparent bg-clip-text animate-pulse drop-shadow-2xl",children:"Welcome for Registration"})}),e.jsxs("div",{className:`${s} flex flex-col justify-center`,children:[e.jsx("h1",{className:"md:text-left text-center font-bold md:text-xl text-2xl underline",children:"Register"}),e.jsx("h2",{className:"md:text-left text-center text-md font-semibold",children:"Create Your Account!"}),e.jsx("h2",{className:"md:text-left text-center text-md font-semibold",children:"Join us and get started"}),e.jsxs("form",{onSubmit:d,id:"registerForm",className:"flex flex-col gap-1.5 mt-8",children:[e.jsx("label",{className:"text-sm font-medium",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:W,onChange:x=>X(x.target.value),placeholder:"Choose your Username",className:"rounded-lg p-2 bg-violet-300 w-full text-sm font-medium placeholder:text-white",required:!0}),e.jsx("span",{className:"absolute top-2.5 right-4 text-black",children:e.jsx(je,{})})]}),e.jsx("label",{className:"text-sm font-semibold",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:O?"text":"password",value:_,onChange:x=>Z(x.target.value),placeholder:"Enter your Password",className:"rounded-lg p-2 placeholder:text-white w-full text-sm font-medium bg-violet-300",required:!0}),e.jsx("span",{className:"absolute top-2.5 right-4 text-black cursor-pointer",onClick:()=>Q(!O),children:O?e.jsx(ze,{}):e.jsx(Re,{})})]}),e.jsx("label",{className:"text-sm font-medium",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",value:q,onChange:x=>R(x.target.value),placeholder:"Enter your Email Address",className:"rounded-lg p-2 placeholder:text-white w-full text-sm font-medium bg-violet-300",required:!0}),e.jsx("span",{className:"absolute top-2.5 right-4 text-black",children:e.jsx(Je,{})})]}),e.jsx("label",{className:"block text-sm font-medium",children:"Role"}),e.jsxs("div",{className:"relative w-full",children:[e.jsxs("button",{type:"button",value:G,onClick:()=>U(!o),className:"w-full p-2 bg-violet-300 text-white text-sm font-medium rounded-lg text-left flex justify-between items-center",children:[z||"Select your Role",o?e.jsx(Qe,{className:"ml-2 text-black"}):e.jsx(Ke,{className:"ml-2 text-black"})]}),o&&e.jsx("ul",{className:"absolute mt-1 w-full bg-violet-100 rounded-lg shadow z-10",children:ht.map((x,$)=>e.jsx("li",{onClick:()=>{ee(x),U(!1),C(x)},className:`px-2 hover:bg-black hover:text-white cursor-pointer \r
                      transition border-b border-gray-300 last:border-b-0`,children:x},$))})]}),e.jsx("button",{type:"submit",className:`bg-black mt-4 text-white rounded-lg p-2 cursor-pointer
               hover:bg-gray-800 transition duration-300 ease-in-out ${D?"cursor-not-allowed":""}`,disabled:D,children:D?"Registering...":"Register"}),w&&e.jsx("div",{className:`text-center font-semibold p-1 mt-2 rounded-lg ${V?"text-green-600 bg-green-100":"text-red-600 bg-red-100"}`,children:w}),e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("h2",{children:"Already have an account?"}),e.jsx(Ee,{to:"/login",className:"text-blue-500 font-semibold ml-1",children:"Login Here"})]})]})]})]})})},xt=()=>{const[o,U]=r.useState(""),[z,ee]=r.useState(""),[O,Q]=r.useState(""),[W,X]=r.useState(!1),q=async R=>{if(R.preventDefault(),X(!0),ee(""),Q(""),!o){Q("Please enter your email address."),X(!1);return}try{const _=await H.post("http://localhost:5294/api/Password/forgot-password",{userEmail:o});ee(_.data)}catch(_){_.response?Q(_.response.data):Q("An unexpected error occurred.")}finally{X(!1)}};return e.jsx("div",{className:`min-h-screen bg-slate-200 flex items-center\r
      bg-gradient-rainbow bg-[length:200%_200%] animate-gradient-x \r
    justify-center`,children:e.jsxs("div",{className:"flex flex-col justify-center p-6 bg-white max-w-md rounded-lg w-full",children:[e.jsx("h1",{className:"text-3xl font-semibold text-center",children:"Forgot your Password"}),e.jsx("h2",{className:"text-left mt-4",children:"Please enter the email address you'd like your information to sent to"}),e.jsxs("form",{onSubmit:q,id:"forgotPswForm",className:"mt-6 flex flex-col",children:[e.jsx("label",{htmlFor:"email",className:"text-md font-medium",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:o,onChange:R=>U(R.target.value),placeholder:"Enter your Email Address",className:"border p-2 text-black rounded-md mt-2 text-medium text-lg",required:!0}),e.jsx("button",{type:"submit",className:"bg-black hover:bg-gray-800 mt-5 cursor-pointer p-2 rounded-lg text-white text-lg font-medium",disabled:W,children:W?"Sending...":"Request Reset Link"}),z&&e.jsx("p",{className:"text-green-600 mt-2 text-center bg-green-100 p-2 rounded-lg",children:z}),O&&e.jsx("p",{className:"text-red-600 mt-2 text-center bg-red-100 p-2 rounded-lg",children:O}),e.jsx(Ee,{to:"/login",className:"text-blue-500 font-semibold mt-3 text-lg text-center",children:"Back to Login"})]})]})})},pt=()=>{const[o,U]=r.useState(!1),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),[q,R]=r.useState(""),[_,Z]=r.useState(""),[G,C]=r.useState(!1),w=fe(),M=Xe(),E=new URLSearchParams(M.search).get("token"),D=async f=>{if(f.preventDefault(),C(!0),R(""),Z(""),!O||!W){Z("Please enter both passwords."),C(!1);return}if(O!==W){Z("Passwords do not match."),C(!1);return}if(!E){Z("Invalid reset link.  Token is missing."),C(!1);return}try{const I=await H.post("http://localhost:5294/api/Password/reset-password",{token:E,newPassword:O});R(I.data||"Password reset successfully!"),setTimeout(()=>{w("/login")},2e3)}catch(I){I.response?Z(I.response.data||"Failed to reset password."):Z("An unexpected error occurred.")}finally{C(!1)}};return e.jsx("div",{className:`min-h-screen bg-slate-200 flex items-center\r
      bg-gradient-rainbow bg-[length:200%_200%] animate-gradient-x \r
    justify-center`,children:e.jsxs("div",{className:"flex flex-col justify-center p-6 bg-white max-w-md rounded-lg w-full",children:[e.jsx("h1",{className:"text-3xl font-semibold text-center",children:"Reset your Password"}),e.jsx("h2",{className:"text-center mt-4",children:"Enter your new password below to change your password"}),e.jsxs("form",{id:"resetPswForm",onSubmit:D,className:"mt-6 flex flex-col gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"newPsw",className:"text-md font-medium",children:"New Password"}),e.jsx("input",{type:o?"text":"password",value:O,onChange:f=>Q(f.target.value),placeholder:"Choose your New Password",className:"border p-2 text-black rounded-md mt-2 text-medium text-lg w-full",required:!0}),e.jsx("span",{className:"absolute top-12 right-4 text-black cursor-pointer",onClick:()=>U(!o),children:o?e.jsx(ze,{}):e.jsx(Re,{})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"text-md mt-4 font-medium",children:"Re-enter your new Password"}),e.jsx("input",{type:z?"text":"password",value:W,onChange:f=>X(f.target.value),placeholder:"Enter your Confrim Password",className:"border p-2 text-black rounded-md mt-2 text-medium w-full text-lg",required:!0}),e.jsx("span",{className:"absolute top-12 right-4 text-black cursor-pointer",onClick:()=>ee(!z),children:z?e.jsx(ze,{}):e.jsx(Re,{})})]}),e.jsx("button",{type:"submit",className:"bg-black hover:bg-gray-800 mt-5 cursor-pointer p-2 rounded-lg text-white text-lg font-medium",disabled:G,children:G?"Resetting...":"Reset Password"}),q&&e.jsx("p",{className:"text-green-600 mt-2 text-center bg-green-100 p-2 rounded-lg",children:q}),_&&e.jsx("p",{className:"text-red-600 mt-2 text-center bg-red-100 p-2 rounded-lg",children:_}),e.jsx(Ee,{to:"/login",className:"text-blue-500 font-semibold mt-3 text-lg text-center",children:"Back to Login"})]})]})})};Ve.register(Ge,Ye,_e);const bt=o=>{if(!o)return"";try{const U=new Date(o),ee=Math.floor((new Date-U)/1e3);if(ee<60)return`${ee} second${ee!==1?"s":""} ago`;const O=Math.floor(ee/60);if(O<60)return`${O} minute${O!==1?"s":""} ago`;const Q=Math.floor(O/60);if(Q<24)return`${Q} hour${Q!==1?"s":""} ago`;const W=Math.floor(Q/24);if(W<30)return`${W} day${W!==1?"s":""} ago`;const X=Math.floor(W/30);if(X<12)return`${X} month${X!==1?"s":""} ago`;const q=Math.floor(X/12);return`${q} year${q!==1?"s":""} ago`}catch(U){return console.error("Error calculating time ago:",U),""}},ft=o=>{if(!o)return"";try{if(typeof o=="string"&&/^\d{2}-\d{2}-\d{4}$/.test(o)||typeof o=="string"&&o.includes("-")&&o.split("-").length===3)return o;const U=new Date(o);if(isNaN(U.getTime()))return o.toString();const z=String(U.getDate()).padStart(2,"0"),ee=String(U.getMonth()+1).padStart(2,"0"),O=U.getFullYear();return`${z}-${ee}-${O}`}catch{return o.toString()}},jt=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),[q,R]=r.useState(0),[_,Z]=r.useState(""),[G,C]=r.useState(""),[w,M]=r.useState({projects:{total:0,completed:0,inProgress:0,onHold:0,notStarted:0,cancelled:0},users:{total:0,admin:0,projectManager:0,developer:0},tasks:{total:0,completed:0,inProgress:0,pending:0}}),[V,E]=r.useState([]),[D,f]=r.useState(0),I=fe(),{theme:N,toggleTheme:K}=r.useContext(ke);r.useEffect(()=>{const k=localStorage.getItem("userRole"),P=localStorage.getItem("userName");k&&Q(k),P&&Z(P)},[]),r.useEffect(()=>{const y=`${(()=>{const F=new Date().getHours();return F<12?"Good Morning":F<18?"Good Afternoon":"Good Evening"})()}, ${_||"User"}`;C(y),X(""),R(0)},[_]),r.useEffect(()=>{if(q<G.length){const k=setTimeout(()=>{X(P=>P+G[q]),R(P=>P+1)},150);return()=>clearTimeout(k)}},[q,G]),r.useEffect(()=>{const k=async()=>{try{const y=localStorage.getItem("token");if(!y){console.error("No authentication token found"),I("/login");return}const F={Authorization:`Bearer ${y}`,"Content-Type":"application/json"},[A,v,L,J]=await Promise.all([fetch("http://localhost:5294/api/Project/get",{headers:F}),fetch("http://localhost:5294/AdminUser/all-users",{headers:F}),fetch("http://localhost:5294/Task/get",{headers:F}),fetch("http://localhost:5294/ActivityLog/get",{headers:F})]);if(A.status===401||v.status===401||L.status===401||J.status===401){console.error("Authentication token expired or invalid"),localStorage.removeItem("token"),I("/login");return}if(!A.ok||!v.ok||!L.ok||!J.ok)throw new Error("Failed to fetch data from one or more endpoints");const Y=await A.json(),oe=await v.json(),se=await L.json(),ce=await J.json(),re=Y.length,de=Y.filter(g=>g.projectStatus==="Completed").length,ae=se.length,ie=se.filter(g=>g.taskStatus==="completed").length,ne=re>0?de/re*100:0,m=ae>0?ie/ae*100:0,B=Math.round((ne+m)/2);M({projects:{total:Y.length,completed:Y.filter(g=>g.projectStatus==="Completed").length,inProgress:Y.filter(g=>g.projectStatus==="In Progress").length,onHold:Y.filter(g=>g.projectStatus==="On Hold").length,notStarted:Y.filter(g=>g.projectStatus==="Not Started").length,cancelled:Y.filter(g=>g.projectStatus==="Cancelled").length},users:{total:oe.length,admin:oe.filter(g=>g.userRole==="Admin").length,projectManager:oe.filter(g=>g.userRole==="Project Manager").length,developer:oe.filter(g=>g.userRole==="Developer").length},tasks:{total:se.length,completed:se.filter(g=>g.taskStatus==="completed").length,inProgress:se.filter(g=>g.taskStatus==="in progress").length,pending:se.filter(g=>g.taskStatus==="pending").length}});const u=ce.sort((g,c)=>new Date(c.timestamp)-new Date(g.timestamp)).slice(0,5).map(g=>{let c=g.userName||"Unknown User";const i=g.activityAction||"performed an action";let b="";if(i.includes("Project"))b=`Project: "${g.projectTitle||"Untitled Project"}"`;else if(i.includes("Task")){const T=g.taskTitle||"Untitled Task",h=g.projectTitle||"Untitled Project";b=`Task: "${T}" in Project: "${h}"`}else i.includes("Comment")&&(b=`Comment ${g.taskTitle?`on task "${g.taskTitle}" in project "${g.projectTitle}"`:g.projectTitle?`on project "${g.projectTitle}"`:""}`);return{...g,user:c,action:i,formattedDetails:b,timeAgo:bt(new Date(g.timestamp)),timestamp:g.activityTime}});E(u),f(B)}catch(y){console.error("Error fetching data:",y)}};k();const P=setInterval(k,3e4);return()=>clearInterval(P)},[I]);const s=()=>{localStorage.clear(),I("/login")},d=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/adminDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Users",path:"/allUsers"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/allProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/allTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/allComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/allLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/settings"}],x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:N==="dark"?"white":"black",font:{size:12}}}}},$=(k,P,y)=>({labels:P,datasets:[{data:Object.values(k),backgroundColor:y,borderWidth:0,hoverOffset:4}]});return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-white to-blue-200 dark:from-gray-900 dark:to-black transition-transform
          ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
          ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),d.map(({icon:k,label:P,path:y},F)=>e.jsxs("li",{onClick:()=>y&&I(y),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                    hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white
                    dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600 hover:scale-105
                    ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:k}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:P})]},`menu-${F}-${P}`))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${N==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white p-3 rounded-full transition-all",onClick:K,"aria-label":"Toggle dark mode",children:N==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full hover:from-blue-500 hover:to-purple-500 transition-all duration-300",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:_||"Guest"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:O})]}),e.jsx(ye,{className:`transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-gray-800 shadow-lg rounded-lg p-2 w-32 border border-gray-200 dark:border-gray-700",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all duration-300",onClick:s,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-8 space-y-8",children:[e.jsx("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-8",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"relative",children:e.jsx("h1",{className:`text-4xl font-bold ${N==="dark"?"text-white":"text-black"}`,children:e.jsxs("span",{className:"inline-block",children:[W,e.jsx("span",{className:`inline-block w-0.5 h-8 ${N==="dark"?"bg-white":"bg-black"} ml-1 animate-blink`})]})})})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(De,{className:"text-2xl text-blue-500"}),e.jsx("h2",{className:`text-xl font-semibold ${N==="dark"?"text-white":"text-black"}`,children:"Projects Summary"})]}),e.jsx("div",{className:"h-48",children:e.jsx(Ae,{data:$({completed:w.projects.completed,inProgress:w.projects.inProgress,onHold:w.projects.onHold,notStarted:w.projects.notStarted,cancelled:w.projects.cancelled},["Completed","In Progress","On Hold","Not Started","Cancelled"],["#22C55E","#3B82F6","#F59E0B","#6366F1","#EF4444"]),options:x})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:`text-lg font-medium ${N==="dark"?"text-white":"text-black"}`,children:["Total Projects: ",w.projects.total]})})]}),e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ie,{className:"text-2xl text-purple-500"}),e.jsx("h2",{className:`text-xl font-semibold ${N==="dark"?"text-white":"text-black"}`,children:"Users Summary"})]}),e.jsx("div",{className:"h-48",children:e.jsx(Ae,{data:$({admin:w.users.admin,projectManager:w.users.projectManager,developer:w.users.developer},["Admin","Project Manager","Developer"],["#8B5CF6","#3B82F6","#10B981"]),options:x})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:`text-lg font-medium ${N==="dark"?"text-white":"text-black"}`,children:["Total Users: ",w.users.total]})})]}),e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ue,{className:"text-2xl text-green-500"}),e.jsx("h2",{className:`text-xl font-semibold ${N==="dark"?"text-white":"text-black"}`,children:"Tasks Summary"})]}),e.jsx("div",{className:"h-48",children:e.jsx(Ae,{data:$({completed:w.tasks.completed,inProgress:w.tasks.inProgress,pending:w.tasks.pending},["Completed","In Progress","Pending"],["#10B981","#3B82F6","#EF4444"]),options:x})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:`text-lg font-medium ${N==="dark"?"text-white":"text-black"}`,children:["Total Tasks: ",w.tasks.total]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(he,{className:"text-2xl text-indigo-500"}),e.jsx("h2",{className:`text-xl font-semibold ${N==="dark"?"text-white":"text-black"}`,children:"Recent Activities"})]}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:V.length>0?V.map((k,P)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white/20 dark:bg-black/20 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("div",{className:"w-2 h-2 mt-2 rounded-full bg-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:`${N==="dark"?"text-white":"text-black"} font-medium`,children:[e.jsx("span",{className:"font-semibold",children:k.user})," ",k.action]}),e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:k.formattedDetails||k.details}),e.jsx("p",{className:`${N==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:ft(k.timestamp)})]})]},`activity-${k.activityLogId||P}`)):e.jsx("div",{className:"text-center py-6",children:e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"}`,children:"No recent activities"})})})]}),e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(De,{className:"text-2xl text-blue-500"}),e.jsx("h2",{className:`text-xl font-semibold ${N==="dark"?"text-white":"text-black"}`,children:"Quick Stats"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Completion Rate"}),e.jsxs("p",{className:`${N==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:[D,"%"]}),e.jsx("div",{className:"w-full bg-gray-600 h-2 rounded-full mt-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${D}%`}})})]}),e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Active Projects"}),e.jsx("p",{className:`${N==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:w.projects.inProgress}),e.jsxs("p",{className:`${N==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:["Out of ",w.projects.total]})]}),e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Team Members"}),e.jsx("p",{className:`${N==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:w.users.developer+w.users.projectManager}),e.jsx("p",{className:`${N==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:"Active developers & managers"})]}),e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Pending Tasks"}),e.jsx("p",{className:`${N==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:w.tasks.pending}),e.jsx("p",{className:`${N==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:"Tasks in pending status"})]})]})]})]})]})})]})]})},kt=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),[q,R]=r.useState([]),[_,Z]=r.useState(!0),[G,C]=r.useState(null),w=fe(),{theme:M,toggleTheme:V}=r.useContext(ke);r.useEffect(()=>{const s=localStorage.getItem("userRole"),d=localStorage.getItem("userName");s&&Q(s),d&&X(d),E()},[]);const E=async()=>{try{Z(!0);const s=localStorage.getItem("token");if(!s){C("Authentication token not found. Please log in again."),Z(!1);return}const d=await H.get("http://localhost:5294/ActivityLog/get",{headers:{Authorization:`Bearer ${s}`}});R(d.data),C(null)}catch(s){C("Failed to fetch activity logs"),console.error(s)}finally{Z(!1)}},D=()=>{localStorage.clear(),w("/login")},f=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/adminDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Users",path:"/allUsers"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/allProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/allTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/allComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/allLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/Settings"}],I=s=>{const d=s.activityAction||"";let x="";if(d.includes("Project")){const $=s.projectTitle||"Untitled Project";if(d.includes("Created"))x=`Created new project "${$}"`;else if(d.includes("Updated"))x=`Updated project "${$}"`;else if(d.includes("Deleted"))x=`Deleted project "${$}"`;else if(d.includes("Status Updated")){const[k,P]=d.split(" - "),[y,F]=P.split(" to ");x=`Changed project "${$}" status from ${y} to ${F}`}else d.includes("Modified")?x=`Modified project "${$}"`:x=`Performed action on project "${$}"`}else if(d.includes("Task")){const $=s.taskTitle||"Untitled Task",k=s.projectTitle||"Untitled Project";if(d.includes("Created"))x=`Created new task "${$}" in project "${k}"`;else if(d.includes("Updated"))x=`Updated task "${$}" in project "${k}"`;else if(d.includes("Deleted"))x=`Deleted task "${$}" from project "${k}"`;else if(d.includes("Status Updated")){const[P,y]=d.split(" - "),[F,A]=y.split(" to ");x=`Changed task "${$}" status from ${F} to ${A} in project "${k}"`}else d.includes("Modified")?x=`Modified task "${$}" in project "${k}"`:x=`Performed action on task "${$}" in project "${k}"`}else if(d.includes("Comment")){const $=s.taskTitle?`on task "${s.taskTitle}" in project "${s.projectTitle}"`:s.projectTitle?`on project "${s.projectTitle}"`:"";let k="Performed an action";d.includes("Added")?k="Added":d.includes("Updated")?k="Updated":d.includes("Deleted")?k="Deleted":d.includes("Modified")?k="Modified":d.includes("reacted to comment")?k="Reacted to":d.includes("resolved comment")?k="Resolved":d.includes("unresolved comment")&&(k="Unresolved"),x=`${k} a comment ${$}`}else x=d;return x||"Unknown Action"},N=s=>{if(!s)return"bg-gray-100 text-gray-800";if(s.includes("Project")){if(s.includes("Created"))return"bg-green-100 text-green-800";if(s.includes("Updated"))return"bg-blue-100 text-blue-800";if(s.includes("Deleted"))return"bg-red-100 text-red-800";if(s.includes("Status"))return"bg-purple-100 text-purple-800"}if(s.includes("Task")){if(s.includes("Created"))return"bg-emerald-100 text-emerald-800";if(s.includes("Updated"))return"bg-sky-100 text-sky-800";if(s.includes("Deleted"))return"bg-rose-100 text-rose-800";if(s.includes("Status"))return"bg-violet-100 text-violet-800"}if(s.includes("Comment")){if(s.includes("Added")||s.includes("Created"))return"bg-yellow-100 text-yellow-800";if(s.includes("Updated"))return"bg-amber-100 text-amber-800";if(s.includes("Deleted"))return"bg-orange-100 text-orange-800"}return"bg-gray-100 text-gray-800"},K=s=>{if(!s)return"";try{if(typeof s=="string"&&/^\d{2}-\d{2}-\d{4}$/.test(s)||typeof s=="string"&&s.includes("-"))return s;const d=new Date(s);if(isNaN(d.getTime()))return s.toString();const x=String(d.getDate()).padStart(2,"0"),$=String(d.getMonth()+1).padStart(2,"0"),k=d.getFullYear();return`${x}-${$}-${k}`}catch{return s.toString()}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
                        ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
                        ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),f.map(({icon:s,label:d,path:x},$)=>e.jsxs("li",{onClick:()=>x&&w(x),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                                        hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white
                                        dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600 hover:scale-105
                                        ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:s}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:d})]},$))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${M==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer ",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:V,"aria-label":"Toggle dark mode",children:M==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:D,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(he,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Activity Logs"})]})}),e.jsx("section",{className:"w-full",children:e.jsx("div",{className:"p-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Time"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Action"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"User"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Project"})]})}),e.jsx("tbody",{className:"font-medium",children:_?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"border border-black dark:border-white p-2 text-center",children:"Loading activity logs..."})}):G?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"border border-black dark:border-white p-2 text-center text-red-500",children:G})}):q.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"border border-black dark:border-white p-2 text-center",children:"No activity logs found."})}):q.map((s,d)=>e.jsxs("tr",{className:`${d%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:K(s.activityTime)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(s.activityAction)}`,children:I(s)})}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:s.userName}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:s.projectTitle})]},s.activityLogId))})]})})})]})})]})]})};Ve.register(Ge,Ye,_e,ot,nt,dt,it,ct);const wt=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),[q,R]=r.useState(0),[_,Z]=r.useState(""),[G,C]=r.useState(""),[w,M]=r.useState({projects:{total:0,completed:0,inProgress:0,onHold:0,notStarted:0,upcoming:0,cancelled:0},users:{total:0,admin:0,projectManager:0,developer:0,client:0,assignedDevelopers:0},tasks:{total:0,completed:0,inProgress:0,pending:0}}),[V,E]=r.useState([]),[D,f]=r.useState(0),[I,N]=r.useState({labels:[],datasets:[{label:"Projects Completed",data:[],backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgb(75, 192, 192)",borderWidth:1}]}),K=fe(),{theme:s,toggleTheme:d}=r.useContext(ke),x=()=>{X(""),R(0),C("")},$=v=>{if(!v)return"";try{if(typeof v=="string"&&/^\d{2}-\d{2}-\d{4}$/.test(v)||typeof v=="string"&&v.includes("-")&&v.split("-").length===3)return v;const L=new Date(v);if(isNaN(L.getTime()))return v.toString();const J=String(L.getDate()).padStart(2,"0"),Y=String(L.getMonth()+1).padStart(2,"0"),oe=L.getFullYear();return`${J}-${Y}-${oe}`}catch{return v.toString()}};r.useEffect(()=>{const v=localStorage.getItem("userRole"),L=localStorage.getItem("userName");return v&&Q(v),L&&Z(L),()=>{x()}},[]),r.useEffect(()=>{const J=`${(()=>{const Y=new Date().getHours();return Y<12?"Good Morning":Y<18?"Good Afternoon":"Good Evening"})()}, ${_||"User"}`;return C(J),X(""),R(0),()=>{x()}},[_]),r.useEffect(()=>{let v;return q<G.length&&(v=setTimeout(()=>{X(L=>L+G[q]),R(L=>L+1)},150)),()=>{v&&clearTimeout(v)}},[q,G]),r.useEffect(()=>{let v=!0,L;const J=async()=>{try{const Y=localStorage.getItem("token");if(!Y){console.error("No authentication token found"),K("/login");return}const oe={Authorization:`Bearer ${Y}`,"Content-Type":"application/json"},[se,ce,re,de]=await Promise.all([fetch("http://localhost:5294/api/Project/get",{headers:oe}),fetch("http://localhost:5294/AdminUser/all-users",{headers:oe}),fetch("http://localhost:5294/Task/get",{headers:oe}),fetch("http://localhost:5294/ActivityLog/get",{headers:oe})]);if(!v)return;if(se.status===401||ce.status===401||re.status===401||de.status===401){console.error("Authentication token expired or invalid"),localStorage.removeItem("token"),K("/login");return}if(!se.ok||!ce.ok||!re.ok||!de.ok)throw new Error("Failed to fetch data from one or more endpoints");const ae=await se.json(),ie=await ce.json(),ne=await re.json(),m=await de.json(),B=parseInt(localStorage.getItem("userId")),u=ae.filter(n=>n.createdByUserId===B),g=ie.filter(n=>n.userRole==="Developer"&&u.some(p=>p.assignedUserIds.includes(n.userId))),c=g.map(n=>{const p=u.filter(le=>le.assignedUserIds.includes(n.userId)),te=p.filter(le=>le.projectStatus==="Completed").length;return{name:n.userFullName||n.userName||n.userEmail,completed:te,total:p.length}});N({labels:c.map(n=>n.name),datasets:[{label:"Projects Completed",data:c.map(n=>n.completed),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgb(75, 192, 192)",borderWidth:1}]});const i=u.length,b=u.filter(n=>n.projectStatus==="Completed").length,T=ne.filter(n=>u.some(p=>p.projectId===n.projectId)).length,h=ne.filter(n=>n.taskStatus==="completed"&&u.some(p=>p.projectId===n.projectId)).length,S=i>0?b/i*100:0,t=T>0?h/T*100:0,l=Math.round((S+t)/2);M({projects:{total:i,completed:b,inProgress:u.filter(n=>n.projectStatus==="In Progress").length,onHold:u.filter(n=>n.projectStatus==="On Hold").length,notStarted:u.filter(n=>n.projectStatus==="Not Started").length,upcoming:u.filter(n=>n.projectStatus==="Upcoming").length,cancelled:u.filter(n=>n.projectStatus==="Cancelled").length},users:{total:ie.length,admin:ie.filter(n=>n.userRole==="Admin").length,projectManager:ie.filter(n=>n.userRole==="Project Manager").length,developer:ie.filter(n=>n.userRole==="Developer").length,client:ie.filter(n=>n.userRole==="Client").length,assignedDevelopers:g.length},tasks:{total:T,completed:h,inProgress:ne.filter(n=>n.taskStatus==="in progress"&&u.some(p=>p.projectId===n.projectId)).length,pending:ne.filter(n=>n.taskStatus==="pending"&&u.some(p=>p.projectId===n.projectId)).length}});const a=m.filter(n=>u.some(p=>p.projectTitle===n.projectTitle)).sort((n,p)=>new Date(p.timestamp)-new Date(n.timestamp)).slice(0,5).map(n=>{let p=n.userName||"Unknown User";const te=n.activityAction||"performed an action";let le="";if(te.includes("Project"))le=`Project: "${n.projectTitle||"Untitled Project"}"`;else if(te.includes("Task")){const Se=n.taskTitle||"Untitled Task",$e=n.projectTitle||"Untitled Project";le=`Task: "${Se}" in Project: "${$e}"`}else te.includes("Comment")&&(le=`Comment ${n.taskTitle?`on task "${n.taskTitle}" in project "${n.projectTitle}"`:n.projectTitle?`on project "${n.projectTitle}"`:""}`);return{...n,user:p,action:te,formattedDetails:le,timeAgo:k(new Date(n.timestamp)),timestamp:n.activityTime}});E(a),f(l)}catch(Y){console.error("Error fetching data:",Y)}};return J(),L=setInterval(J,3e4),()=>{v=!1,L&&clearInterval(L)}},[K]);const k=v=>{const L=Math.floor((new Date-v)/1e3);let J=L/31536e3;return J>1?Math.floor(J)+" years ago":(J=L/2592e3,J>1?Math.floor(J)+" months ago":(J=L/86400,J>1?Math.floor(J)+" days ago":(J=L/3600,J>1?Math.floor(J)+" hours ago":(J=L/60,J>1?Math.floor(J)+" minutes ago":Math.floor(L)+" seconds ago"))))},P=()=>{localStorage.clear(),K("/login")},y=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/projectManagerDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Developers",path:"/projectManagerTeams"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/projectManagerProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/projectManagerTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/projectManagerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/projectManagerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/projectManagerSettings"}],F={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:s==="dark"?"white":"black",font:{size:12}}}}},A=(v,L,J)=>({labels:L,datasets:[{data:Object.values(v),backgroundColor:J,borderWidth:0,hoverOffset:4}]});return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-white to-blue-200 dark:from-gray-900 dark:to-black transition-transform
          ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
          ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),y.map(({icon:v,label:L,path:J},Y)=>e.jsxs("li",{onClick:()=>J&&K(J),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                    hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white
                    dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600 hover:scale-105
                    ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:v}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:L})]},`menu-${Y}-${L}`))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${s==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:d,"aria-label":"Toggle dark mode",children:s==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full hover:from-blue-500 hover:to-purple-500 transition-all duration-300",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[e.jsx("span",{className:"font-semibold",children:_||"Guest"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:O||"Role Unknown"})]}),e.jsx(ye,{})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-gray-800 shadow-lg rounded-lg p-2 w-32 border border-gray-200 dark:border-gray-700",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all duration-300",onClick:P,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-8 space-y-8",children:[e.jsx("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-8",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"relative",children:e.jsx("h1",{className:`text-4xl font-bold ${s==="dark"?"text-white":"text-black"}`,children:e.jsxs("span",{className:"inline-block",children:[W,e.jsx("span",{className:`inline-block w-0.5 h-8 ${s==="dark"?"bg-white":"bg-black"} ml-1 animate-blink`})]})})})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(De,{className:"text-2xl text-blue-500"}),e.jsx("h2",{className:`text-xl font-semibold ${s==="dark"?"text-white":"text-black"}`,children:"My Created Projects"})]}),e.jsx("div",{className:"h-48",children:e.jsx(Ae,{data:A({completed:w.projects.completed,inProgress:w.projects.inProgress,onHold:w.projects.onHold,notStarted:w.projects.notStarted,upcoming:w.projects.upcoming,cancelled:w.projects.cancelled},["Completed","In Progress","On Hold","Not Started","Upcoming","Cancelled"],["#22C55E","#3B82F6","#F59E0B","#6366F1","#8B5CF6","#EF4444"]),options:F})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:`text-lg font-medium ${s==="dark"?"text-white":"text-black"}`,children:["Total Projects Created: ",w.projects.total]})})]}),e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ie,{className:"text-2xl text-purple-500"}),e.jsx("h2",{className:`text-xl font-semibold ${s==="dark"?"text-white":"text-black"}`,children:"Developers Summary"})]}),e.jsx("div",{className:"h-48",children:e.jsx(Ae,{data:A({active:w.users.developer,onProject:w.users.assignedDevelopers},["Active","On Project"],["#10B981","#3B82F6"]),options:F})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("p",{className:`text-lg font-medium ${s==="dark"?"text-white":"text-black"}`,children:["Total Developers: ",w.users.developer]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-2 rounded-lg",children:[e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Active"}),e.jsx("p",{className:`text-lg font-semibold ${s==="dark"?"text-white":"text-black"}`,children:w.users.developer})]}),e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-2 rounded-lg",children:[e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"On Project"}),e.jsx("p",{className:`text-lg font-semibold ${s==="dark"?"text-white":"text-black"}`,children:w.users.assignedDevelopers})]})]})]})]}),e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ue,{className:"text-2xl text-green-500"}),e.jsx("h2",{className:`text-xl font-semibold ${s==="dark"?"text-white":"text-black"}`,children:"Tasks Summary"})]}),e.jsx("div",{className:"h-48",children:e.jsx(Ae,{data:A({completed:w.tasks.completed,inProgress:w.tasks.inProgress,pending:w.tasks.pending},["Completed","In Progress","Pending"],["#10B981","#3B82F6","#EF4444"]),options:F})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:`text-lg font-medium ${s==="dark"?"text-white":"text-black"}`,children:["Total Tasks: ",w.tasks.total]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(et,{className:"text-2xl text-green-500"}),e.jsx("h2",{className:`text-xl font-semibold ${s==="dark"?"text-white":"text-black"}`,children:"Developer Performance"})]}),e.jsx("div",{className:"h-64",children:e.jsx(tt,{data:I,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:s==="dark"?"white":"black"}},tooltip:{callbacks:{label:function(v){const L=v.dataset.label||"",J=v.parsed.y;return`${L}: ${J} projects`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Projects Completed",color:s==="dark"?"white":"black"},grid:{color:s==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:s==="dark"?"white":"black",stepSize:1}},x:{title:{display:!0,text:"Developers",color:s==="dark"?"white":"black"},grid:{color:s==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:s==="dark"?"white":"black"}}}}})})]}),e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(he,{className:"text-2xl text-indigo-500"}),e.jsx("h2",{className:`text-xl font-semibold ${s==="dark"?"text-white":"text-black"}`,children:"Recent Activities"})]}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:V.length>0?V.map((v,L)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white/20 dark:bg-black/20 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("div",{className:"w-2 h-2 mt-2 rounded-full bg-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:`${s==="dark"?"text-white":"text-black"} font-medium`,children:[e.jsx("span",{className:"font-semibold",children:v.user})," ",v.action]}),e.jsx("p",{className:`${s==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:v.formattedDetails||v.details}),e.jsx("p",{className:`${s==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:$(v.timestamp)})]})]},`activity-${v.activityLogId||L}`)):e.jsx("div",{className:"text-center py-6",children:e.jsx("p",{className:`${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"No recent activities"})})})]})]}),e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(De,{className:"text-2xl text-blue-500"}),e.jsx("h2",{className:`text-xl font-semibold ${s==="dark"?"text-white":"text-black"}`,children:"Quick Stats"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${s==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Completion Rate"}),e.jsxs("p",{className:`${s==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:[D,"%"]}),e.jsx("div",{className:"w-full bg-gray-600 h-2 rounded-full mt-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${D}%`}})})]}),e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${s==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Active Projects"}),e.jsx("p",{className:`${s==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:w.projects.inProgress}),e.jsxs("p",{className:`${s==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:["Out of ",w.projects.total]})]}),e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${s==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Team Members"}),e.jsx("p",{className:`${s==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:w.users.developer+w.users.projectManager}),e.jsx("p",{className:`${s==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:"Active developers & managers"})]}),e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${s==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Pending Tasks"}),e.jsx("p",{className:`${s==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:w.tasks.pending}),e.jsx("p",{className:`${s==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:"Tasks in pending status"})]})]})]})]})})]})]})};Ve.register(Ge,Ye,_e);const yt=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),[q,R]=r.useState(0),[_,Z]=r.useState(""),[G,C]=r.useState(""),[w,M]=r.useState({projects:{total:0,completed:0,inProgress:0,onHold:0,notStarted:0,cancelled:0},users:{total:0,admin:0,projectManager:0,developer:0,client:0},tasks:{total:0,completed:0,inProgress:0,pending:0}}),[V,E]=r.useState([]),[D,f]=r.useState(0),I=fe(),{theme:N,toggleTheme:K}=r.useContext(ke);r.useEffect(()=>{const y=localStorage.getItem("userRole"),F=localStorage.getItem("userName");y&&Q(y),F&&Z(F)},[]),r.useEffect(()=>{const A=`${(()=>{const v=new Date().getHours();return v<12?"Good Morning":v<18?"Good Afternoon":"Good Evening"})()}, ${_||"User"}`;C(A),X(""),R(0)},[_]),r.useEffect(()=>{if(q<G.length){const y=setTimeout(()=>{X(F=>F+G[q]),R(F=>F+1)},150);return()=>clearTimeout(y)}},[q,G]),r.useEffect(()=>{const y=async()=>{try{const A=localStorage.getItem("token");if(!A){console.error("No authentication token found"),I("/login");return}const v={Authorization:`Bearer ${A}`,"Content-Type":"application/json"},L=localStorage.getItem("userId"),[J,Y,oe,se]=await Promise.all([fetch("http://localhost:5294/api/Project/get",{headers:v}),fetch("http://localhost:5294/AdminUser/all-users",{headers:v}),fetch("http://localhost:5294/Task/get",{headers:v}),fetch("http://localhost:5294/ActivityLog/get",{headers:v})]);if(J.status===401||Y.status===401||oe.status===401||se.status===401){console.error("Authentication token expired or invalid"),localStorage.removeItem("token"),I("/login");return}if(!J.ok||!Y.ok||!oe.ok||!se.ok)throw new Error("Failed to fetch data from one or more endpoints");const ce=await J.json(),re=await Y.json(),de=await oe.json(),ae=await se.json();console.log("Fetched Activities:",ae);const ie=ce.filter(c=>c.assignedUserIds&&c.assignedUserIds.includes(Number(L))),ne=de.filter(c=>c.assignedUserId===Number(L));console.log("User Tasks:",ne);const m=ae.sort((c,i)=>new Date(i.activityTime)-new Date(c.activityTime)).slice(0,5).map(c=>{const i=c.userName||"Unknown User";let b="";return c.taskTitle&&c.projectTitle?b=`Task: "${c.taskTitle}" in Project: "${c.projectTitle}"`:c.projectTitle?b=`Project: "${c.projectTitle}"`:c.taskTitle?b=`Task: "${c.taskTitle}"`:c.commentContent&&(b=c.commentContent.slice(0,50)),{...c,user:i,action:c.activityAction,formattedDetails:b,timestamp:c.activityTime}});console.log("Processed Activities:",m),E(m);const B=ne.length,u=ne.filter(c=>c.taskStatus==="completed").length,g=B>0?u/B*100:0;f(Math.round(g)),M({projects:{total:ie.length,completed:ie.filter(c=>c.projectStatus==="Completed").length,inProgress:ie.filter(c=>c.projectStatus==="In Progress").length,onHold:ie.filter(c=>c.projectStatus==="On Hold").length,notStarted:ie.filter(c=>c.projectStatus==="Not Started").length,cancelled:ie.filter(c=>c.projectStatus==="Cancelled").length},users:{total:re.length,admin:re.filter(c=>c.userRole==="Admin").length,projectManager:re.filter(c=>c.userRole==="Project Manager").length,developer:re.filter(c=>c.userRole==="Developer").length,client:re.filter(c=>c.userRole==="Client").length},tasks:{total:ne.length,completed:ne.filter(c=>c.taskStatus==="completed").length,inProgress:ne.filter(c=>c.taskStatus==="in progress").length,pending:ne.filter(c=>c.taskStatus==="pending").length}})}catch(A){console.error("Error fetching data:",A)}};y();const F=setInterval(y,3e4);return()=>clearInterval(F)},[I]);const s=y=>{const F=new Date(y);if(isNaN(F.getTime()))return"";const A=Math.floor((new Date-F)/1e3);let v=A/31536e3;return v>1?Math.floor(v)+" years ago":(v=A/2592e3,v>1?Math.floor(v)+" months ago":(v=A/86400,v>1?Math.floor(v)+" days ago":(v=A/3600,v>1?Math.floor(v)+" hours ago":(v=A/60,v>1?Math.floor(v)+" minutes ago":A>0?Math.floor(A)+" seconds ago":""))))},d=y=>{if(!y)return"";try{if(typeof y=="string"&&/^\d{2}-\d{2}-\d{4}$/.test(y)||typeof y=="string"&&y.includes("-")&&y.split("-").length===3)return y;const F=new Date(y);if(isNaN(F.getTime()))return y.toString();const A=String(F.getDate()).padStart(2,"0"),v=String(F.getMonth()+1).padStart(2,"0"),L=F.getFullYear();return`${A}-${v}-${L}`}catch{return y.toString()}},x=()=>{localStorage.clear(),I("/login")},$=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/developerDashboard"},{icon:e.jsx(me,{}),label:"View Projects",path:"/developerProjects"},{icon:e.jsx(ue,{}),label:"View Tasks",path:"/developerTasks"},{icon:e.jsx(ve,{}),label:"View Comments",path:"/developerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/developerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/developerSettings"}],k={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:N==="dark"?"white":"black",font:{size:12}}}}},P=(y,F,A)=>({labels:F,datasets:[{data:Object.values(y),backgroundColor:A,borderWidth:0,hoverOffset:4}]});return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-white to-blue-200 dark:from-gray-900 dark:to-black transition-transform
          ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
          ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),$.map(({icon:y,label:F,path:A},v)=>e.jsxs("li",{onClick:()=>A&&I(A),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                    hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white
                    dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600 hover:scale-105
                    ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:y}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:F})]},`menu-${v}-${F}`))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${N==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:K,"aria-label":"Toggle dark mode",children:N==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full hover:from-blue-500 hover:to-purple-500 transition-all duration-300",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[e.jsx("span",{className:"font-semibold",children:_||"Guest"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:O||"Role Unknown"})]}),e.jsx(ye,{})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-gray-800 shadow-lg rounded-lg p-2 w-32 border border-gray-200 dark:border-gray-700",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all duration-300",onClick:x,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-8 space-y-8",children:[e.jsx("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-8",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"relative",children:e.jsx("h1",{className:`text-4xl font-bold ${N==="dark"?"text-white":"text-black"}`,children:e.jsxs("span",{className:"inline-block",children:[W,e.jsx("span",{className:`inline-block w-0.5 h-8 ${N==="dark"?"bg-white":"bg-black"} ml-1 animate-blink`})]})})})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(De,{className:"text-2xl text-blue-500"}),e.jsx("h2",{className:`text-xl font-semibold ${N==="dark"?"text-white":"text-black"}`,children:"My Assigned Projects"})]}),e.jsx("div",{className:"h-48",children:e.jsx(Ae,{data:P({completed:w.projects.completed,inProgress:w.projects.inProgress,onHold:w.projects.onHold,notStarted:w.projects.notStarted,cancelled:w.projects.cancelled},["Completed","In Progress","On Hold","Not Started","Cancelled"],["#22C55E","#3B82F6","#F59E0B","#6366F1","#EF4444"]),options:k})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:`text-lg font-medium ${N==="dark"?"text-white":"text-black"}`,children:["Total Assigned Projects: ",w.projects.total]})})]})," ",e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ue,{className:"text-2xl text-green-500"}),e.jsx("h2",{className:`text-xl font-semibold ${N==="dark"?"text-white":"text-black"}`,children:"Tasks Summary"})]}),e.jsx("div",{className:"h-48",children:e.jsx(Ae,{data:P({completed:w.tasks.completed,inProgress:w.tasks.inProgress,pending:w.tasks.pending},["Completed","In Progress","Pending"],["#10B981","#3B82F6","#EF4444"]),options:k})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:`text-lg font-medium ${N==="dark"?"text-white":"text-black"}`,children:["Total Tasks: ",w.tasks.total]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[" ",e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(De,{className:"text-2xl text-blue-500"}),e.jsx("h2",{className:`text-xl font-semibold ${N==="dark"?"text-white":"text-black"}`,children:"Quick Stats"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Completion Rate"}),e.jsxs("p",{className:`${N==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:[D,"%"]}),e.jsx("div",{className:"w-full bg-gray-600 h-2 rounded-full mt-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${D}%`}})})]}),e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Active Projects"}),e.jsx("p",{className:`${N==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:w.projects.inProgress}),e.jsxs("p",{className:`${N==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:["Out of ",w.projects.total]})]}),e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Team Members"}),e.jsx("p",{className:`${N==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:w.users.developer+w.users.projectManager}),e.jsx("p",{className:`${N==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:"Active developers & managers"})]}),e.jsxs("div",{className:"bg-white/20 dark:bg-black/20 p-4 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"} text-sm`,children:"Pending Tasks"}),e.jsx("p",{className:`${N==="dark"?"text-white":"text-black"} text-2xl font-bold`,children:w.tasks.pending}),e.jsx("p",{className:`${N==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:"Tasks in pending status"})]})]})]}),e.jsxs("div",{className:"bg-white/40 dark:bg-black/50 rounded-xl shadow-lg backdrop-blur-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(he,{className:"text-2xl text-indigo-500"}),e.jsx("h2",{className:`text-xl font-semibold ${N==="dark"?"text-white":"text-black"}`,children:"Recent Activities"})]}),e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:V.length>0?V.map((y,F)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white/20 dark:bg-black/20 rounded-lg hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300",children:[e.jsx("div",{className:"w-2 h-2 mt-2 rounded-full bg-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:`${N==="dark"?"text-white":"text-black"} font-medium`,children:[e.jsx("span",{className:"font-semibold",children:y.user}),y.timestamp&&e.jsxs("span",{className:"ml-2 text-gray-500 dark:text-gray-400 text-xs",children:["- ",d(y.timestamp)]})]}),e.jsx("span",{className:`text-xs ${N==="dark"?"text-gray-400":"text-gray-500"}`,children:s(y.timestamp)})]}),e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"}
                               } text-sm mt-1`,children:y.action}),y.formattedDetails&&e.jsx("p",{className:`${N==="dark"?"text-gray-400":"text-gray-500"} text-xs mt-1`,children:y.formattedDetails})]})]},`activity-${y.activityLogId||F}`)):e.jsx("div",{className:"text-center py-6",children:e.jsx("p",{className:`${N==="dark"?"text-gray-300":"text-gray-600"}`,children:"No recent activities"})})})]})]})]})})]})]})},Nt=()=>{var c;const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),{theme:R,toggleTheme:_}=r.useContext(ke);r.useEffect(()=>{const i=localStorage.getItem("userRole"),b=localStorage.getItem("userName");i&&Q(i),b&&X(b)},[]);const Z=()=>{localStorage.clear(),q("/login")},G=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/projectManagerDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Developers",path:"/projectManagerTeams"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/projectManagerProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/projectManagerTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/projectManagerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/projectManagerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/projectManagerSettings"}],[C,w]=r.useState(!1),[M,V]=r.useState([]),[E,D]=r.useState(null),[f,I]=r.useState({}),[N,K]=r.useState(!1),[s,d]=r.useState(!1),[x,$]=r.useState(""),[k,P]=r.useState(""),[y,F]=r.useState(""),[A,v]=r.useState({title:"",description:"",status:"",startDate:"",deadline:"",createdByUserId:"",assignedUsers:[]}),[L,J]=r.useState([]),[Y,oe]=r.useState(null),[se,ce]=r.useState([]);r.useEffect(()=>{const i=localStorage.getItem("userId");i&&oe(i)},[]),r.useEffect(()=>{const i=async()=>{try{const T=localStorage.getItem("token"),S=(await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${T}`}})).data.filter(t=>String(t.createdByUserId)===String(Y));V(S)}catch(T){console.error("Failed to fetch projects:",T)}},b=async()=>{try{const T=localStorage.getItem("token"),h=await H.get("http://localhost:5294/AdminUser/all-users",{headers:{Authorization:`Bearer ${T}`}}),S=h.data.filter(t=>{var l;return((l=t.userRole)==null?void 0:l.toLowerCase())==="developer"});ce(S),J(h.data)}catch(T){console.error("Failed to fetch users:",T)}};Y&&(i(),b())},[Y]);function re(i){if(!i)return"";const[b,T,h]=i.split("-");return`${h}-${T}-${b}`}const de=async(i,b)=>{var T;if(!b.title||!b.description||!b.status||!b.startDate||!b.deadline||!b.assignedUsers||b.assignedUsers.length===0){j.error("All fields are required and at least one user must be assigned.");return}try{const h=j.loading("Updating project..."),S=localStorage.getItem("token"),t={projectId:i,projectTitle:b.title,projectDescription:b.description,projectStatus:b.status,projectStartDate:b.startDate,projectDeadLine:b.deadline,createdByUserId:Number(Y),assignedUserIds:b.assignedUsers.map(Number)};if(console.log("Update Project Payload:",t),console.log("Updating Project ID:",i),(await H.put(`http://localhost:5294/api/Project/update/${i}`,t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`}})).status===200){const n=(await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${S}`}})).data.filter(p=>String(p.createdByUserId)===String(Y));V(n),D(null),I({}),j.update(h,{render:`Project "${b.title}" updated successfully!`,type:"success",isLoading:!1,autoClose:3e3,closeButton:!0})}}catch(h){if(console.error("Failed to update project:",h),h.response){const S=((T=h.response.data)==null?void 0:T.message)||h.response.data||"An error occurred while updating the project. Please try again.";j.error(`Update failed: ${S}`)}else j.error("Failed to update project. Please check your connection and try again.")}},ae=async(i,b)=>{var T;if(window.confirm(`Are you sure you want to delete the project "${b}"?`))try{const h=j.loading("Deleting project..."),S=localStorage.getItem("token");await H.delete(`http://localhost:5294/api/Project/delete/${i}`,{headers:{Authorization:`Bearer ${S}`}}),V(t=>t.filter(l=>l.projectId!==i)),j.update(h,{render:`Project "${b}" deleted successfully!`,type:"success",isLoading:!1,autoClose:3e3,closeButton:!0})}catch(h){if(console.error("Failed to delete project:",h),h.response){const S=((T=h.response.data)==null?void 0:T.message)||h.response.data||"An error occurred while deleting the project.";j.error(`Delete failed: ${S}`)}else j.error("Failed to delete project. Please check your connection and try again.")}},ie=i=>{D(i.projectId),U(!1),I({title:i.projectTitle,description:i.projectDescription,status:i.projectStatus,startDate:re(i.projectStartDate),deadline:re(i.projectDeadLine),createdByUserId:Y,assignedUsers:i.assignedUserIds?i.assignedUserIds.map(String):[]}),j.info(`Editing project: ${i.projectTitle}`,{icon:"",position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},ne=async i=>{var b;if(i.preventDefault(),!A.title||!A.description||!A.status||!A.startDate||!A.deadline||!A.assignedUsers||A.assignedUsers.length===0){j.error("All fields are required and at least one user must be assigned.");return}try{const T=j.loading("Creating new project..."),h=localStorage.getItem("token"),S={projectTitle:A.title,projectDescription:A.description,projectStatus:A.status,projectStartDate:A.startDate,projectDeadLine:A.deadline,createdByUserId:Number(Y),assignedUserIds:A.assignedUsers.map(Number)};console.log("Create Project Payload:",S);const t=await H.post("http://localhost:5294/api/Project/create",S,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`}});if(t.status===200||t.status===201){K(!1),v({title:"",description:"",status:"Not Started",startDate:"",deadline:"",createdByUserId:Y,assignedUsers:[]});const a=(await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${h}`}})).data.filter(n=>String(n.createdByUserId)===String(Y));V(a),j.update(T,{render:`Project "${A.title}" created successfully!`,type:"success",isLoading:!1,autoClose:3e3,closeButton:!0})}}catch(T){console.error("Failed to create project:",T),T.response?j.error(`Failed to create project: ${((b=T.response.data)==null?void 0:b.message)||T.response.data||"Unknown error"}`):j.error("Failed to create project. Please try again.")}},m=()=>{K(i=>(i||(v(b=>({...b,createdByUserId:Y})),j.info("Create a new project")),!i))},B=()=>{$(""),P(""),F(""),j.info("Filters cleared")},u=M.filter(i=>!(x&&!i.projectTitle.toLowerCase().includes(x.toLowerCase())||k&&i.projectStatus!==k||y&&(!i.assignedUserIds||!i.assignedUserIds.includes(Number(y))))),g=C?u:u.slice(0,10);return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx(Te,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:R==="dark"?"dark":"light"}),e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
              ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
              ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),G.map(({icon:i,label:b,path:T},h)=>e.jsxs("li",{onClick:()=>T&&q(T),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                        hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white hover:scale-105
                        dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600
                        ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:i}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:b})]},h))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${R==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:_,"aria-label":"Toggle dark mode",children:R==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:Z,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(me,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"All Projects"})]})}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("button",{onClick:()=>d(!s),className:"flex items-center gap-2 bg-gradient-to-r from-blue-400 to-purple-400 text-white px-6 py-2 rounded-lg shadow-lg hover:from-blue-500 hover:to-purple-500 transition-all duration-300 font-medium",children:s?"Hide Filters":"Show Filters"}),e.jsx("button",{onClick:m,className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:N?"Close":"Create Project"})]}),s&&e.jsxs("div",{className:"space-y-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 text-black dark:text-white p-6 rounded-lg mb-4 shadow-lg",children:[e.jsx("h2",{className:"text-center text-xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-4",children:"Filter Projects"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Title"}),e.jsx("input",{type:"text",value:x,onChange:i=>$(i.target.value),placeholder:"Search by title...",className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Status"}),e.jsxs("select",{value:k,onChange:i=>P(i.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"Not Started",children:"Not Started"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"On Hold",children:"On Hold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assigned Developer"}),e.jsxs("select",{value:y,onChange:i=>F(i.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Developers"}),se.map(i=>e.jsx("option",{value:i.userId,children:i.userFullName||i.userName||i.userEmail},i.userId))]})]})]}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("button",{onClick:B,className:"bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded hover:bg-gray-300 dark:hover:bg-gray-500 transition-all",children:"Clear Filters"})})]}),N&&e.jsxs("form",{onSubmit:ne,className:"space-y-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 text-black dark:text-white p-6 rounded-lg mb-4 shadow-lg",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-center text-2xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-6",children:"Create new Project"}),e.jsx("label",{htmlFor:"projectTitle",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),e.jsx("input",{id:"projectTitle",name:"projectTitle",type:"text",value:A.title,onChange:i=>v(b=>({...b,title:i.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projectDescription",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{id:"projectDescription",name:"projectDescription",value:A.description,onChange:i=>v(b=>({...b,description:i.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projectStatus",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{id:"projectStatus",name:"projectStatus",value:A.status,onChange:i=>v(b=>({...b,status:i.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"Not Started",children:"Not Started"}),e.jsx("option",{value:"Upcoming",children:"Upcoming"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"On Hold",children:"On Hold"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projectStartDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),e.jsx("input",{id:"projectStartDate",name:"projectStartDate",type:"date",value:A.startDate,onChange:i=>v(b=>({...b,startDate:i.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projectDeadline",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Deadline"}),e.jsx("input",{id:"projectDeadline",name:"projectDeadline",type:"date",value:A.deadline,onChange:i=>v(b=>({...b,deadline:i.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full  bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projectCreatedBy",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created By"}),e.jsx("input",{id:"projectCreatedBy",name:"projectCreatedBy",type:"text",value:((c=L.find(i=>String(i.userId)===String(Y)))==null?void 0:c.userFullName)||"",className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-gray-100 dark:bg-gray-700",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projectAssignedUsers",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assigned Users (Developers)"}),e.jsx("select",{id:"projectAssignedUsers",name:"projectAssignedUsers",multiple:!0,value:A.assignedUsers,onChange:i=>{const b=Array.from(i.target.selectedOptions,T=>T.value);v(T=>({...T,assignedUsers:b}))},className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full h-32 bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:se.map(i=>e.jsx("option",{value:i.userId,children:i.userFullName||i.userName||i.userEmail},i.userId))}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Hold Ctrl (Windows) or Command (Mac) to select multiple developers. Select at least one developer."})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:"Create"})]}),e.jsx("div",{className:"flex justify-between items-center mt-4 px-4",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Showing ",g.length," of ",u.length," filtered projects",u.length!==M.length&&` (filtered from ${M.length} total)`]})}),e.jsx("section",{className:"w-full",children:e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Title"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Description"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Status"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Start Date"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Deadline"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Created By"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Assigned Users"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Actions"})]})}),e.jsx("tbody",{className:"font-medium ",children:g.map((i,b)=>e.jsxs("tr",{className:`${b%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:i.projectId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===i.projectId?e.jsx("input",{type:"text",value:f.title||"",onChange:T=>I(h=>({...h,title:T.target.value})),className:"border p-1 rounded w-full text-black"}):i.projectTitle}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===i.projectId?e.jsx("textarea",{value:f.description||"",onChange:T=>I(h=>({...h,description:T.target.value})),className:"border border-black dark:border-white p-1 rounded w-full text-black"}):i.projectDescription}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===i.projectId?e.jsxs("select",{value:f.status||"",onChange:T=>I(h=>({...h,status:T.target.value})),className:"border border-black text-black dark:border-white p-2",children:[e.jsx("option",{value:"Not Started",children:"Not Started"}),e.jsx("option",{value:"Upcoming",children:"Upcoming"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"On Hold",children:"On Hold"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]}):i.projectStatus}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===i.projectId?e.jsx("input",{type:"date",value:f.startDate||"",onChange:T=>I(h=>({...h,startDate:T.target.value})),className:"border border-black text-black dark:border-white p-2"}):i.projectStartDate}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===i.projectId?e.jsx("input",{type:"date",value:f.deadline||"",onChange:T=>I(h=>({...h,deadline:T.target.value})),className:"border border-black text-black dark:border-white p-2"}):i.projectDeadLine}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===i.projectId?e.jsx("input",{type:"text",value:Y,className:"border border-black text-black dark:border-white p-2",readOnly:!0}):i.createdByUserName||"Unknown User"}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===i.projectId?e.jsx("select",{multiple:!0,value:f.assignedUsers||[],onChange:T=>{const h=Array.from(T.target.selectedOptions,S=>S.value);I(S=>({...S,assignedUsers:h}))},className:"border border-black text-black dark:border-white p-2 rounded w-full h-32",children:se.map(T=>e.jsx("option",{value:T.userId,children:T.userFullName||T.userName||T.userEmail},T.userId))}):i.assignedUserIds&&i.assignedUserIds.length>0?i.assignedUserIds.map(T=>{const h=L.find(S=>String(S.userId)===String(T));return h?h.userFullName||h.userName||h.userEmail:"Unknown User"}).join(", "):"No users assigned"}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:e.jsx("div",{className:"flex flex-row gap-x-2",children:E===i.projectId?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>de(i.projectId,f),className:"bg-green-500 text-white p-1 rounded hover:bg-green-600",children:"Save"}),e.jsx("button",{onClick:()=>{D(null),j.info("Edit cancelled",{icon:"",autoClose:2e3})},className:"bg-gray-400 text-white p-1 rounded hover:bg-gray-500",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ie(i),className:"bg-blue-500 text-white p-1 rounded hover:bg-blue-600",children:"Edit"}),e.jsx("button",{onClick:()=>ae(i.projectId,i.projectTitle),className:"bg-red-500 text-white p-1 rounded hover:bg-red-600",children:"Delete"})]})})})]},i.projectId))})]}),!C&&u.length>10&&e.jsx("button",{className:"mt-4 underline text-blue-600 hover:text-blue-800",onClick:()=>{w(!0),j.info(`Showing all ${u.length} projects`,{icon:"",autoClose:2e3})},children:"Show All Projects"}),C&&u.length>10&&e.jsx("button",{className:"mt-4 underline text-blue-600 hover:text-blue-800",onClick:()=>{w(!1),j.info("Showing first 10 projects",{icon:"",autoClose:2e3})},children:"Show Less"})]})})]})})]})]})},vt=()=>{const[o,U]=r.useState(typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),{theme:R,toggleTheme:_}=r.useContext(ke),[Z,G]=r.useState([]),[C,w]=r.useState(null),[M,V]=r.useState({commentContent:"",taskItemId:"",projectId:"",commentedById:""}),[E,D]=r.useState(!1),[f,I]=r.useState({commentContent:"",taskItemId:"",projectId:"",commentedById:"",createdAt:new Date().toISOString()}),[N,K]=r.useState(""),[s,d]=r.useState(""),[x,$]=r.useState(""),[k,P]=r.useState(""),[y,F]=r.useState(""),[A,v]=r.useState(!1),[L,J]=r.useState(!1),[Y,oe]=r.useState([]),[se,ce]=r.useState([]),[re,de]=r.useState([]),[ae,ie]=r.useState("task"),ne=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/adminDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Users",path:"/allUsers"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/allProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/allTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/allComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/allLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/settings"}];r.useEffect(()=>{const a=localStorage.getItem("userRole"),n=localStorage.getItem("userName");a&&Q(a),n&&X(n)},[]),r.useEffect(()=>{(async()=>{try{const n=localStorage.getItem("token"),te=(await H.get("http://localhost:5294/AdminUser/all-users",{headers:{Authorization:`Bearer ${n}`}})).data.map(le=>({...le,userFullName:le.userFullName||le.userName||"No name",userEmail:le.userEmail||"No email",userRole:le.userRole||"No role",department:le.department||"No department"}));ce(te)}catch(n){console.error("Failed to fetch users:",n),j.error("Failed to fetch users")}})()},[]),r.useEffect(()=>{(async()=>{try{const n=localStorage.getItem("token"),te=(await H.get("http://localhost:5294/Task/get",{headers:{Authorization:`Bearer ${n}`}})).data.map(le=>({...le,taskTitle:le.taskTitle||"Untitled",taskDescription:le.taskDescription||"No description",taskPriority:le.taskPriority||"Not set",taskStatus:le.taskStatus||"Not set"}));oe(te)}catch(n){console.error("Failed to fetch tasks:",n),j.error("Failed to fetch tasks")}})()},[]),r.useEffect(()=>{(async()=>{try{const n=localStorage.getItem("token"),p=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${n}`}});de(p.data)}catch(n){console.error("Failed to fetch projects:",n),n.response?(console.error("Error response:",n.response.data),console.error("Status code:",n.response.status),j.error(`Failed to fetch projects: ${n.response.status} - ${n.response.data}`)):n.request?(console.error("No response received:",n.request),j.error("Failed to fetch projects: No response received")):(console.error("Error setting up request:",n.message),j.error(`Failed to fetch projects: ${n.message}`))}})()},[]),r.useEffect(()=>{(async()=>{try{const n=localStorage.getItem("token"),p=await H.get("http://localhost:5294/Comment/get-all",{headers:{Authorization:`Bearer ${n}`}});G(p.data)}catch(n){console.error("Failed to fetch comments:",n),j.error("Failed to fetch comments")}})()},[]);const m=()=>{localStorage.clear(),q("/login")},B=async a=>{var n;if(a.preventDefault(),!f.commentContent||!f.commentedById||ae==="task"&&!f.taskItemId||ae==="project"&&!f.projectId){j.warning("Please fill in all fields");return}try{const p=localStorage.getItem("token");let te=null,le=null;if(ae==="task"&&f.taskItemId&&(te=parseInt(f.taskItemId),isNaN(te))){j.error("Invalid task ID");return}if(ae==="project"&&f.projectId&&(le=parseInt(f.projectId),isNaN(le))){j.error("Invalid project ID");return}const Se=parseInt(f.commentedById);if(isNaN(Se)){j.error("Invalid user ID");return}let $e;try{const Pe=f.createdAt?new Date(f.createdAt):new Date,Me=String(Pe.getDate()).padStart(2,"0"),Be=String(Pe.getMonth()+1).padStart(2,"0"),Oe=Pe.getFullYear();$e=`${Me}-${Be}-${Oe}`}catch(Pe){console.error("Date formatting error:",Pe);const Me=new Date,Be=String(Me.getDate()).padStart(2,"0"),Oe=String(Me.getMonth()+1).padStart(2,"0"),Ze=Me.getFullYear();$e=`${Be}-${Oe}-${Ze}`}const Ce={commentContent:f.commentContent.trim(),commentedById:Se,taskItemId:ae==="task"?te:null,projectId:ae==="project"?le:null,createdAt:$e};console.log("Sending payload:",Ce);const Ue=await H.post("http://localhost:5294/Comment/create",Ce,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});console.log("Server response:",Ue.data),j.success("Comment created successfully!"),D(!1),I({commentContent:"",taskItemId:"",projectId:"",commentedById:"",createdAt:new Date().toISOString()});const Fe=(await H.get("http://localhost:5294/Comment/get-all",{headers:{Authorization:`Bearer ${p}`}})).data.map(Pe=>({...Pe,createdAt:l(Pe.createdAt)}));G(Fe)}catch(p){console.error("Create comment error:",p);let te="Failed to create comment";if(p.response){console.error("Error response data:",p.response.data),console.error("Error response status:",p.response.status),console.error("Error response headers:",p.response.headers);const le=((n=p.response.data)==null?void 0:n.message)||p.response.data;te+=`: ${p.response.status} - ${le}`,j.error(te)}else p.request?(console.error("No response received:",p.request),te+=": No response received from server",j.error(te)):(console.error("Error setting up request:",p.message),te+=`: ${p.message}`,j.error(te))}},u=async()=>{try{const a=localStorage.getItem("token"),n={commentContent:M.commentContent,taskItemId:M.taskItemId?Number(M.taskItemId):null,projectId:M.projectId?Number(M.projectId):null,commentedById:Number(M.commentedById)};await H.put(`http://localhost:5294/Comment/update/${C}`,n,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});const p=await H.get("http://localhost:5294/Comment/get-all",{headers:{Authorization:`Bearer ${a}`}});G(p.data),w(null),V({commentContent:"",taskItemId:"",projectId:"",commentedById:""}),j.success("Comment updated successfully!")}catch(a){console.error("Update comment error:",a),j.error(`Failed to update comment: ${a.message}`)}},g=async a=>{if(window.confirm("Are you sure you want to delete this comment?"))try{const n=localStorage.getItem("token");await H.delete(`http://localhost:5294/Comment/delete/${a}`,{headers:{Authorization:`Bearer ${n}`}}),G(p=>p.filter(te=>te.commentId!==a)),j.success("Comment deleted successfully!")}catch(n){console.error("Failed to delete comment:",n),j.error(`Failed to delete comment: ${n.message}`)}},c=a=>{w(a.commentId),V({commentContent:a.commentContent,taskItemId:a.taskItemId||"",projectId:a.projectId||"",commentedById:a.commentedById})},i=()=>{K(""),d(""),$(""),P(""),F(""),j.info("Filters cleared")},T=Z.filter(a=>{if(N&&!a.commentContent.toLowerCase().includes(N.toLowerCase())||s&&a.taskItemId!==Number(s)||x&&a.projectId!==Number(x)||k&&a.commentedById!==Number(k))return!1;if(y){const n=new Date(a.createdAt),p=new Date(y);if(n.setHours(0,0,0,0),p.setHours(0,0,0,0),n.getTime()!==p.getTime())return!1}return!0}),h=L?T:T.slice(0,10),S=T.length,t=Z.length,l=a=>{if(!a)return"N/A";try{if(typeof a=="string"&&a.match(/^\d{2}-\d{2}-\d{4}$/))return a;const n=new Date(a);if(isNaN(n.getTime()))return"N/A";const p=String(n.getDate()).padStart(2,"0"),te=String(n.getMonth()+1).padStart(2,"0"),le=n.getFullYear();return`${p}-${te}-${le}`}catch(n){return console.error("Date formatting error:",n),"N/A"}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx(Te,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:R==="dark"?"dark":"light"}),e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
            ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),ne.map(({icon:a,label:n,path:p},te)=>e.jsxs("li",{onClick:()=>p&&q(p),className:`flex items-center gap-2 p-2 rounded-lg cursor-pointer hover:bg-blue-100 dark:hover:bg-gray-800 transition-all ${!o&&"justify-center"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:a}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:n})]},te))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${R==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer ",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:_,"aria-label":"Toggle dark mode",children:R==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{className:`transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:m,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(me,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"All Comments"})]})}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("button",{onClick:()=>v(!A),className:"flex items-center gap-2 bg-gradient-to-r from-blue-400 to-purple-400 text-white px-4 py-2 rounded-lg shadow-lg hover:from-blue-500 hover:to-purple-500 transition-all duration-300 font-medium",children:A?"Hide Filters":"Show Filters"}),e.jsx("button",{onClick:()=>D(a=>!a),className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:E?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:""})," Close"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:"+"})," Create Comment"]})})]}),A&&e.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-center bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent",children:"Filter Comments"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment Content"}),e.jsx("input",{type:"text",value:N,onChange:a=>K(a.target.value),placeholder:"Search in content...",className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Task"}),e.jsxs("select",{value:s,onChange:a=>d(a.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Tasks"},"all-tasks"),Y.map(a=>e.jsx("option",{value:a.taskItemId,children:a.taskTitle},a.taskItemId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsxs("select",{value:x,onChange:a=>$(a.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Projects"},"all-projects"),re.length>0?re.map(a=>e.jsxs("option",{value:a.projectId,children:[a.projectTitle," ",a.projectStatus&&`(${a.projectStatus})`]},a.projectId)):e.jsx("option",{value:"",disabled:!0,children:"Loading projects..."},"loading-projects-filter")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Commented By"}),e.jsxs("select",{value:k,onChange:a=>P(a.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Users"},"all-users"),se.map(a=>e.jsx("option",{value:a.userId,children:a.userFullName||a.userName||a.userEmail},a.userId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment Date"}),e.jsx("input",{type:"date",value:y,onChange:a=>F(a.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:i,className:"bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded hover:bg-gray-300 dark:hover:bg-gray-500 transition-all w-full",children:"Clear Filters"})})]})]}),E&&e.jsxs("form",{onSubmit:B,className:"space-y-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 text-black dark:text-white p-6 rounded-lg mb-4 shadow-lg",children:[e.jsx("h2",{className:"text-center text-2xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-6",children:"Create Admin Comment"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment Type"}),e.jsxs("select",{value:ae,onChange:a=>ie(a.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"task",children:"Task Comment"},"task-comment"),e.jsx("option",{value:"project",children:"Project Comment"},"project-comment")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment"}),e.jsx("textarea",{value:f.commentContent,onChange:a=>I(n=>({...n,commentContent:a.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",required:!0})]}),ae==="task"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Related Task"}),e.jsxs("select",{value:f.taskItemId,onChange:a=>I(n=>({...n,taskItemId:a.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",required:!0,children:[e.jsx("option",{value:"",children:"Select Task"},"select-task"),Y.map(a=>e.jsx("option",{value:a.taskItemId,children:a.taskTitle},a.taskItemId))]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Related Project"}),e.jsxs("select",{value:f.projectId,onChange:a=>I(n=>({...n,projectId:a.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",required:!0,children:[e.jsx("option",{value:"",children:"Select Project"},"select-project"),re.length>0?re.map(a=>e.jsxs("option",{value:a.projectId,children:[a.projectTitle," ",a.projectStatus&&`(${a.projectStatus})`]},a.projectId)):e.jsx("option",{value:"",disabled:!0,children:"Loading projects..."},"loading-projects-create")]}),re.length===0&&e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"No projects available. Please wait or contact your administrator."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Commented By"}),e.jsxs("select",{value:f.commentedById,onChange:a=>I(n=>({...n,commentedById:a.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",required:!0,children:[e.jsx("option",{value:"",children:"Select User"},"select-user"),se.map(a=>e.jsx("option",{value:a.userId,children:a.userFullName||a.userName||a.userEmail},a.userId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created At"}),e.jsx("input",{type:"datetime-local",value:f.createdAt?new Date(f.createdAt).toISOString().slice(0,16):new Date().toISOString().slice(0,16),onChange:a=>I(n=>({...n,createdAt:a.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select the date and time for this comment."})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:"Submit Comment"})]}),e.jsx("section",{className:"w-full",children:e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Content"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Type"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Related To"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Author"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Created At"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Actions"})]})}),e.jsx("tbody",{className:"font-medium",children:h.map((a,n)=>{var p,te;return e.jsxs("tr",{className:`${n%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:a.commentId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:C===a.commentId?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"text",value:M.commentContent,onChange:le=>V(Se=>({...Se,commentContent:le.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),e.jsx("button",{onClick:u,className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-3 py-1 rounded hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Update"}),e.jsx("button",{onClick:()=>w(null),className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white px-3 py-1 rounded hover:from-gray-500 hover:to-gray-600 transition-all duration-300",children:"Cancel"})]}):a.commentContent}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:a.taskItemId?"Task":"Project"}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:a.taskItemId?((p=Y.find(le=>le.taskItemId===a.taskItemId))==null?void 0:p.taskTitle)||a.relatedTaskTitle||"Unknown Task":((te=re.find(le=>le.projectId===a.projectId))==null?void 0:te.projectTitle)||a.relatedProjectTitle||"Unknown Project"}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:a.commentedByName}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:l(a.createdAt)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:C!==a.commentId&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(a),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-1 rounded hover:from-blue-600 hover:to-blue-700 transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>g(a.commentId),className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1 rounded hover:from-red-600 hover:to-red-700 transition-all duration-300",children:"Delete"})]})})]},a.commentId)})})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-300 mb-2 sm:mb-0",children:N||s||x||k||y?e.jsxs("span",{children:["Showing"," ",e.jsx("span",{className:"font-semibold",children:S})," ","filtered comments out of"," ",e.jsx("span",{className:"font-semibold",children:t})," ","total",!L&&S>10&&" (displaying first 10)"]}):e.jsxs("span",{children:["Showing"," ",e.jsx("span",{className:"font-semibold",children:t})," ","comments",!L&&t>10&&" (displaying first 10)"]})}),!L&&T.length>10&&e.jsxs("button",{className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",onClick:()=>J(!0),children:["Show All ",S," Comments"]}),L&&T.length>10&&e.jsx("button",{className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",onClick:()=>J(!1),children:"Show Less"})]})]})})]})})]})]})},St=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),{theme:R,toggleTheme:_}=r.useContext(ke);r.useEffect(()=>{const t=localStorage.getItem("userRole"),l=localStorage.getItem("userName");t&&Q(t),l&&X(l)},[]);const Z=()=>{localStorage.clear(),q("/login")},G=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/adminDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Users",path:"/allUsers"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/allProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/allTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/allComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/allLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/settings"}],[C,w]=r.useState(!1),[M,V]=r.useState([]),[E,D]=r.useState(null),[f,I]=r.useState({}),[N,K]=r.useState(!1),[s,d]=r.useState({taskTitle:"",taskDescription:"",taskStatus:"pending",taskPriority:"medium",projectId:"",assignedUserId:"",createdAt:""}),[x,$]=r.useState([]),[k,P]=r.useState([]),[y,F]=r.useState(""),[A,v]=r.useState(""),[L,J]=r.useState(""),[Y,oe]=r.useState(""),[se,ce]=r.useState(""),[re,de]=r.useState(""),[ae,ie]=r.useState(!1);r.useEffect(()=>{const t=async()=>{const n=localStorage.getItem("token");if(!n){window.location.href="/login";return}try{const p=await H.get("http://localhost:5294/Task/get",{headers:{Authorization:`Bearer ${n}`}});V(p.data),j.info("Tasks loaded successfully")}catch(p){p.response&&p.response.status===401?(localStorage.removeItem("token"),window.location.href="/login"):(console.error("Failed to fetch tasks:",p),j.error("Failed to load tasks"))}},l=async()=>{const n=localStorage.getItem("token");if(!n){window.location.href="/login";return}try{const p=await H.get("http://localhost:5294/AdminUser/all-users",{headers:{Authorization:`Bearer ${n}`}});$(p.data)}catch(p){p.response&&p.response.status===401?(localStorage.removeItem("token"),window.location.href="/login"):(console.error("Failed to fetch users:",p),j.error("Failed to load users"))}},a=async()=>{const n=localStorage.getItem("token");if(!n){window.location.href="/login";return}try{const p=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${n}`}});P(p.data)}catch(p){p.response&&p.response.status===401?(localStorage.removeItem("token"),window.location.href="/login"):(console.error("Failed to fetch projects:",p),j.error("Failed to load projects"))}};t(),l(),a()},[]);const ne=async(t,l)=>{var a;try{const n=localStorage.getItem("token");if(!n){j.error("Authentication required. Please log in again."),window.location.href="/login";return}let p=l.createdAt;if(p){const Se=p.split("-");Se.length===3&&(Se[0].length===4?p=`${Se[2]}-${Se[1]}-${Se[0]}`:Se[2].length)}const te={taskTitle:l.taskTitle,taskDescription:l.taskDescription,taskStatus:l.taskStatus,taskPriority:l.taskPriority,projectId:Number(l.projectId),assignedUserId:Number(l.assignedUserId),createdAt:p};console.log("Attempting to update task with ID:",t),console.log("Payload being sent:",te);const le=await H.put(`http://localhost:5294/Task/update/${t}`,te,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(le.status===200){const Se=await H.get("http://localhost:5294/Task/get",{headers:{Authorization:`Bearer ${n}`}});V(Se.data),D(null),I({}),j.success("Task updated successfully!")}else console.error("Update task received non-200 response:",le),j.error(`Task update failed with status: ${le.status}`)}catch(n){if(console.error("Failed to update task:",n),n.response)switch(console.error("Error response data:",n.response.data),console.error("Error response status:",n.response.status),console.error("Error response headers:",n.response.headers),n.response.status){case 401:j.error("Session expired. Please log in again."),localStorage.removeItem("token"),window.location.href="/login";break;case 403:j.error("You don't have permission to perform this action.");break;case 500:j.error("Internal Server Error. Please check backend logs.");break;default:const p=((a=n.response.data)==null?void 0:a.message)||n.response.data||`An error occurred while updating the task (Status: ${n.response.status})`;j.error(`Update failed: ${p}`)}else n.request?(console.error("Error request:",n.request),j.error("No response received from server. Please check your connection.")):j.error("Failed to update task. Error in request setup.")}},m=async t=>{if(window.confirm("Are you sure you want to delete this task?"))try{const l=localStorage.getItem("token");await H.delete(`http://localhost:5294/Task/delete/${t}`,{headers:{Authorization:`Bearer ${l}`}}),V(a=>a.filter(n=>n.taskItemId!==t)),j.success("Task deleted successfully!")}catch(l){console.error("Failed to delete task:",l),j.error("Failed to delete task. Please try again.")}},B=t=>{D(t.taskItemId),I({taskTitle:t.taskTitle,taskDescription:t.taskDescription,taskStatus:t.taskStatus,taskPriority:t.taskPriority,assignedUserId:t.assignedUserId,projectId:t.projectId,createdAt:t.createdAt}),j.info("Editing task: "+t.taskTitle)},u=()=>{F(""),v(""),J(""),oe(""),ce(""),de("")},g=()=>M.filter(t=>{if(y&&!t.taskTitle.toLowerCase().includes(y.toLowerCase())||A&&t.taskStatus!==A||L&&t.taskPriority!==L||Y&&t.projectId!==Number(Y)||se&&t.assignedUserId!==Number(se))return!1;if(re){const l=new Date(t.createdAt.split("-").reverse().join("-")),a=new Date(re);if(l.setHours(0,0,0,0),a.setHours(0,0,0,0),l.getTime()!==a.getTime())return!1}return!0}),c=async t=>{t.preventDefault();try{const l=localStorage.getItem("token"),a={...s,assignedUserId:Number(s.assignedUserId),projectId:Number(s.projectId)},n=await H.post("http://localhost:5294/Task/create",a,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});V(p=>[...p,n.data]),K(!1),d({taskTitle:"",taskDescription:"",taskStatus:"pending",taskPriority:"medium",projectId:"",assignedUserId:"",createdAt:""}),j.success("Task created successfully!")}catch(l){console.error("Failed to create task:",l),j.error("Failed to create task. Please check your inputs and try again.")}},i=g(),b=C?i:i.slice(0,10),T=i.length,h=M.length,S=t=>t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"";return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx(Te,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:R==="dark"?"dark":"light"}),e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
             ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
             ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),G.map(({icon:t,label:l,path:a},n)=>e.jsxs("li",{onClick:()=>a&&q(a),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                       hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white hover:scale-105
                       dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600
                       ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:t}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:l})]},n))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${R==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:_,"aria-label":"Toggle dark mode",children:R==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{className:`transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:Z,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(ue,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"All Tasks"})]})}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("button",{onClick:()=>ie(!ae),className:"flex items-center gap-2 bg-gradient-to-r from-blue-400 to-purple-400 text-white px-4 py-2 rounded-lg shadow-lg hover:from-blue-500 hover:to-purple-500 transition-all duration-300 font-medium",children:ae?"Hide Filters":"Show Filters"}),e.jsx("button",{onClick:()=>{K(t=>(t||j.info("Create a new task"),!t))},className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:N?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:""}),"Close"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:"+"}),"Create Task"]})})]}),ae&&e.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-center bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent",children:"Filter Tasks"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Task Title"}),e.jsx("input",{type:"text",value:y,onChange:t=>F(t.target.value),placeholder:"Search by title...",className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:A,onChange:t=>v(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),e.jsxs("select",{value:L,onChange:t=>J(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsxs("select",{value:Y,onChange:t=>oe(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Projects"}),k.map(t=>e.jsx("option",{value:t.projectId,children:t.projectTitle},t.projectId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assigned User"}),e.jsxs("select",{value:se,onChange:t=>ce(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Users"}),x.map(t=>e.jsx("option",{value:t.userId,children:t.userFullName||t.userName||t.userEmail},t.userId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created Date"}),e.jsx("input",{type:"date",value:re,onChange:t=>de(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:u,className:"bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded hover:bg-gray-300 dark:hover:bg-gray-500 transition-all w-full",children:"Clear Filters"})})]})]}),N&&e.jsxs("form",{onSubmit:c,className:"space-y-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 text-black dark:text-white p-6 rounded-lg mb-4 shadow-lg",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-center text-2xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-6",children:"Create new Task"}),e.jsx("label",{htmlFor:"taskTitle",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),e.jsx("input",{id:"taskTitle",name:"taskTitle",type:"text",value:s.taskTitle,onChange:t=>d(l=>({...l,taskTitle:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"taskDescription",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{id:"taskDescription",name:"taskDescription",value:s.taskDescription,onChange:t=>d(l=>({...l,taskDescription:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"taskStatus",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{id:"taskStatus",name:"taskStatus",value:s.taskStatus,onChange:t=>d(l=>({...l,taskStatus:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"taskPriority",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),e.jsxs("select",{id:"taskPriority",name:"taskPriority",value:s.taskPriority,onChange:t=>d(l=>({...l,taskPriority:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projectId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsxs("select",{id:"projectId",name:"projectId",value:s.projectId,onChange:t=>d(l=>({...l,projectId:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Select Project"}),k.map(t=>e.jsx("option",{value:t.projectId,children:t.projectTitle},t.projectId))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"assignedUserId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assign To"}),e.jsxs("select",{id:"assignedUserId",name:"assignedUserId",value:s.assignedUserId,onChange:t=>d(l=>({...l,assignedUserId:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Select User"}),x.map(t=>e.jsx("option",{value:t.userId,children:t.userFullName||t.userName||t.userEmail},t.userId))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"createdAt",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created At"}),e.jsx("input",{id:"createdAt",name:"createdAt",type:"date",value:(()=>{if(!s.createdAt)return"";const t=s.createdAt.split("-");return t.length===3?t[0].length===4?s.createdAt:`${t[2]}-${t[1]}-${t[0]}`:s.createdAt})(),onChange:t=>{const[l,a,n]=t.target.value.split("-");d(p=>({...p,createdAt:`${n}-${a}-${l}`}))},className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:"Create"})]}),e.jsx("section",{className:"w-full",children:e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Title"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Description"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Status"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Priority"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Created At"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Project ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Assigned User"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Actions"})]})}),e.jsx("tbody",{className:"font-medium",children:b.map((t,l)=>e.jsxs("tr",{className:`${l%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:t.taskItemId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===t.taskItemId?e.jsx("input",{type:"text",value:f.taskTitle||"",onChange:a=>I(n=>({...n,taskTitle:a.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):t.taskTitle}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===t.taskItemId?e.jsx("input",{type:"text",value:f.taskDescription||"",onChange:a=>I(n=>({...n,taskDescription:a.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):t.taskDescription}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===t.taskItemId?e.jsxs("select",{value:f.taskStatus||"",onChange:a=>I(n=>({...n,taskStatus:a.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}):S(t.taskStatus)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===t.taskItemId?e.jsxs("select",{value:f.taskPriority||"",onChange:a=>I(n=>({...n,taskPriority:a.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Select Priority"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]}):S(t.taskPriority)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===t.taskItemId?e.jsx("input",{type:"date",value:(()=>{if(!f.createdAt)return"";const a=f.createdAt.split("-");return a.length===3?a[0].length===4?f.createdAt:`${a[2]}-${a[1]}-${a[0]}`:f.createdAt})(),onChange:a=>{const[n,p,te]=a.target.value.split("-");I(le=>({...le,createdAt:`${te}-${p}-${n}`}))},className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):t.createdAtFormatted||""}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===t.taskItemId?e.jsx("input",{type:"number",value:f.projectId||"",onChange:a=>I(n=>({...n,projectId:a.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):t.projectId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===t.taskItemId?e.jsx("input",{type:"number",value:f.assignedUserId||"",onChange:a=>I(n=>({...n,assignedUserId:a.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):t.assignedUserId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:e.jsx("div",{className:"flex flex-row gap-x-2",children:E===t.taskItemId?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ne(t.taskItemId,f),className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-3 py-1 rounded hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Save"}),e.jsx("button",{onClick:()=>D(null),className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white px-3 py-1 rounded hover:from-gray-500 hover:to-gray-600 transition-all duration-300",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>B(t),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-1 rounded hover:from-blue-600 hover:to-blue-700 transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>m(t.taskItemId),className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1 rounded hover:from-red-600 hover:to-red-700 transition-all duration-300",children:"Delete"})]})})})]},t.taskItemId))})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-300 mb-2 sm:mb-0",children:y||A||L||Y||se||re?e.jsxs("span",{children:["Showing"," ",e.jsx("span",{className:"font-semibold",children:T})," ","filtered tasks out of"," ",e.jsx("span",{className:"font-semibold",children:h})," ","total",!C&&T>10&&" (displaying first 10)"]}):e.jsxs("span",{children:["Showing"," ",e.jsx("span",{className:"font-semibold",children:h})," ","tasks",!C&&h>10&&" (displaying first 10)"]})}),!C&&i.length>10&&e.jsxs("button",{className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",onClick:()=>w(!0),children:["Show All ",T," Tasks"]}),C&&i.length>10&&e.jsx("button",{className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",onClick:()=>w(!1),children:"Show Less"})]})]})})]})})]})]})},It=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),R=r.useContext(ke),_=(R==null?void 0:R.theme)||"light",Z=(R==null?void 0:R.toggleTheme)||(()=>{});r.useEffect(()=>{const h=localStorage.getItem("userRole"),S=localStorage.getItem("userName");h&&Q(h),S&&X(S)},[]);const G=()=>{localStorage.clear(),q("/login")},C=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/adminDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Users",path:"/allUsers"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/allProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/allTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/allComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/allLogs"},{icon:e.jsx(be,{}),label:"Settings"}],[w,M]=r.useState(!1),[V,E]=r.useState([]),[D,f]=r.useState(null),[I,N]=r.useState({}),[K,s]=r.useState(!1),[d,x]=r.useState({title:"",description:"",status:"",startDate:"",deadline:"",createdByUserId:"",assignedUsers:[]}),[$,k]=r.useState([]),[P,y]=r.useState(""),[F,A]=r.useState(""),[v,L]=r.useState(""),[J,Y]=r.useState(""),[oe,se]=r.useState(""),[ce,re]=r.useState(!1);r.useEffect(()=>{const h=async()=>{try{const t=localStorage.getItem("token"),l=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${t}`}});E(l.data)}catch(t){console.error("Failed to fetch projects:",t)}},S=async()=>{try{const t=localStorage.getItem("token"),l=await H.get("http://localhost:5294/AdminUser/all-users",{headers:{Authorization:`Bearer ${t}`}});k(l.data)}catch(t){console.error("Failed to fetch users:",t)}};h(),S()},[]);function de(h){if(!h)return"";const[S,t,l]=h.split("-");return`${l}-${t}-${S}`}function ae(h){if(!h)return"";const[S,t,l]=h.split("-");return`${l}-${t}-${S}`}const ie=async(h,S)=>{var t;if(!S.title||!S.description||!S.status||!S.startDate||!S.deadline||!S.createdByUserId||!S.assignedUsers||S.assignedUsers.length===0){j.error("All fields are required and at least one user must be assigned.");return}try{const l=localStorage.getItem("token");console.log("Status before payload:",S.status),console.log("Status type:",typeof S.status),console.log("Status length:",S.status.length),console.log("Status char codes:",Array.from(S.status).map(te=>te.charCodeAt(0)));const a={projectTitle:S.title,projectDescription:S.description,projectStatus:S.status,projectStartDate:de(S.startDate),projectDeadLine:de(S.deadline),createdByUserId:Number(S.createdByUserId),assignedUserIds:S.assignedUsers.map(Number)};console.log("Update Project Payload:",a);const n=await H.put(`http://localhost:5294/api/Project/update/${h}`,a,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});console.log("Update response:",n.data);const p=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${l}`}});E(p.data),f(null),N({})}catch(l){console.error("Update project error:",l),l.response?(console.error("Error response:",l.response.data),j.error("Failed to update project: "+(((t=l.response.data)==null?void 0:t.message)||JSON.stringify(l.response.data)))):j.error("Failed to update project: "+l.message)}},ne=async h=>{if(window.confirm("Are you sure you want to delete this project?"))try{const S=localStorage.getItem("token");await H.delete(`http://localhost:5294/api/Project/delete/${h}`,{headers:{Authorization:`Bearer ${S}`}}),E(t=>t.filter(l=>l.projectId!==h))}catch(S){console.error("Failed to delete project:",S)}},m=h=>{console.log("Original project status:",h.projectStatus),f(h.projectId),U(!1);const S={title:h.projectTitle,description:h.projectDescription,status:h.projectStatus,startDate:ae(h.projectStartDate),deadline:ae(h.projectDeadLine),createdByUserId:h.createdByUserId,assignedUsers:h.assignedUserIds?h.assignedUserIds.map(String):[]};console.log("Setting edit data with status:",S.status),N(S)},B=()=>{y(""),A(""),L(""),Y(""),se("")},u=()=>V.filter(h=>{if(P&&h.projectStatus!==P||oe&&!h.projectTitle.toLowerCase().includes(oe.toLowerCase()))return!1;if(F){const S=new Date(ae(h.projectStartDate)),t=new Date(F);if(S<t)return!1}if(v){const S=new Date(ae(h.projectDeadLine)),t=new Date(v);if(S>t)return!1}return!(J&&!h.assignedUserIds.includes(Number(J)))}),g=async h=>{var S;h.preventDefault();try{const t=localStorage.getItem("token");console.log("Status before payload:",d.status),console.log("Status type:",typeof d.status),console.log("Status length:",d.status.length),console.log("Status char codes:",Array.from(d.status).map(p=>p.charCodeAt(0)));const l={projectTitle:d.title,projectDescription:d.description,projectStatus:d.status,projectStartDate:de(d.startDate),projectDeadLine:de(d.deadline),createdByUserId:Number(d.createdByUserId),assignedUserIds:d.assignedUsers.map(Number)};console.log("Create Project Payload:",l);const a=await H.post("http://localhost:5294/api/Project/create",l,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});console.log("Create response:",a.data),j.success("Project created successfully!"),s(!1),x({title:"",description:"",status:"",startDate:"",deadline:"",createdByUserId:"",assignedUsers:[]});const n=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${t}`}});E(n.data)}catch(t){console.error("Create project error:",t);try{const l=localStorage.getItem("token"),a=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${l}`}});if(a.data.some(p=>p.projectTitle===d.title)){console.log("Project appears to have been created despite the error"),j.success("Project created successfully!"),s(!1),x({title:"",description:"",status:"",startDate:"",deadline:"",createdByUserId:"",assignedUsers:[]}),E(a.data);return}}catch(l){console.error("Error checking if project was created:",l)}if(t.response){console.error("Error response:",t.response.data);const l=typeof t.response.data=="string"?t.response.data:JSON.stringify(t.response.data);if(l&&(l.includes("Violation of PRIMARY KEY constraint")||l.includes("duplicate key")))try{const a=localStorage.getItem("token");console.log("Retrying project creation after primary key error...");const n={projectTitle:d.title,projectDescription:d.description,projectStatus:d.status,projectStartDate:de(d.startDate),projectDeadLine:de(d.deadline),createdByUserId:Number(d.createdByUserId),assignedUserIds:d.assignedUsers.map(Number)},p=await H.post("http://localhost:5294/api/Project/create",n,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});console.log("Retry successful:",p.data),j.success("Project created successfully!"),s(!1),x({title:"",description:"",status:"",startDate:"",deadline:"",createdByUserId:"",assignedUsers:[]});const te=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${a}`}});E(te.data);return}catch(a){console.error("Retry also failed:",a),j.error("Failed to create project even after retry. Please try again later.")}else{let a="Failed to create project";if(typeof t.response.data=="string")a+=": "+t.response.data;else if((S=t.response.data)!=null&&S.message)a+=": "+t.response.data.message;else if(t.response.data)try{a+=": "+JSON.stringify(t.response.data)}catch{a+=" (Unable to parse error details)"}j.error(a)}}else j.error("Failed to create project: "+t.message)}},c=u(),i=w?c:c.slice(0,10),b=c.length,T=V.length;return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx(Te,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:_==="dark"?"dark":"light"}),e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
              ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
              ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),C.map(({icon:h,label:S,path:t},l)=>e.jsxs("li",{onClick:()=>t&&q(t),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                        hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white hover:scale-105
                        dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600
                        ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:h}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:S})]},l))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${_==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white p-3 rounded-full transition-all",onClick:Z,"aria-label":"Toggle dark mode",children:_==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{className:`transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:G,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(me,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"All Projects"})]})}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("button",{onClick:()=>re(!ce),className:"flex items-center gap-2 bg-gradient-to-r from-blue-400 to-purple-400 text-white px-4 py-2 rounded-lg shadow-lg hover:from-blue-500 hover:to-purple-500 transition-all duration-300 font-medium",children:ce?"Hide Filters":"Show Filters"}),e.jsx("button",{onClick:()=>s(h=>!h),className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:K?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:""}),"Close"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:"+"}),"Create Project"]})})]}),ce&&e.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-center bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent",children:"Filter Projects"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Title"}),e.jsx("input",{type:"text",value:oe,onChange:h=>se(h.target.value),placeholder:"Search by title...",className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:P,onChange:h=>y(h.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"Not Started",children:"Not Started"}),e.jsx("option",{value:"Upcoming",children:"Upcoming"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"On Hold",children:"On Hold"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date (After)"}),e.jsx("input",{type:"date",value:F,onChange:h=>A(h.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Deadline (Before)"}),e.jsx("input",{type:"date",value:v,onChange:h=>L(h.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assigned User"}),e.jsxs("select",{value:J,onChange:h=>Y(h.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Users"}),$.map(h=>e.jsx("option",{value:h.userId,children:h.userFullName||h.userName||h.userEmail},h.userId))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:B,className:"bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded hover:bg-gray-300 dark:hover:bg-gray-500 transition-all w-full",children:"Clear Filters"})})]})]}),K&&e.jsxs("form",{onSubmit:g,className:"space-y-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 text-black dark:text-white p-6 rounded-lg mb-4 shadow-lg",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-center text-2xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-6",children:"Create new Project"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:d.title,onChange:h=>x(S=>({...S,title:h.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:h=>x(S=>({...S,description:h.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:d.status,onChange:h=>x(S=>({...S,status:h.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"Not Started",children:"Not Started"}),e.jsx("option",{value:"Upcoming",children:"Upcoming"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"On Hold",children:"On Hold"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:d.startDate,onChange:h=>x(S=>({...S,startDate:h.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Deadline"}),e.jsx("input",{type:"date",value:d.deadline,onChange:h=>x(S=>({...S,deadline:h.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created By"}),e.jsxs("select",{value:d.createdByUserId,onChange:h=>x(S=>({...S,createdByUserId:h.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Select User"}),$.map(h=>e.jsx("option",{value:h.userId,children:h.userFullName||h.userName||h.userEmail},h.userId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assigned Users"}),e.jsx("select",{multiple:!0,value:d.assignedUsers,onChange:h=>{const S=Array.from(h.target.selectedOptions,t=>t.value);x(t=>({...t,assignedUsers:S}))},className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:$.map(h=>e.jsx("option",{value:h.userId,children:h.userFullName||h.userName||h.userEmail},h.userId))}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Hold Ctrl (Windows) or Command (Mac) to select multiple developers"})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:"Create"})]}),e.jsx("section",{className:"w-full",children:e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Title"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Description"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Status"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Start Date"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Deadline"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Created By"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Assigned Users"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Actions"})]})}),e.jsx("tbody",{className:"font-medium",children:i.map((h,S)=>e.jsxs("tr",{className:`${S%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:h.projectId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===h.projectId?e.jsx("input",{type:"text",value:I.title||"",onChange:t=>N(l=>({...l,title:t.target.value})),className:"border p-1 rounded w-full text-black"}):h.projectTitle}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===h.projectId?e.jsx("textarea",{value:I.description||"",onChange:t=>N(l=>({...l,description:t.target.value})),className:"border p-1 rounded w-full text-black"}):h.projectDescription}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===h.projectId?e.jsxs("select",{value:I.status||"",onChange:t=>N(l=>({...l,status:t.target.value})),className:"border p-1 rounded w-full text-black",children:[e.jsx("option",{value:"Not Started",children:"Not Started"}),e.jsx("option",{value:"Upcoming",children:"Upcoming"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"On Hold",children:"On Hold"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]}):h.projectStatus}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===h.projectId?e.jsx("input",{type:"date",value:I.startDate||"",onChange:t=>N(l=>({...l,startDate:t.target.value})),className:"border p-1 rounded w-full text-black"}):h.projectStartDate}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===h.projectId?e.jsx("input",{type:"date",value:I.deadline||"",onChange:t=>N(l=>({...l,deadline:t.target.value})),className:"border p-1 rounded w-full text-black"}):h.projectDeadLine}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===h.projectId?e.jsxs("select",{value:I.createdByUserId||"",onChange:t=>N(l=>({...l,createdByUserId:t.target.value})),className:"border p-1 rounded w-full text-black",children:[e.jsx("option",{value:"",children:"Select User"}),$.map(t=>e.jsx("option",{value:t.userId,children:t.userFullName||t.userName||t.userEmail},t.userId))]}):(()=>{const t=$.find(l=>String(l.userId)===String(h.createdByUserId));return t?t.userFullName||t.userName||t.userEmail:h.createdByUserId})()}),e.jsx("td",{className:"border border-black dark:border-white p-2 ",children:D===h.projectId?e.jsx("select",{multiple:!0,value:I.assignedUsers||[],onChange:t=>{const l=Array.from(t.target.selectedOptions,a=>a.value);N(a=>({...a,assignedUsers:l}))},className:"border p-1 rounded w-full text-black",children:$.map(t=>e.jsx("option",{value:t.userId,children:t.userFullName||t.userName||t.userEmail},t.userId))}):(h.assignedUserIds||[]).map(t=>{const l=$.find(a=>String(a.userId)===String(t));return l?l.userFullName||l.userName||l.userEmail:t}).join(", ")}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:e.jsx("div",{className:"flex flex-row gap-x-2",children:D===h.projectId?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ie(h.projectId,I),className:"bg-green-500 text-white p-1 rounded hover:bg-green-600",children:"Save"}),e.jsx("button",{onClick:()=>f(null),className:"bg-gray-400 text-white p-1 rounded hover:bg-gray-500",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(h),className:"bg-blue-500 text-white p-1 rounded hover:bg-blue-600",children:"Edit"}),e.jsx("button",{onClick:()=>ne(h.projectId),className:"bg-red-500 text-white p-1 rounded hover:bg-red-600",children:"Delete"})]})})})]},h.projectId))})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-300 mb-2 sm:mb-0",children:P||F||v||J||oe?e.jsxs("span",{children:["Showing"," ",e.jsx("span",{className:"font-semibold",children:b})," ","filtered projects out of"," ",e.jsx("span",{className:"font-semibold",children:T})," ","total",!w&&b>10&&" (displaying first 10)"]}):e.jsxs("span",{children:["Showing"," ",e.jsx("span",{className:"font-semibold",children:T})," ","projects",!w&&T>10&&" (displaying first 10)"]})}),!w&&c.length>10&&e.jsxs("button",{className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",onClick:()=>M(!0),children:["Show All ",b," Projects"]}),w&&c.length>10&&e.jsx("button",{className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",onClick:()=>M(!1),children:"Show Less"})]})]})})]})})]})]})},Ct=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),[q,R]=r.useState(""),[_,Z]=r.useState(!1),[G,C]=r.useState([]),[w,M]=r.useState(null),[V,E]=r.useState(""),D=fe(),{theme:f,toggleTheme:I}=r.useContext(ke);r.useEffect(()=>{const P=localStorage.getItem("userRole"),y=localStorage.getItem("userName");P&&Q(P),y&&X(y)},[]);const N=()=>{localStorage.clear(),D("/login")},K=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/adminDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Users",path:"/allUsers"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/allProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/allTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/allComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/allLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/settings"}];r.useEffect(()=>{(async()=>{try{const y=localStorage.getItem("token"),A=[...(await H.get("http://localhost:5294/AdminUser/all-users",{headers:{Authorization:`Bearer ${y}`}})).data].sort((v,L)=>v.userId-L.userId);C(A),j.success("Users loaded successfully")}catch(y){console.error("Failed to fetch users:",y),j.error("Failed to load users")}})()},[]);const s=async(P,y)=>{try{const F=localStorage.getItem("token");try{await H.put(`http://localhost:5294/AdminUser/update-role/${P}`,JSON.stringify(y),{headers:{"Content-Type":"application/json",Authorization:`Bearer ${F}`}}),j.success(`User role updated to ${y}`)}catch(A){console.log("API returned error but role was updated:",A),j.success(`User role updated to ${y}`)}C(A=>A.map(L=>L.userId===P?{...L,userRole:y}:L).sort((L,J)=>L.userId-J.userId)),M(null),E("")}catch(F){console.error("Unexpected error in handleUpdateRole:",F),j.error("An unexpected error occurred")}},d=async P=>{if(window.confirm("Are you sure you want to delete this user?"))try{const y=localStorage.getItem("token");await H.delete(`http://localhost:5294/AdminUser/delete-user/${P}`,{headers:{Authorization:`Bearer ${y}`}}),C(F=>F.filter(v=>v.userId!==P).sort((v,L)=>v.userId-L.userId)),j.success("User deleted successfully")}catch(y){console.error("Failed to delete user:",y),j.error("Failed to delete user")}},x=(P,y)=>{M(P),E(y)},$=q?G.filter(P=>P.userRole.toLowerCase()===q.toLowerCase()):G,k=_?$:$.slice(0,10);return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx(Te,{position:"top-right",autoClose:3e3}),e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
            ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
            ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),K.map(({icon:P,label:y,path:F},A)=>e.jsxs("li",{onClick:()=>F&&D(F),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                      hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white
                      dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600 hover:scale-105
                      ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:P}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:y})]},A))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${f==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer ",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:I,"aria-label":"Toggle dark mode",children:f==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:W}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:O})]}),e.jsx(ye,{className:`transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:N,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(Ie,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"All Users"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:q,onChange:P=>R(P.target.value),className:"p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Roles"}),[...new Set(G.map(P=>P.userRole))].map(P=>e.jsx("option",{value:P,children:P},P))]}),e.jsx("button",{onClick:()=>R(""),className:"text-sm bg-gray-200 dark:bg-gray-600 text-black dark:text-white px-3 py-1 rounded hover:bg-gray-300 dark:hover:bg-gray-500 transition",children:"Clear Filter"})]}),e.jsx("section",{className:"w-full",children:e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Name"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Email"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Role"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Actions"})]})}),e.jsx("tbody",{className:"font-medium",children:k.map((P,y)=>e.jsxs("tr",{className:`${y%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:P.userId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:P.userFullName}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:P.userEmail}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:w===P.userId?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"text",value:V,onChange:F=>E(F.target.value),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),e.jsx("button",{onClick:()=>s(P.userId,V),className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-3 py-1 rounded hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Update"}),e.jsx("button",{onClick:()=>M(null),className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white px-3 py-1 rounded hover:from-gray-500 hover:to-gray-600 transition-all duration-300",children:"Cancel"})]}):P.userRole}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:w!==P.userId&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>x(P.userId,P.userRole),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-1 rounded hover:from-blue-600 hover:to-blue-700 transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>d(P.userId),className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1 rounded hover:from-red-600 hover:to-red-700 transition-all duration-300",children:"Delete"})]})})]},P.userId))})]}),!_&&G.length>10&&e.jsx("button",{className:"mt-4 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors duration-300",onClick:()=>Z(!0),children:"Show All Users"})]})})]})})]})]})},$t=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),{theme:R,toggleTheme:_}=r.useContext(ke);r.useEffect(()=>{const m=localStorage.getItem("userRole"),B=localStorage.getItem("userName");m&&Q(m),B&&X(B)},[]);const Z=()=>{localStorage.clear(),q("/login")},G=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/projectManagerDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Developers",path:"/projectManagerTeams"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/projectManagerProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/projectManagerTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/projectManagerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/projectManagerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/projectManagerSettings"}],[C,w]=r.useState(!1),[M,V]=r.useState([]),[E,D]=r.useState(null),[f,I]=r.useState({}),[N,K]=r.useState(!1),[s,d]=r.useState(!1),[x,$]=r.useState({status:"",priority:"",projectId:""}),[k,P]=r.useState({taskTitle:"",taskDescription:"",taskStatus:"pending",taskPriority:"medium",projectId:"",assignedUserId:"",createdAt:""}),[y,F]=r.useState([]),[A,v]=r.useState([]),[L,J]=r.useState([]);r.useEffect(()=>{const m=async()=>{const g=localStorage.getItem("token");if(!g){window.location.href="/login";return}try{const c=await H.get("http://localhost:5294/Task/get",{headers:{Authorization:`Bearer ${g}`}});V(c.data)}catch(c){c.response&&c.response.status===401?(localStorage.removeItem("token"),window.location.href="/login"):console.error("Failed to fetch tasks:",c)}},B=async()=>{const g=localStorage.getItem("token");if(!g){window.location.href="/login";return}try{const c=await H.get("http://localhost:5294/AdminUser/all-users",{headers:{Authorization:`Bearer ${g}`}});F(c.data)}catch(c){c.response&&c.response.status===401?(localStorage.removeItem("token"),window.location.href="/login"):console.error("Failed to fetch users:",c)}},u=async()=>{const g=localStorage.getItem("token");if(!g){window.location.href="/login";return}try{const c=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${g}`}}),i=parseInt(localStorage.getItem("userId")),b=c.data.filter(S=>S.createdByUserId===i),T=c.data.filter(S=>S.assignedUsers&&S.assignedUsers.includes(i)),h=[...b];T.forEach(S=>{h.some(t=>t.projectId===S.projectId)||h.push(S)}),v(c.data),J(h)}catch(c){c.response&&c.response.status===401?(localStorage.removeItem("token"),window.location.href="/login"):console.error("Failed to fetch projects:",c)}};m(),B(),u()},[]);const Y=M.filter(m=>!(!L.some(u=>u.projectId===m.projectId)||x.status&&m.taskStatus!==x.status||x.priority&&m.taskPriority!==x.priority||x.projectId&&m.projectId!==parseInt(x.projectId))),oe=C?Y:Y.slice(0,10),se=m=>{const{name:B,value:u}=m.target;$(g=>({...g,[B]:u}))},ce=()=>{$({status:"",priority:"",projectId:""})},re=async(m,B)=>{try{const u=localStorage.getItem("token");let g=B.createdAt;if(g){const T=g.split("-");T.length===3&&(T[0].length===4?g=`${T[2]}-${T[1]}-${T[0]}`:T[2].length)}const c={taskTitle:B.taskTitle,taskDescription:B.taskDescription,taskStatus:B.taskStatus,taskPriority:B.taskPriority,projectId:Number(B.projectId),assignedUserId:Number(B.assignedUserId),createdAt:g};console.log("Updating task with payload:",c);const i=await H.put(`http://localhost:5294/Task/update/${m}`,c,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`}});console.log("Update response:",i.data);const b=await H.get("http://localhost:5294/Task/get",{headers:{Authorization:`Bearer ${u}`}});V(b.data),D(null),I({})}catch(u){console.error("Failed to update task:",u),u.response?(console.error("Error response data:",u.response.data),console.error("Error response status:",u.response.status),console.error("Error response headers:",u.response.headers),alert(`Failed to update task: ${u.response.data||u.message}`)):u.request?(console.error("Error request:",u.request),alert("No response received from server. Please check your connection.")):(console.error("Error message:",u.message),alert(`Error: ${u.message}`))}},de=async m=>{if(window.confirm("Are you sure you want to delete this task?"))try{const B=localStorage.getItem("token");await H.delete(`http://localhost:5294/Task/delete/${m}`,{headers:{Authorization:`Bearer ${B}`}}),V(u=>u.filter(g=>g.taskItemId!==m))}catch(B){console.error("Failed to delete task:",B)}},ae=m=>{D(m.taskItemId),I({taskTitle:m.taskTitle,taskDescription:m.taskDescription,taskStatus:m.taskStatus,taskPriority:m.taskPriority,assignedUserId:m.assignedUserId,projectId:m.projectId,createdAt:m.createdAt})},ie=async m=>{m.preventDefault();try{const B=localStorage.getItem("token"),u={...k,assignedUserId:Number(k.assignedUserId),projectId:Number(k.projectId)};console.log("Payload:",u);const g=await H.post("http://localhost:5294/Task/create",u,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`}});V(c=>[...c,g.data]),K(!1),P({taskTitle:"",taskDescription:"",taskStatus:"pending",taskPriority:"medium",projectId:"",assignedUserId:"",createdAt:""})}catch{alert("Failed to create task")}},ne=m=>m?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():"";return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
             ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
             ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),G.map(({icon:m,label:B,path:u},g)=>e.jsxs("li",{onClick:()=>u&&q(u),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                       hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white hover:scale-105
                       dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600
                       ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:m}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:B})]},g))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${R==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:_,"aria-label":"Toggle dark mode",children:R==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:Z,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(ue,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"All Tasks"})]})}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("button",{onClick:()=>d(m=>!m),className:"flex items-center gap-2 bg-gradient-to-r from-blue-400 to-purple-400 text-white px-6 py-2 rounded-lg shadow-lg hover:from-blue-500 hover:to-purple-500 transition-all duration-300 font-medium",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:""}),"Hide Filters"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg"}),"Show Filters"]})}),e.jsx("button",{onClick:()=>K(m=>!m),className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:N?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:""}),"Close"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:"+"}),"Create Task"]})})]}),s&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 text-black dark:text-white p-6 rounded-lg mb-4 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent",children:"Filter Tasks"}),e.jsx("button",{onClick:ce,className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Clear All Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:x.status,onChange:se,className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),e.jsxs("select",{name:"priority",value:x.priority,onChange:se,className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsxs("select",{name:"projectId",value:x.projectId,onChange:se,className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"All Projects"}),L.map(m=>e.jsx("option",{value:m.projectId,children:m.projectTitle},m.projectId))]})]})]})]}),N&&e.jsxs("form",{onSubmit:ie,className:"space-y-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 text-black dark:text-white p-6 rounded-lg mb-4 shadow-lg",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-center text-2xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-6",children:"Create new Task"}),e.jsx("label",{htmlFor:"taskTitle",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),e.jsx("input",{id:"taskTitle",name:"taskTitle",type:"text",value:k.taskTitle,onChange:m=>P(B=>({...B,taskTitle:m.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"taskDescription",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{id:"taskDescription",name:"taskDescription",value:k.taskDescription,onChange:m=>P(B=>({...B,taskDescription:m.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"taskStatus",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{id:"taskStatus",name:"taskStatus",value:k.taskStatus,onChange:m=>P(B=>({...B,taskStatus:m.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"taskPriority",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),e.jsxs("select",{id:"taskPriority",name:"taskPriority",value:k.taskPriority,onChange:m=>P(B=>({...B,taskPriority:m.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projectId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsxs("select",{id:"projectId",name:"projectId",value:k.projectId,onChange:m=>P(B=>({...B,projectId:m.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Select Project"}),L.map(m=>e.jsx("option",{value:m.projectId,children:m.projectTitle},m.projectId))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"assignedUserId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assign To"}),e.jsxs("select",{id:"assignedUserId",name:"assignedUserId",value:k.assignedUserId,onChange:m=>P(B=>({...B,assignedUserId:m.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Select User"}),y.map(m=>e.jsx("option",{value:m.userId,children:m.userFullName||m.userName||m.userEmail},m.userId))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"createdAt",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created At"}),e.jsx("input",{id:"createdAt",name:"createdAt",type:"date",value:(()=>{if(!k.createdAt)return"";const m=k.createdAt.split("-");return m.length===3?m[0].length===4?k.createdAt:`${m[2]}-${m[1]}-${m[0]}`:k.createdAt})(),onChange:m=>{const[B,u,g]=m.target.value.split("-");P(c=>({...c,createdAt:`${g}-${u}-${B}`}))},className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:"Create"})]}),e.jsx("section",{className:"w-full",children:e.jsxs("div",{className:"p-4 overflow-x-auto",children:[Y.length===0?e.jsxs("div",{className:"text-center py-8 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-300",children:"No tasks match your current filters."}),(x.status||x.priority||x.projectId)&&e.jsx("button",{onClick:ce,className:"mt-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Clear all filters"})]}):e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Title"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Description"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Status"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Priority"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Created At"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Project"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Assigned User"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Actions"})]})}),e.jsx("tbody",{className:"font-medium",children:oe.map((m,B)=>{var u,g,c,i;return e.jsxs("tr",{className:`${B%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:m.taskItemId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsx("input",{type:"text",value:f.taskTitle||"",onChange:b=>I(T=>({...T,taskTitle:b.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):m.taskTitle}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsx("input",{type:"text",value:f.taskDescription||"",onChange:b=>I(T=>({...T,taskDescription:b.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):m.taskDescription}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsxs("select",{value:f.taskStatus||"",onChange:b=>I(T=>({...T,taskStatus:b.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}):ne(m.taskStatus)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsxs("select",{value:f.taskPriority||"",onChange:b=>I(T=>({...T,taskPriority:b.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Select Priority"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]}):ne(m.taskPriority)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsx("input",{type:"date",value:(()=>{if(!f.createdAt)return"";const b=f.createdAt.split("-");return b.length===3?b[0].length===4?f.createdAt:`${b[2]}-${b[1]}-${b[0]}`:f.createdAt})(),onChange:b=>{const[T,h,S]=b.target.value.split("-");I(t=>({...t,createdAt:`${S}-${h}-${T}`}))},className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):m.createdAtFormatted||""}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsxs("select",{value:f.projectId||"",onChange:b=>I(T=>({...T,projectId:b.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Select Project"}),L.map(b=>e.jsx("option",{value:b.projectId,children:b.projectTitle},b.projectId))]}):((u=A.find(b=>b.projectId===m.projectId))==null?void 0:u.projectTitle)||m.projectId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsxs("select",{value:f.assignedUserId||"",onChange:b=>I(T=>({...T,assignedUserId:b.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Select User"}),y.map(b=>e.jsx("option",{value:b.userId,children:b.userFullName||b.userName||b.userEmail},b.userId))]}):((g=y.find(b=>b.userId===m.assignedUserId))==null?void 0:g.userFullName)||((c=y.find(b=>b.userId===m.assignedUserId))==null?void 0:c.userName)||((i=y.find(b=>b.userId===m.assignedUserId))==null?void 0:i.userEmail)||m.assignedUserId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:e.jsx("div",{className:"flex flex-row gap-x-2",children:E===m.taskItemId?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>re(m.taskItemId,f),className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-3 py-1 rounded hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Save"}),e.jsx("button",{onClick:()=>D(null),className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white px-3 py-1 rounded hover:from-gray-500 hover:to-gray-600 transition-all duration-300",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ae(m),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-1 rounded hover:from-blue-600 hover:to-blue-700 transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>de(m.taskItemId),className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1 rounded hover:from-red-600 hover:to-red-700 transition-all duration-300",children:"Delete"})]})})})]},m.taskItemId)})})]}),!C&&Y.length>10&&e.jsx("button",{className:"mt-4 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors duration-300",onClick:()=>w(!0),children:"Show All Tasks"})]})})]})})]})]})},Tt=()=>{var S;const[o,U]=r.useState(typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),{theme:R,toggleTheme:_}=r.useContext(ke),[Z,G]=r.useState([]),[C,w]=r.useState(null),[M,V]=r.useState({commentContent:"",taskItemId:"",projectId:"",commentedById:""}),[E,D]=r.useState(!1),[f,I]=r.useState({commentContent:"",taskItemId:"",projectId:"",commentedById:"",createdAt:new Date().toISOString()}),[N,K]=r.useState(""),[s,d]=r.useState(""),[x,$]=r.useState(""),[k,P]=r.useState(""),[y,F]=r.useState(""),[A,v]=r.useState(!1),[L,J]=r.useState(!1),[Y,oe]=r.useState([]),[se,ce]=r.useState([]),[re,de]=r.useState([]),[ae,ie]=r.useState("task"),ne=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/projectManagerDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Developers",path:"/projectManagerTeams"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/projectManagerProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/projectManagerTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/projectManagerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/projectManagerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/projectManagerSettings"}];r.useEffect(()=>{const t=localStorage.getItem("userRole"),l=localStorage.getItem("userName"),a=localStorage.getItem("userId");t&&Q(t),l&&X(l),a&&I(n=>({...n,commentedById:a}))},[]),r.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token"),n=(await H.get("http://localhost:5294/AdminUser/all-users",{headers:{Authorization:`Bearer ${l}`}})).data.map(p=>({...p,userFullName:p.userFullName||p.userName||"No name",userEmail:p.userEmail||"No email",userRole:p.userRole||"No role",department:p.department||"No department"}));ce(n)}catch(l){console.error("Failed to fetch users:",l),j.error("Failed to fetch users")}})()},[]),r.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token"),n=(await H.get("http://localhost:5294/Task/get",{headers:{Authorization:`Bearer ${l}`}})).data.map(p=>({...p,taskTitle:p.taskTitle||"Untitled",taskDescription:p.taskDescription||"No description",taskPriority:p.taskPriority||"Not set",taskStatus:p.taskStatus||"Not set"}));oe(n)}catch(l){console.error("Failed to fetch tasks:",l),j.error("Failed to fetch tasks")}})()},[]),r.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token"),a=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${l}`}});de(a.data)}catch(l){console.error("Failed to fetch projects:",l),l.response?(console.error("Error response:",l.response.data),console.error("Status code:",l.response.status),j.error(`Failed to fetch projects: ${l.response.status} - ${l.response.data}`)):l.request?(console.error("No response received:",l.request),j.error("Failed to fetch projects: No response received")):(console.error("Error setting up request:",l.message),j.error(`Failed to fetch projects: ${l.message}`))}})()},[]),r.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token"),a=await H.get("http://localhost:5294/Comment/get-all",{headers:{Authorization:`Bearer ${l}`}});G(a.data)}catch(l){console.error("Failed to fetch comments:",l),j.error("Failed to fetch comments")}})()},[]),r.useEffect(()=>{const t=se.find(l=>l.userName===W);t&&I(l=>({...l,commentedById:String(t.userId)}))},[W,se]);const m=()=>{localStorage.clear(),q("/login")},B=async t=>{t.preventDefault();const l=localStorage.getItem("userId");if(!l){j.error("User information not found. Please log in again.");return}if(!f.commentContent||ae==="task"&&!f.taskItemId||ae==="project"&&!f.projectId){j.warning("Please fill in all fields");return}try{const a=localStorage.getItem("token");let n=null,p=null;if(ae==="task"&&f.taskItemId&&(n=parseInt(f.taskItemId),isNaN(n))){j.error("Invalid task ID");return}if(ae==="project"&&f.projectId&&(p=parseInt(f.projectId),isNaN(p))){j.error("Invalid project ID");return}let te;try{const Ce=f.createdAt?new Date(f.createdAt):new Date,Ue=String(Ce.getDate()).padStart(2,"0"),Le=String(Ce.getMonth()+1).padStart(2,"0"),Fe=Ce.getFullYear();te=`${Ue}-${Le}-${Fe}`}catch(Ce){console.error("Date formatting error:",Ce),j.error("Invalid date format");return}const le={commentContent:f.commentContent.trim(),taskItemId:n,projectId:p,commentedById:parseInt(l),commentedByName:W,createdAt:te};console.log("Sending payload:",le);const Se=await H.post("http://localhost:5294/Comment/create",le,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});D(!1),I({commentContent:"",taskItemId:"",projectId:"",commentedById:l,createdAt:new Date().toISOString()});const $e=await H.get("http://localhost:5294/Comment/get-all",{headers:{Authorization:`Bearer ${a}`}});G($e.data),j.success("Comment created successfully!")}catch(a){console.error("Create comment error:",a),a.response?(console.error("Error response:",a.response.data),j.error("Failed to create comment: "+(a.response.data||a.message))):a.request?(console.error("No response received:",a.request),j.error("No response from server. Please check your connection.")):(console.error("Error setting up request:",a.message),j.error("Failed to create comment: "+a.message))}},u=async()=>{try{const t=localStorage.getItem("token"),l={commentContent:M.commentContent,taskItemId:M.taskItemId?Number(M.taskItemId):null,projectId:M.projectId?Number(M.projectId):null,commentedById:Number(M.commentedById)};await H.put(`http://localhost:5294/Comment/update/${C}`,l,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});const a=await H.get("http://localhost:5294/Comment/get-all",{headers:{Authorization:`Bearer ${t}`}});G(a.data),w(null),V({commentContent:"",taskItemId:"",projectId:"",commentedById:""}),j.success("Comment updated successfully!")}catch(t){console.error("Update comment error:",t),j.error("Failed to update comment: "+t.message)}},g=async t=>{if(window.confirm("Are you sure you want to delete this comment?"))try{const l=localStorage.getItem("token");await H.delete(`http://localhost:5294/Comment/delete/${t}`,{headers:{Authorization:`Bearer ${l}`}}),G(a=>a.filter(n=>n.commentId!==t)),j.success("Comment deleted successfully!")}catch(l){console.error("Failed to delete comment:",l),j.error("Failed to delete comment: "+l.message)}},c=t=>{w(t.commentId),V({commentContent:t.commentContent,taskItemId:t.taskItemId||"",projectId:t.projectId||"",commentedById:t.commentedById})},i=()=>{K(""),d(""),$(""),P(""),F("")},b=()=>Z.filter(t=>{const l=N===""||t.commentContent.toLowerCase().includes(N.toLowerCase()),a=s===""||t.taskItemId===Number(s),n=x===""||t.projectId===Number(x),p=k===""||t.commentedById===Number(k),te=y===""||h(t.createdAt)===h(y);return l&&a&&n&&p&&te}),T=L?b():b().slice(0,10),h=t=>{try{if(!t)return"N/A";if(typeof t=="string"&&t.match(/^\d{2}-\d{2}-\d{4}$/))return t;const l=new Date(t);if(isNaN(l.getTime()))return"N/A";const a=String(l.getDate()).padStart(2,"0"),n=String(l.getMonth()+1).padStart(2,"0"),p=l.getFullYear();return`${a}-${n}-${p}`}catch(l){return console.error("Date formatting error:",l),"N/A"}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx(Te,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:R==="dark"?"dark":"light"}),e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
            ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),ne.map(({icon:t,label:l,path:a},n)=>e.jsxs("li",{onClick:()=>a&&q(a),className:`flex items-center gap-2 p-2 rounded-lg cursor-pointer hover:bg-blue-100 dark:hover:bg-gray-800 transition-all ${!o&&"justify-center"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:t}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:l})]},n))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${R==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer ",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:_,"aria-label":"Toggle dark mode",children:R==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{className:`transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:m,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(me,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"All Comments"})]})}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("button",{onClick:()=>v(!A),className:"flex items-center gap-2 bg-gradient-to-r from-blue-400 to-purple-400 text-white px-4 py-2 rounded-lg shadow-lg hover:from-blue-500 hover:to-purple-500 transition-all duration-300 font-medium",children:A?"Hide Filters":"Show Filters"}),e.jsx("button",{onClick:()=>D(t=>!t),className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:E?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:""})," Close"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:"+"})," Create Comment"]})})]}),A&&e.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-center bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent",children:"Filter Comments"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment Content"}),e.jsx("input",{type:"text",value:N,onChange:t=>K(t.target.value),placeholder:"Search in content...",className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Task"}),e.jsxs("select",{value:s,onChange:t=>d(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Tasks"},"all-tasks"),Y.map(t=>e.jsx("option",{value:t.taskItemId,children:t.taskTitle},t.taskItemId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsxs("select",{value:x,onChange:t=>$(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Projects"},"all-projects"),re.length>0?re.map(t=>e.jsxs("option",{value:t.projectId,children:[t.projectTitle," ",t.projectStatus&&`(${t.projectStatus})`]},t.projectId)):e.jsx("option",{value:"",disabled:!0,children:"Loading projects..."},"loading-projects-filter")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Commented By"}),e.jsxs("select",{value:k,onChange:t=>P(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Users"},"all-users"),se.map(t=>e.jsx("option",{value:t.userId,children:t.userFullName||t.userName||t.userEmail},t.userId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment Date"}),e.jsx("input",{type:"date",value:y,onChange:t=>F(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:i,className:"bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded hover:bg-gray-300 dark:hover:bg-gray-500 transition-all w-full",children:"Clear Filters"})})]})]}),E&&e.jsxs("form",{onSubmit:B,className:"space-y-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 text-black dark:text-white p-6 rounded-lg mb-4 shadow-lg",children:[e.jsx("h2",{className:"text-center text-2xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-6",children:"Create Project Manager Comment"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment Type"}),e.jsxs("select",{value:ae,onChange:t=>ie(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"task",children:"Task Comment"},"task-comment"),e.jsx("option",{value:"project",children:"Project Comment"},"project-comment")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment"}),e.jsx("textarea",{value:f.commentContent,onChange:t=>I(l=>({...l,commentContent:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",required:!0})]}),ae==="task"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Related Task"}),e.jsxs("select",{value:f.taskItemId,onChange:t=>I(l=>({...l,taskItemId:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",required:!0,children:[e.jsx("option",{value:"",children:"Select Task"},"select-task"),Y.map(t=>e.jsx("option",{value:t.taskItemId,children:t.taskTitle},t.taskItemId))]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Related Project"}),e.jsxs("select",{value:f.projectId,onChange:t=>I(l=>({...l,projectId:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",required:!0,children:[e.jsx("option",{value:"",children:"Select Project"},"select-project"),re.length>0?re.map(t=>e.jsxs("option",{value:t.projectId,children:[t.projectTitle," ",t.projectStatus&&`(${t.projectStatus})`]},t.projectId)):e.jsx("option",{value:"",disabled:!0,children:"Loading projects..."},"loading-projects-create")]}),re.length===0&&e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"No projects available. Please wait or contact your administrator."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Commented By"}),e.jsx("input",{type:"text",value:W,readOnly:!0,className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-gray-100 dark:bg-gray-700 cursor-not-allowed"}),e.jsx("input",{type:"hidden",name:"commentedById",value:((S=se.find(t=>t.userName===W))==null?void 0:S.userId)||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created At"}),e.jsx("input",{type:"date",value:f.createdAt?new Date(f.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],onChange:t=>I(l=>({...l,createdAt:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select the date for this comment."})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:"Submit Comment"})]}),e.jsx("section",{className:"w-full",children:e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Content"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Type"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Related To"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Author"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Created At"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Actions"})]})}),e.jsx("tbody",{className:"font-medium",children:T.map((t,l)=>{var a,n;return e.jsxs("tr",{className:`${l%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:t.commentId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:C===t.commentId?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("textarea",{value:M.commentContent,onChange:p=>V(te=>({...te,commentContent:p.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all min-h-[100px]"}),e.jsx("button",{onClick:u,className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-3 py-1 rounded hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Update"}),e.jsx("button",{onClick:()=>w(null),className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white px-3 py-1 rounded hover:from-gray-500 hover:to-gray-600 transition-all duration-300",children:"Cancel"})]}):t.commentContent}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:t.taskItemId?"Task":"Project"}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:t.taskItemId?((a=Y.find(p=>p.taskItemId===t.taskItemId))==null?void 0:a.taskTitle)||"Unknown Task":((n=re.find(p=>p.projectId===t.projectId))==null?void 0:n.projectTitle)||"Unknown Project"}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:t.commentedByName}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:h(t.createdAt)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:C!==t.commentId&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(t),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-1 rounded hover:from-blue-600 hover:to-blue-700 transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>g(t.commentId),className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1 rounded hover:from-red-600 hover:to-red-700 transition-all duration-300",children:"Delete"})]})})]},t.commentId)})})]}),!L&&b().length>10&&e.jsxs("button",{className:"mt-4 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg shadow-md hover:from-blue-600 hover:to-purple-600 transition-all duration-300",onClick:()=>J(!0),children:["Show All ",b().length," ",N||x||s||k?"Filtered":""," ","Comments"]})]})})]})})]})]})},Pt=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),[q,R]=r.useState([]),[_,Z]=r.useState(!0),[G,C]=r.useState(null),w=fe(),{theme:M,toggleTheme:V}=r.useContext(ke);r.useEffect(()=>{const s=localStorage.getItem("userRole"),d=localStorage.getItem("userName");s&&Q(s),d&&X(d),E()},[]);const E=async()=>{try{Z(!0);const s=localStorage.getItem("token");if(!s){C("Authentication token not found. Please log in again."),Z(!1);return}const d=await H.get("http://localhost:5294/ActivityLog/get",{headers:{Authorization:`Bearer ${s}`}});R(d.data),C(null)}catch(s){C("Failed to fetch activity logs"),console.error(s)}finally{Z(!1)}},D=()=>{localStorage.clear(),w("/login")},f=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/projectManagerDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Developers",path:"/projectManagerTeams"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/projectManagerProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/projectManagerTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/projectManagerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/projectManagerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/projectManagerSettings"}],I=s=>{const d=s.activityAction||"";let x="";if(d.includes("Project")){const $=s.projectTitle||"Untitled Project";if(d.includes("Created"))x=`Created new project "${$}"`;else if(d.includes("Updated"))x=`Updated project "${$}"`;else if(d.includes("Deleted"))x=`Deleted project "${$}"`;else if(d.includes("Status Updated")){const k=d.split(" - ")[1],[P,y]=k.split(" to ");x=`Changed project "${$}" status from ${P} to ${y}`}else d.includes("Modified")?x=`Modified project "${$}"`:x=`Performed an action on project "${$}"`}else if(d.includes("Task")){const $=s.taskTitle||"Untitled Task",k=s.projectTitle||"Untitled Project";if(d.includes("Created"))x=`Created new task "${$}" in project "${k}"`;else if(d.includes("Updated"))x=`Updated task "${$}" in project "${k}"`;else if(d.includes("Deleted"))x=`Deleted task "${$}" from project "${k}"`;else if(d.includes("Status Updated")){const P=d.split(" - ")[1],[y,F]=P.split(" to ");x=`Changed task "${$}" status from ${y} to ${F} in project "${k}"`}else d.includes("Modified")?x=`Modified task "${$}" in project "${k}"`:x=`Performed an action on task "${$}" in project "${k}"`}else if(d.includes("Comment")){const $=s.taskTitle?`on task "${s.taskTitle}" in project "${s.projectTitle}"`:s.projectTitle?`on project "${s.projectTitle}"`:"";let k="Performed an action";d.includes("Added")?k="Added":d.includes("Updated")?k="Updated":d.includes("Deleted")?k="Deleted":d.includes("Modified")?k="Modified":d.includes("reacted to comment")?k="Reacted to":d.includes("resolved comment")?k="Resolved":d.includes("unresolved comment")&&(k="Unresolved"),x=`${k} a comment ${$}`}else x=d;return x||"Unknown Action"},N=s=>{if(!s)return"bg-gray-100 text-gray-800";if(s.includes("Project")){if(s.includes("Created"))return"bg-green-100 text-green-800";if(s.includes("Updated"))return"bg-blue-100 text-blue-800";if(s.includes("Deleted"))return"bg-red-100 text-red-800";if(s.includes("Status"))return"bg-purple-100 text-purple-800"}if(s.includes("Task")){if(s.includes("Created"))return"bg-emerald-100 text-emerald-800";if(s.includes("Updated"))return"bg-sky-100 text-sky-800";if(s.includes("Deleted"))return"bg-rose-100 text-rose-800";if(s.includes("Status"))return"bg-violet-100 text-violet-800"}if(s.includes("Comment")){if(s.includes("Added")||s.includes("Created"))return"bg-yellow-100 text-yellow-800";if(s.includes("Updated"))return"bg-amber-100 text-amber-800";if(s.includes("Deleted"))return"bg-orange-100 text-orange-800"}return"bg-gray-100 text-gray-800"},K=s=>{if(!s)return"";try{if(typeof s=="string"&&/^\d{2}-\d{2}-\d{4}$/.test(s)||typeof s=="string"&&s.includes("-"))return s;const d=new Date(s);if(isNaN(d.getTime()))return s.toString();const x=String(d.getDate()).padStart(2,"0"),$=String(d.getMonth()+1).padStart(2,"0"),k=d.getFullYear();return`${x}-${$}-${k}`}catch{return s.toString()}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
                        ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
                        ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),f.map(({icon:s,label:d,path:x},$)=>e.jsxs("li",{onClick:()=>x&&w(x),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                                        hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white
                                        dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600 hover:scale-105
                                        ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:s}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:d})]},$))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${M==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer ",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:V,"aria-label":"Toggle dark mode",children:M==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:D,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(he,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Activity Logs"})]})}),e.jsx("section",{className:"w-full",children:e.jsx("div",{className:"p-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Time"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Action"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"User"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Project"})]})}),e.jsx("tbody",{className:"font-medium",children:_?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"border border-black dark:border-white p-2 text-center",children:"Loading activity logs..."})}):G?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"border border-black dark:border-white p-2 text-center text-red-500",children:G})}):q.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"border border-black dark:border-white p-2 text-center",children:"No activity logs found."})}):q.map((s,d)=>e.jsxs("tr",{className:`${d%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:K(s.activityTime)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(s.activityAction)}`,children:I(s)})}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:s.userName}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:s.projectTitle})]},s.activityLogId))})]})})})]})})]})]})},At=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),[q,R]=r.useState([]),[_,Z]=r.useState(!0),[G,C]=r.useState(null),w=fe(),{theme:M,toggleTheme:V}=r.useContext(ke);r.useEffect(()=>{const s=localStorage.getItem("userRole"),d=localStorage.getItem("userName");s&&Q(s),d&&X(d),E()},[]);const E=async()=>{try{Z(!0);const s=localStorage.getItem("token");if(!s){C("Authentication token not found. Please log in again."),Z(!1);return}const d=await H.get("http://localhost:5294/ActivityLog/get",{headers:{Authorization:`Bearer ${s}`}});R(d.data),C(null)}catch(s){C("Failed to fetch activity logs"),console.error(s)}finally{Z(!1)}},D=()=>{localStorage.clear(),w("/login")},f=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/developerDashboard"},{icon:e.jsx(me,{}),label:"View Projects",path:"/developerProjects"},{icon:e.jsx(ue,{}),label:"View Tasks",path:"/developerTasks"},{icon:e.jsx(ve,{}),label:"View Comments",path:"/developerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/developerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/developerSettings"}],I=s=>{const d=s.activityAction||"";let x="";if(d.includes("Project")){const $=s.projectTitle||"Untitled Project";if(d.includes("Created"))x=`Created new project "${$}"`;else if(d.includes("Updated"))x=`Updated project "${$}"`;else if(d.includes("Deleted"))x=`Deleted project "${$}"`;else if(d.includes("Status Updated")){const k=d.split(" - ")[1],[P,y]=k.split(" to ");x=`Changed project "${$}" status from ${P} to ${y}`}else d.includes("Modified")?x=`Modified project "${$}"`:x=`Performed an action on project "${$}"`}else if(d.includes("Task")){const $=s.taskTitle||"Untitled Task",k=s.projectTitle||"Untitled Project";if(d.includes("Created"))x=`Created new task "${$}" in project "${k}"`;else if(d.includes("Updated"))x=`Updated task "${$}" in project "${k}"`;else if(d.includes("Deleted"))x=`Deleted task "${$}" from project "${k}"`;else if(d.includes("Status Updated")){const P=d.split(" - ")[1],[y,F]=P.split(" to ");x=`Changed task "${$}" status from ${y} to ${F} in project "${k}"`}else d.includes("Modified")?x=`Modified task "${$}" in project "${k}"`:x=`Performed an action on task "${$}" in project "${k}"`}else if(d.includes("Comment")){const $=s.taskTitle?`on task "${s.taskTitle}" in project "${s.projectTitle}"`:s.projectTitle?`on project "${s.projectTitle}"`:"";let k="Performed an action";d.includes("Added")?k="Added":d.includes("Updated")?k="Updated":d.includes("Deleted")?k="Deleted":d.includes("Modified")?k="Modified":d.includes("reacted to comment")?k="Reacted to":d.includes("resolved comment")?k="Resolved":d.includes("unresolved comment")&&(k="Unresolved"),x=`${k} a comment ${$}`}else x=d;return x||"Unknown Action"},N=s=>{if(!s)return"bg-gray-100 text-gray-800";if(s.includes("Project")){if(s.includes("Created"))return"bg-green-100 text-green-800";if(s.includes("Updated"))return"bg-blue-100 text-blue-800";if(s.includes("Deleted"))return"bg-red-100 text-red-800";if(s.includes("Status"))return"bg-purple-100 text-purple-800"}if(s.includes("Task")){if(s.includes("Created"))return"bg-emerald-100 text-emerald-800";if(s.includes("Updated"))return"bg-sky-100 text-sky-800";if(s.includes("Deleted"))return"bg-rose-100 text-rose-800";if(s.includes("Status"))return"bg-violet-100 text-violet-800"}if(s.includes("Comment")){if(s.includes("Added")||s.includes("Created"))return"bg-yellow-100 text-yellow-800";if(s.includes("Updated"))return"bg-amber-100 text-amber-800";if(s.includes("Deleted"))return"bg-orange-100 text-orange-800"}return"bg-gray-100 text-gray-800"},K=s=>{if(!s)return"";try{if(typeof s=="string"&&/^\d{2}-\d{2}-\d{4}$/.test(s)||typeof s=="string"&&s.includes("-"))return s;const d=new Date(s);if(isNaN(d.getTime()))return s.toString();const x=String(d.getDate()).padStart(2,"0"),$=String(d.getMonth()+1).padStart(2,"0"),k=d.getFullYear();return`${x}-${$}-${k}`}catch{return s.toString()}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
                        ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
                        ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),f.map(({icon:s,label:d,path:x},$)=>e.jsxs("li",{onClick:()=>x&&w(x),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                                        hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white
                                        dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600 hover:scale-105
                                        ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:s}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:d})]},$))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${M==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer ",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:V,"aria-label":"Toggle dark mode",children:M==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:D,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(he,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Activity Logs"})]})}),e.jsx("section",{className:"w-full",children:e.jsx("div",{className:"p-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Time"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Action"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"User"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Project"})]})}),e.jsx("tbody",{className:"font-medium",children:_?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"border border-black dark:border-white p-2 text-center",children:"Loading activity logs..."})}):G?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"border border-black dark:border-white p-2 text-center text-red-500",children:G})}):q.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"border border-black dark:border-white p-2 text-center",children:"No activity logs found."})}):q.map((s,d)=>e.jsxs("tr",{className:`${d%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:K(s.activityTime)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(s.activityAction)}`,children:I(s)})}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:s.userName}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:s.projectTitle})]},s.activityLogId))})]})})})]})})]})]})},Dt=()=>{var S;const[o,U]=r.useState(typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),{theme:R,toggleTheme:_}=r.useContext(ke),[Z,G]=r.useState([]),[C,w]=r.useState(null),[M,V]=r.useState({commentContent:"",taskItemId:"",projectId:"",commentedById:""}),[E,D]=r.useState(!1),[f,I]=r.useState({commentContent:"",taskItemId:"",projectId:"",commentedById:"",createdAt:new Date().toISOString()}),[N,K]=r.useState(""),[s,d]=r.useState(""),[x,$]=r.useState(""),[k,P]=r.useState(""),[y,F]=r.useState(""),[A,v]=r.useState(!1),[L,J]=r.useState(!1),[Y,oe]=r.useState([]),[se,ce]=r.useState([]),[re,de]=r.useState([]),[ae,ie]=r.useState("task"),ne=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/developerDashboard"},{icon:e.jsx(me,{}),label:"View Projects",path:"/developerProjects"},{icon:e.jsx(ue,{}),label:"View Tasks",path:"/developerTasks"},{icon:e.jsx(ve,{}),label:"View Comments",path:"/developerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/developerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/developerSettings"}];r.useEffect(()=>{const t=localStorage.getItem("userRole"),l=localStorage.getItem("userName"),a=localStorage.getItem("userId");t&&Q(t),l&&X(l),a&&I(n=>({...n,commentedById:a}))},[]),r.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token"),n=(await H.get("http://localhost:5294/AdminUser/all-users",{headers:{Authorization:`Bearer ${l}`}})).data.map(p=>({...p,userFullName:p.userFullName||p.userName||"No name",userEmail:p.userEmail||"No email",userRole:p.userRole||"No role",department:p.department||"No department"}));ce(n)}catch(l){console.error("Failed to fetch users:",l),j.error("Failed to fetch users")}})()},[]),r.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token"),n=(await H.get("http://localhost:5294/Task/get",{headers:{Authorization:`Bearer ${l}`}})).data.map(p=>({...p,taskTitle:p.taskTitle||"Untitled",taskDescription:p.taskDescription||"No description",taskPriority:p.taskPriority||"Not set",taskStatus:p.taskStatus||"Not set"}));oe(n)}catch(l){console.error("Failed to fetch tasks:",l),j.error("Failed to fetch tasks")}})()},[]),r.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token"),a=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${l}`}});de(a.data)}catch(l){console.error("Failed to fetch projects:",l),l.response?(console.error("Error response:",l.response.data),console.error("Status code:",l.response.status),j.error(`Failed to fetch projects: ${l.response.status} - ${l.response.data}`)):l.request?(console.error("No response received:",l.request),j.error("Failed to fetch projects: No response received")):(console.error("Error setting up request:",l.message),j.error(`Failed to fetch projects: ${l.message}`))}})()},[]),r.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token"),a=await H.get("http://localhost:5294/Comment/get-all",{headers:{Authorization:`Bearer ${l}`}});G(a.data)}catch(l){console.error("Failed to fetch comments:",l),j.error("Failed to fetch comments")}})()},[]),r.useEffect(()=>{const t=se.find(l=>l.userName===W);t&&I(l=>({...l,commentedById:String(t.userId)}))},[W,se]);const m=()=>{localStorage.clear(),q("/login")},B=async t=>{t.preventDefault();const l=localStorage.getItem("userId");if(!l){j.error("User information not found. Please log in again.");return}if(!f.commentContent||ae==="task"&&!f.taskItemId||ae==="project"&&!f.projectId){j.warning("Please fill in all fields");return}try{const a=localStorage.getItem("token");let n=null,p=null;if(ae==="task"&&f.taskItemId&&(n=parseInt(f.taskItemId),isNaN(n))){j.error("Invalid task ID");return}if(ae==="project"&&f.projectId&&(p=parseInt(f.projectId),isNaN(p))){j.error("Invalid project ID");return}let te;try{const Ce=f.createdAt?new Date(f.createdAt):new Date,Ue=String(Ce.getDate()).padStart(2,"0"),Le=String(Ce.getMonth()+1).padStart(2,"0"),Fe=Ce.getFullYear();te=`${Ue}-${Le}-${Fe}`}catch(Ce){console.error("Date formatting error:",Ce),j.error("Invalid date format");return}const le={commentContent:f.commentContent.trim(),taskItemId:n,projectId:p,commentedById:parseInt(l),commentedByName:W,createdAt:te};console.log("Sending payload:",le);const Se=await H.post("http://localhost:5294/Comment/create",le,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});D(!1),I({commentContent:"",taskItemId:"",projectId:"",commentedById:l,createdAt:new Date().toISOString()});const $e=await H.get("http://localhost:5294/Comment/get-all",{headers:{Authorization:`Bearer ${a}`}});G($e.data),j.success("Comment created successfully!")}catch(a){console.error("Create comment error:",a),a.response?(console.error("Error response:",a.response.data),j.error("Failed to create comment: "+(a.response.data||a.message))):a.request?(console.error("No response received:",a.request),j.error("No response from server. Please check your connection.")):(console.error("Error setting up request:",a.message),j.error("Failed to create comment: "+a.message))}},u=async()=>{try{const t=localStorage.getItem("token"),l={commentContent:M.commentContent,taskItemId:M.taskItemId?Number(M.taskItemId):null,projectId:M.projectId?Number(M.projectId):null,commentedById:Number(M.commentedById)};await H.put(`http://localhost:5294/Comment/update/${C}`,l,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});const a=await H.get("http://localhost:5294/Comment/get-all",{headers:{Authorization:`Bearer ${t}`}});G(a.data),w(null),V({commentContent:"",taskItemId:"",projectId:"",commentedById:""}),j.success("Comment updated successfully!")}catch(t){console.error("Update comment error:",t),j.error("Failed to update comment: "+t.message)}},g=async t=>{if(window.confirm("Are you sure you want to delete this comment?"))try{const l=localStorage.getItem("token");await H.delete(`http://localhost:5294/Comment/delete/${t}`,{headers:{Authorization:`Bearer ${l}`}}),G(a=>a.filter(n=>n.commentId!==t)),j.success("Comment deleted successfully!")}catch(l){console.error("Failed to delete comment:",l),j.error("Failed to delete comment: "+l.message)}},c=t=>{w(t.commentId),V({commentContent:t.commentContent,taskItemId:t.taskItemId||"",projectId:t.projectId||"",commentedById:t.commentedById})},i=()=>{K(""),d(""),$(""),P(""),F("")},b=()=>Z.filter(t=>{const l=N===""||t.commentContent.toLowerCase().includes(N.toLowerCase()),a=s===""||t.taskItemId===Number(s),n=x===""||t.projectId===Number(x),p=k===""||t.commentedById===Number(k),te=y===""||h(t.createdAt)===h(y);return l&&a&&n&&p&&te}),T=L?b():b().slice(0,10),h=t=>{try{if(!t)return"N/A";if(typeof t=="string"&&t.match(/^\d{2}-\d{2}-\d{4}$/))return t;const l=new Date(t);if(isNaN(l.getTime()))return"N/A";const a=String(l.getDate()).padStart(2,"0"),n=String(l.getMonth()+1).padStart(2,"0"),p=l.getFullYear();return`${a}-${n}-${p}`}catch(l){return console.error("Date formatting error:",l),"N/A"}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx(Te,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:R==="dark"?"dark":"light"}),e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
            ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),ne.map(({icon:t,label:l,path:a},n)=>e.jsxs("li",{onClick:()=>a&&q(a),className:`flex items-center gap-2 p-2 rounded-lg cursor-pointer hover:bg-blue-100 dark:hover:bg-gray-800 transition-all ${!o&&"justify-center"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:t}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:l})]},n))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${R==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer ",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:_,"aria-label":"Toggle dark mode",children:R==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{className:`transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:m,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(me,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"All Comments"})]})}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("button",{onClick:()=>v(!A),className:"flex items-center gap-2 bg-gradient-to-r from-blue-400 to-purple-400 text-white px-4 py-2 rounded-lg shadow-lg hover:from-blue-500 hover:to-purple-500 transition-all duration-300 font-medium",children:A?"Hide Filters":"Show Filters"}),e.jsx("button",{onClick:()=>D(t=>!t),className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:E?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:""})," Close"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg",children:"+"})," Create Comment"]})})]}),A&&e.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-center bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent",children:"Filter Comments"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment Content"}),e.jsx("input",{type:"text",value:N,onChange:t=>K(t.target.value),placeholder:"Search in content...",className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Task"}),e.jsxs("select",{value:s,onChange:t=>d(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Tasks"},"all-tasks"),Y.map(t=>e.jsx("option",{value:t.taskItemId,children:t.taskTitle},t.taskItemId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsxs("select",{value:x,onChange:t=>$(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Projects"},"all-projects"),re.length>0?re.map(t=>e.jsxs("option",{value:t.projectId,children:[t.projectTitle," ",t.projectStatus&&`(${t.projectStatus})`]},t.projectId)):e.jsx("option",{value:"",disabled:!0,children:"Loading projects..."},"loading-projects-filter")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Commented By"}),e.jsxs("select",{value:k,onChange:t=>P(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Users"},"all-users"),se.map(t=>e.jsx("option",{value:t.userId,children:t.userFullName||t.userName||t.userEmail},t.userId))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment Date"}),e.jsx("input",{type:"date",value:y,onChange:t=>F(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:i,className:"bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded hover:bg-gray-300 dark:hover:bg-gray-500 transition-all w-full",children:"Clear Filters"})})]})]}),E&&e.jsxs("form",{onSubmit:B,className:"space-y-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 text-black dark:text-white p-6 rounded-lg mb-4 shadow-lg",children:[e.jsx("h2",{className:"text-center text-2xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-6",children:"Create Developer Comment"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment Type"}),e.jsxs("select",{value:ae,onChange:t=>ie(t.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"task",children:"Task Comment"},"task-comment"),e.jsx("option",{value:"project",children:"Project Comment"},"project-comment")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Comment"}),e.jsx("textarea",{value:f.commentContent,onChange:t=>I(l=>({...l,commentContent:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",required:!0})]}),ae==="task"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Related Task"}),e.jsxs("select",{value:f.taskItemId,onChange:t=>I(l=>({...l,taskItemId:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",required:!0,children:[e.jsx("option",{value:"",children:"Select Task"},"select-task"),Y.map(t=>e.jsx("option",{value:t.taskItemId,children:t.taskTitle},t.taskItemId))]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Related Project"}),e.jsxs("select",{value:f.projectId,onChange:t=>I(l=>({...l,projectId:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",required:!0,children:[e.jsx("option",{value:"",children:"Select Project"},"select-project"),re.length>0?re.map(t=>e.jsxs("option",{value:t.projectId,children:[t.projectTitle," ",t.projectStatus&&`(${t.projectStatus})`]},t.projectId)):e.jsx("option",{value:"",disabled:!0,children:"Loading projects..."},"loading-projects-create")]}),re.length===0&&e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"No projects available. Please wait or contact your administrator."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Commented By"}),e.jsx("input",{type:"text",value:W,readOnly:!0,className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-gray-100 dark:bg-gray-700 cursor-not-allowed"}),e.jsx("input",{type:"hidden",name:"commentedById",value:((S=se.find(t=>t.userName===W))==null?void 0:S.userId)||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created At"}),e.jsx("input",{type:"date",value:f.createdAt?new Date(f.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],onChange:t=>I(l=>({...l,createdAt:t.target.value})),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Select the date for this comment."})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-2 rounded hover:from-blue-600 hover:to-purple-600 transition-all duration-300 font-medium",children:"Submit Comment"})]}),e.jsx("section",{className:"w-full",children:e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Content"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Type"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Related To"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Author"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Created At"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Actions"})]})}),e.jsx("tbody",{className:"font-medium",children:T.map((t,l)=>{var a,n;return e.jsxs("tr",{className:`${l%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:t.commentId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:C===t.commentId?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("textarea",{value:M.commentContent,onChange:p=>V(te=>({...te,commentContent:p.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all min-h-[100px]"}),e.jsx("button",{onClick:u,className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-3 py-1 rounded hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Update"}),e.jsx("button",{onClick:()=>w(null),className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white px-3 py-1 rounded hover:from-gray-500 hover:to-gray-600 transition-all duration-300",children:"Cancel"})]}):t.commentContent}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:t.taskItemId?"Task":"Project"}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:t.taskItemId?((a=Y.find(p=>p.taskItemId===t.taskItemId))==null?void 0:a.taskTitle)||"Unknown Task":((n=re.find(p=>p.projectId===t.projectId))==null?void 0:n.projectTitle)||"Unknown Project"}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:t.commentedByName}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:h(t.createdAt)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:C!==t.commentId&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(t),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-1 rounded hover:from-blue-600 hover:to-blue-700 transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>g(t.commentId),className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1 rounded hover:from-red-600 hover:to-red-700 transition-all duration-300",children:"Delete"})]})})]},t.commentId)})})]}),!L&&b().length>10&&e.jsxs("button",{className:"mt-4 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg shadow-md hover:from-blue-600 hover:to-purple-600 transition-all duration-300",onClick:()=>J(!0),children:["Show All ",b().length," ",N||x||s||k?"Filtered":""," ","Comments"]})]})})]})})]})]})},Ut=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),R=r.useContext(ke),_=(R==null?void 0:R.theme)||"light",Z=(R==null?void 0:R.toggleTheme)||(()=>{});r.useEffect(()=>{const u=localStorage.getItem("userRole"),g=localStorage.getItem("userName");u&&Q(u),g&&X(g)},[]);const G=()=>{localStorage.clear(),q("/login")},C=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/developerDashboard"},{icon:e.jsx(me,{}),label:"View Projects",path:"/developerProjects"},{icon:e.jsx(ue,{}),label:"View Tasks",path:"/developerTasks"},{icon:e.jsx(ve,{}),label:"View Comments",path:"/developerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/developerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/developerSettings"}],[w,M]=r.useState(!1),[V,E]=r.useState([]),[D,f]=r.useState(null),[I,N]=r.useState({}),[K,s]=r.useState([]),[d,x]=r.useState(!0),[$,k]=r.useState("All"),[P,y]=r.useState(""),[F,A]=r.useState(!1),[v,L]=r.useState(""),[J,Y]=r.useState(""),[oe,se]=r.useState("");r.useEffect(()=>{const u=async()=>{try{x(!0);const c=localStorage.getItem("token"),i=localStorage.getItem("userId");if(!i){console.error("User ID not found in localStorage"),j.error("User information not found. Please log in again.");return}const b=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${c}`}}),T=b.data.filter(h=>h.assignedUserIds&&h.assignedUserIds.includes(Number(i)));E(T),console.log(`Filtered ${b.data.length} projects to ${T.length} assigned to user ID ${i}`)}catch(c){console.error("Failed to fetch projects:",c),j.error("Failed to load projects. Please try again.")}finally{x(!1)}},g=async()=>{try{const c=localStorage.getItem("token"),i=await H.get("http://localhost:5294/AdminUser/all-users",{headers:{Authorization:`Bearer ${c}`}});s(i.data)}catch(c){console.error("Failed to fetch users:",c)}};u(),g()},[]);function ce(u){if(!u)return"";const[g,c,i]=u.split("-");return`${i}-${c}-${g}`}function re(u){if(!u)return"";const[g,c,i]=u.split("-");return`${i}-${c}-${g}`}const de=async(u,g)=>{var c;if(!g.title||!g.description||!g.status||!g.startDate||!g.deadline||!g.createdByUserId||!g.assignedUsers||g.assignedUsers.length===0){j.error("All fields are required and at least one user must be assigned.");return}try{const i=localStorage.getItem("token");console.log("Status before payload:",g.status),console.log("Status type:",typeof g.status),console.log("Status length:",g.status.length),console.log("Status char codes:",Array.from(g.status).map(S=>S.charCodeAt(0)));const b={projectTitle:g.title,projectDescription:g.description,projectStatus:"Not Started",projectStartDate:ce(g.startDate),projectDeadLine:ce(g.deadline),createdByUserId:Number(g.createdByUserId),assignedUserIds:g.assignedUsers.map(Number)};console.log("Update Project Payload:",b);const T=await H.put(`http://localhost:5294/api/Project/update/${u}`,b,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}});console.log("Update response:",T.data);const h=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${i}`}});E(h.data),f(null),N({}),j.success("Project updated successfully!")}catch(i){console.error("Update project error:",i),i.response?(console.error("Error response:",i.response.data),j.error("Failed to update project: "+(((c=i.response.data)==null?void 0:c.message)||JSON.stringify(i.response.data)))):j.error("Failed to update project: "+i.message)}},ae=async u=>{var g;if(window.confirm("Are you sure you want to delete this project?"))try{const c=localStorage.getItem("token");await H.delete(`http://localhost:5294/api/Project/delete/${u}`,{headers:{Authorization:`Bearer ${c}`}}),E(i=>i.filter(b=>b.projectId!==u)),j.success("Project deleted successfully!")}catch(c){if(console.error("Failed to delete project:",c),c.response){const i=((g=c.response.data)==null?void 0:g.message)||c.response.data||"An error occurred while deleting the project.";j.error(`Delete failed: ${i}`)}else j.error("Failed to delete project. Please check your connection and try again.")}},ie=u=>{console.log("Original project status:",u.projectStatus),f(u.projectId),U(!1);const g={title:u.projectTitle,description:u.projectDescription,status:u.projectStatus,startDate:re(u.projectStartDate),deadline:re(u.projectDeadLine),createdByUserId:u.createdByUserId,assignedUsers:u.assignedUserIds?u.assignedUserIds.map(String):[]};console.log("Setting edit data with status:",g.status),N(g),j.info(`Editing project: ${u.projectTitle}`)},ne=V.filter(u=>{const g=$==="All"||u.projectStatus===$,c=P===""||u.projectTitle.toLowerCase().includes(P.toLowerCase());let i=!0;if(v){const h=new Date(re(u.projectStartDate)),S=new Date(v);i=h>=S}let b=!0;if(J){const h=new Date(re(u.projectDeadLine)),S=new Date(J);b=h<=S}let T=!0;return oe&&(T=u.assignedUserIds&&u.assignedUserIds.includes(Number(oe))),g&&c&&i&&b&&T}),m=w?ne:ne.slice(0,10),B=()=>{k("All"),y(""),L(""),Y(""),se("")};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx(Te,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:_==="dark"?"dark":"light"}),e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
                ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
                ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),C.map(({icon:u,label:g,path:c},i)=>e.jsxs("li",{onClick:()=>c&&q(c),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                          hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white hover:scale-105
                          dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600
                          ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:u}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:g})]},i))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${_==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:Z,"aria-label":"Toggle dark mode",children:_==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:G,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(me,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"All Projects"})]})}),e.jsxs("section",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between mb-4 px-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-blue-600 dark:text-blue-400 flex items-center gap-2",children:[e.jsx(me,{className:"text-2xl"}),"My Assigned Projects",(P||$!=="All"||v||J||oe)&&e.jsx("span",{className:"text-xs font-normal bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-300 px-2 py-0.5 rounded-md ml-2",children:"Filtered"}),e.jsx("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 text-xs font-medium px-2 py-1 rounded-full ml-2",children:P||$!=="All"||v||J||oe?`${ne.length}/${V.length}`:V.length})]}),e.jsx("button",{onClick:()=>A(!F),className:"flex items-center gap-2 bg-gradient-to-r from-blue-400 to-purple-400 text-white px-4 py-2 rounded-lg shadow-lg hover:from-blue-500 hover:to-purple-500 transition-all duration-300 font-medium",children:F?"Hide Filters":"Show Filters"})]}),F&&e.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg shadow-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-center bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent",children:"Filter Projects"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Title"}),e.jsx("input",{type:"text",value:P,onChange:u=>y(u.target.value),placeholder:"Search by title...",className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:$,onChange:u=>k(u.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"All",children:"All Statuses"}),e.jsx("option",{value:"Not Started",children:"Not Started"}),e.jsx("option",{value:"Upcoming",children:"Upcoming"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"On Hold",children:"On Hold"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date (After)"}),e.jsx("input",{type:"date",value:v,onChange:u=>L(u.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Deadline (Before)"}),e.jsx("input",{type:"date",value:J,onChange:u=>Y(u.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assigned User"}),e.jsxs("select",{value:oe,onChange:u=>se(u.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Team Members"}),K.map(u=>e.jsx("option",{value:u.userId,children:u.userFullName||u.userName||u.userEmail},u.userId))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:B,className:"bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded hover:bg-gray-300 dark:hover:bg-gray-500 transition-all w-full",children:"Clear Filters"})})]})]}),e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Title"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Description"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Status"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Start Date"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Deadline"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Created By"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Assigned Users"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Actions"})]})}),e.jsx("tbody",{className:"font-medium",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center p-4 text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:"Loading..."})})}):m.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center p-4 text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(me,{className:"text-4xl text-blue-500"}),P||$!=="All"||v||J||oe?e.jsx("p",{children:"No projects match your current filters."}):e.jsx("p",{children:"No projects are currently assigned to you."})]})})}):m.map((u,g)=>e.jsxs("tr",{className:`${g%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:u.projectId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===u.projectId?e.jsx("input",{type:"text",value:I.title||"",onChange:c=>N(i=>({...i,title:c.target.value})),className:"border p-1 rounded w-full text-black"}):u.projectTitle}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===u.projectId?e.jsx("textarea",{value:I.description||"",onChange:c=>N(i=>({...i,description:c.target.value})),className:"border p-1 rounded w-full text-black"}):u.projectDescription}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===u.projectId?e.jsxs("select",{value:I.status||"",onChange:c=>N(i=>({...i,status:c.target.value})),className:"border p-1 rounded w-full text-black",children:[e.jsx("option",{value:"Not Started",children:"Not Started"}),e.jsx("option",{value:"Upcoming",children:"Upcoming"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"On Hold",children:"On Hold"}),e.jsx("option",{value:"Completed",children:"Completed"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]}):u.projectStatus}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===u.projectId?e.jsx("input",{type:"date",value:I.startDate||"",onChange:c=>N(i=>({...i,startDate:c.target.value})),className:"border p-1 rounded w-full text-black"}):u.projectStartDate}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===u.projectId?e.jsx("input",{type:"date",value:I.deadline||"",onChange:c=>N(i=>({...i,deadline:c.target.value})),className:"border p-1 rounded w-full text-black"}):u.projectDeadLine}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D===u.projectId?e.jsxs("select",{value:I.createdByUserId||"",onChange:c=>N(i=>({...i,createdByUserId:c.target.value})),className:"border p-1 rounded w-full text-black",children:[e.jsx("option",{value:"",children:"Select User"}),K.map(c=>e.jsx("option",{value:c.userId,children:c.userFullName||c.userName||c.userEmail},c.userId))]}):(()=>{const c=K.find(i=>String(i.userId)===String(u.createdByUserId));return c?c.userFullName||c.userName||c.userEmail:u.createdByUserId})()}),e.jsx("td",{className:"border border-black dark:border-white p-2 ",children:D===u.projectId?e.jsx("select",{multiple:!0,value:I.assignedUsers||[],onChange:c=>{const i=Array.from(c.target.selectedOptions,b=>b.value);N(b=>({...b,assignedUsers:i}))},className:"border p-1 rounded w-full text-black",children:K.map(c=>e.jsx("option",{value:c.userId,children:c.userFullName||c.userName||c.userEmail},c.userId))}):(u.assignedUserIds||[]).map(c=>{const i=K.find(b=>String(b.userId)===String(c));return i?i.userFullName||i.userName||i.userEmail:c}).join(", ")}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:e.jsx("div",{className:"flex flex-row gap-x-2",children:D===u.projectId?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>de(u.projectId,I),className:"bg-green-500 text-white p-1 rounded hover:bg-green-600",children:"Save"}),e.jsx("button",{onClick:()=>f(null),className:"bg-gray-400 text-white p-1 rounded hover:bg-gray-500",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ie(u),className:"bg-blue-500 text-white p-1 rounded hover:bg-blue-600",children:"Edit"}),e.jsx("button",{onClick:()=>ae(u.projectId),className:"bg-red-500 text-white p-1 rounded hover:bg-red-600",children:"Delete"})]})})})]},u.projectId))})]}),!w&&ne.length>10&&e.jsxs("button",{className:"mt-4 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg shadow-md hover:from-blue-600 hover:to-purple-600 transition-all duration-300",onClick:()=>M(!0),children:["Show All ",ne.length," ",P||$!=="All"||v||J||oe?"Filtered":""," Projects"]})]})]})]})})]})]})},Ft=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),{theme:R,toggleTheme:_}=r.useContext(ke);r.useEffect(()=>{const m=localStorage.getItem("userRole"),B=localStorage.getItem("userName");m&&Q(m),B&&X(B)},[]);const Z=()=>{localStorage.clear(),q("/login")},G=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/developerDashboard"},{icon:e.jsx(me,{}),label:"View Projects",path:"/developerProjects"},{icon:e.jsx(ue,{}),label:"View Tasks",path:"/developerTasks"},{icon:e.jsx(ve,{}),label:"View Comments",path:"/developerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/developerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/developerSettings"}],[C,w]=r.useState(!1),[M,V]=r.useState([]),[E,D]=r.useState(null),[f,I]=r.useState({}),[N,K]=r.useState([]),[s,d]=r.useState([]),[x,$]=r.useState(!0),[k,P]=r.useState(!1),[y,F]=r.useState(""),[A,v]=r.useState("All"),[L,J]=r.useState("All"),[Y,oe]=r.useState("");r.useEffect(()=>{const m=async()=>{const g=localStorage.getItem("token"),c=localStorage.getItem("userId");if(!g){window.location.href="/login";return}if(!c){console.error("User ID not found in localStorage"),j.error("User information not found. Please log in again.");return}$(!0);try{const i=await H.get("http://localhost:5294/Task/get",{headers:{Authorization:`Bearer ${g}`}}),b=i.data.filter(T=>T.assignedUserId===Number(c));V(b),console.log(`Filtered ${i.data.length} tasks to ${b.length} assigned to user ID ${c}`)}catch(i){i.response&&i.response.status===401?(localStorage.removeItem("token"),window.location.href="/login"):(console.error("Failed to fetch tasks:",i),j.error("Failed to load tasks. Please try again."))}finally{$(!1)}},B=async()=>{const g=localStorage.getItem("token");if(!g){window.location.href="/login";return}try{const c=await H.get("http://localhost:5294/AdminUser/all-users",{headers:{Authorization:`Bearer ${g}`}});K(c.data)}catch(c){c.response&&c.response.status===401?(localStorage.removeItem("token"),window.location.href="/login"):console.error("Failed to fetch users:",c)}},u=async()=>{const g=localStorage.getItem("token"),c=localStorage.getItem("userId");if(!g){window.location.href="/login";return}if(!c){console.error("User ID not found in localStorage"),j.error("User information not found. Please log in again.");return}try{const i=await H.get("http://localhost:5294/api/Project/get",{headers:{Authorization:`Bearer ${g}`}}),b=i.data.filter(T=>T.assignedUserIds&&T.assignedUserIds.includes(Number(c)));d(b),console.log(`Filtered ${i.data.length} projects to ${b.length} assigned to user ID ${c}`)}catch(i){i.response&&i.response.status===401?(localStorage.removeItem("token"),window.location.href="/login"):(console.error("Failed to fetch projects:",i),j.error("Failed to load projects. Please try again."))}};m(),B(),u()},[]);const se=async(m,B)=>{var u;try{const g=localStorage.getItem("token"),c=localStorage.getItem("userId");if(!g||!c){j.error("Authentication required. Please log in again."),window.location.href="/login";return}const i=M.find(S=>S.taskItemId===m);if(!i){j.error("Task not found");return}if(i.assignedUserId!==Number(c)){j.error("You don't have permission to update this task");return}let b=B.createdAt;if(b){const S=b.split("-");S.length===3&&(S[0].length===4?b=`${S[2]}-${S[1]}-${S[0]}`:S[2].length)}const T={taskTitle:B.taskTitle,taskDescription:B.taskDescription,taskStatus:B.taskStatus,taskPriority:B.taskPriority,projectId:Number(B.projectId),assignedUserId:Number(B.assignedUserId),createdAt:b};console.log("Updating task with payload:",T),(await H.put(`http://localhost:5294/Task/update/${m}`,T,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`}})).status===200&&(V(S=>S.map(t=>t.taskItemId===m?{...t,...T}:t)),D(null),I({}),j.success("Task updated successfully!"))}catch(g){if(console.error("Failed to update task:",g),g.response)switch(g.response.status){case 403:j.error("You don't have permission to update this task");break;case 401:j.error("Session expired. Please log in again."),localStorage.removeItem("token"),window.location.href="/login";break;default:const c=((u=g.response.data)==null?void 0:u.message)||g.response.data||"An error occurred while updating the task.";j.error(`Update failed: ${c}`)}else j.error("Failed to update task. Please check your connection and try again.")}},ce=async m=>{var B;if(window.confirm("Are you sure you want to delete this task?"))try{const u=localStorage.getItem("token");await H.delete(`http://localhost:5294/Task/delete/${m}`,{headers:{Authorization:`Bearer ${u}`}}),V(g=>g.filter(c=>c.taskItemId!==m)),j.success("Task deleted successfully!")}catch(u){if(console.error("Failed to delete task:",u),u.response){const g=((B=u.response.data)==null?void 0:B.message)||u.response.data||"An error occurred while deleting the task.";j.error(`Delete failed: ${g}`)}else j.error("Failed to delete task. Please check your connection and try again.")}},re=m=>{D(m.taskItemId),I({taskTitle:m.taskTitle,taskDescription:m.taskDescription,taskStatus:m.taskStatus,taskPriority:m.taskPriority,assignedUserId:m.assignedUserId,projectId:m.projectId,createdAt:m.createdAt}),j.info(`Editing task: ${m.taskTitle}`)},de=M.filter(m=>{const B=y===""||m.taskTitle.toLowerCase().includes(y.toLowerCase()),u=A==="All"||m.taskStatus===A,g=L==="All"||m.taskPriority===L,c=Y===""||m.projectId===Number(Y);return B&&u&&g&&c}),ae=C?de:de.slice(0,10),ie=()=>{F(""),v("All"),J("All"),oe("")},ne=m=>m?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():"";return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx(Te,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:R==="dark"?"dark":"light"}),e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
             ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
             ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),G.map(({icon:m,label:B,path:u},g)=>e.jsxs("li",{onClick:()=>u&&q(u),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                       hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white hover:scale-105
                       dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600
                       ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:m}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:B})]},g))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${R==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:_,"aria-label":"Toggle dark mode",children:R==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:Z,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(ue,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"My Assigned Tasks"}),e.jsx("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 text-xs font-medium px-2 py-1 rounded-full ml-2",children:y||A!=="All"||L!=="All"||Y?`${de.length}/${M.length}`:M.length})]})}),e.jsx("div",{className:"flex justify-between mb-4",children:e.jsx("button",{onClick:()=>P(!k),className:"flex items-center gap-2 bg-gradient-to-r from-blue-400 to-purple-400 text-white px-4 py-2 rounded-lg shadow-lg hover:from-blue-500 hover:to-purple-500 transition-all duration-300 font-medium",children:k?"Hide Filters":"Show Filters"})}),k&&e.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-800/60 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-center bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent",children:"Filter Tasks"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Task Title"}),e.jsx("input",{type:"text",value:y,onChange:m=>F(m.target.value),placeholder:"Search by title...",className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:A,onChange:m=>v(m.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"All",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),e.jsxs("select",{value:L,onChange:m=>J(m.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"All",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsxs("select",{value:Y,onChange:m=>oe(m.target.value),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Projects"}),s.map(m=>e.jsx("option",{value:m.projectId,children:m.projectTitle},m.projectId))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:ie,className:"bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded hover:bg-gray-300 dark:hover:bg-gray-500 transition-all w-full",children:"Clear Filters"})})]})]}),e.jsx("section",{className:"w-full",children:e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Title"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Description"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Status"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Priority"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Created At"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Project ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Assigned User"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Actions"})]})}),e.jsx("tbody",{className:"font-medium",children:x?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center p-4 text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:"Loading..."})})}):ae.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center p-4 text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(ue,{className:"text-4xl text-blue-500"}),y||A!=="All"||L!=="All"||Y?e.jsx("p",{children:"No tasks match your current filters."}):e.jsx("p",{children:"No tasks are currently assigned to you."})]})})}):ae.map((m,B)=>e.jsxs("tr",{className:`${B%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:m.taskItemId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsx("input",{type:"text",value:f.taskTitle||"",onChange:u=>I(g=>({...g,taskTitle:u.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):m.taskTitle}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsx("input",{type:"text",value:f.taskDescription||"",onChange:u=>I(g=>({...g,taskDescription:u.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):m.taskDescription}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsxs("select",{value:f.taskStatus||"",onChange:u=>I(g=>({...g,taskStatus:u.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}):ne(m.taskStatus)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsxs("select",{value:f.taskPriority||"",onChange:u=>I(g=>({...g,taskPriority:u.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Select Priority"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]}):ne(m.taskPriority)}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsx("input",{type:"date",value:(()=>{if(!f.createdAt)return"";const u=f.createdAt.split("-");return u.length===3?u[0].length===4?f.createdAt:`${u[2]}-${u[1]}-${u[0]}`:f.createdAt})(),onChange:u=>{const[g,c,i]=u.target.value.split("-");I(b=>({...b,createdAt:`${i}-${c}-${g}`}))},className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):m.createdAtFormatted||""}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsx("input",{type:"number",value:f.projectId||"",onChange:u=>I(g=>({...g,projectId:u.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):m.projectId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:E===m.taskItemId?e.jsx("input",{type:"number",value:f.assignedUserId||"",onChange:u=>I(g=>({...g,assignedUserId:u.target.value})),className:"border border-gray-300 dark:border-gray-600 p-1 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}):m.assignedUserId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:e.jsx("div",{className:"flex flex-row gap-x-2",children:E===m.taskItemId?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>se(m.taskItemId,f),className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-3 py-1 rounded hover:from-green-600 hover:to-green-700 transition-all duration-300",children:"Save"}),e.jsx("button",{onClick:()=>D(null),className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white px-3 py-1 rounded hover:from-gray-500 hover:to-gray-600 transition-all duration-300",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>re(m),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-3 py-1 rounded hover:from-blue-600 hover:to-blue-700 transition-all duration-300",children:"Edit"}),e.jsx("button",{onClick:()=>ce(m.taskItemId),className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1 rounded hover:from-red-600 hover:to-red-700 transition-all duration-300",children:"Delete"})]})})})]},m.taskItemId))})]}),!C&&de.length>10&&e.jsxs("button",{className:"mt-4 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg shadow-md hover:from-blue-600 hover:to-purple-600 transition-all duration-300",onClick:()=>w(!0),children:["Show All ",de.length," ",y||A!=="All"||L!=="All"||Y?"Filtered":""," Tasks"]})]})})]})})]})]})},Mt=()=>{const[o,U]=r.useState(()=>typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),{theme:R,toggleTheme:_}=r.useContext(ke);r.useEffect(()=>{const D=localStorage.getItem("userRole"),f=localStorage.getItem("userName");D&&Q(D),f&&X(f)},[]);const Z=()=>{localStorage.clear(),q("/login")},G=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/projectManagerDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Developers",path:"/projectManagerTeams"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/projectManagerProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/projectManagerTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/projectManagerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/projectManagerLogs"},{icon:e.jsx(be,{}),label:"Settings"}],[C,w]=r.useState(!1),[M,V]=r.useState([]);r.useEffect(()=>{(async()=>{try{const f=localStorage.getItem("token"),N=(await H.get("http://localhost:5294/AdminUser/all-users",{headers:{Authorization:`Bearer ${f}`}})).data.filter(K=>K.userRole==="Developer");V(N)}catch(f){console.error("Failed to fetch users:",f)}})()},[]);const E=C?M:M.slice(0,10);return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
            ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}
            ${o||window.innerWidth>=640?"translate-x-0":"-translate-x-full"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),G.map(({icon:D,label:f,path:I},N)=>e.jsxs("li",{onClick:()=>I&&q(I),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                      hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white
                      dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600 hover:scale-105
                      ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:D}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:f})]},N))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${R==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer ",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:_,"aria-label":"Toggle dark mode",children:R==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:Z,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full p-6 space-y-4 bg-white/40 dark:bg-black/50 rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300",children:[e.jsx(Ie,{className:"w-6 h-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Developers"})]})}),e.jsx("section",{className:"w-full",children:e.jsxs("div",{className:"p-4 overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border border-black dark:border-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsx("th",{className:"border border-black dark:border-white p-2",children:"ID"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Name"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Email"}),e.jsx("th",{className:"border border-black dark:border-white p-2",children:"Role"})]})}),e.jsx("tbody",{className:"font-medium",children:E.map((D,f)=>e.jsxs("tr",{className:`${f%2===0?"bg-white":"bg-blue-50"} hover:bg-blue-100 dark:bg-black/50 dark:hover:bg-purple-800/30`,children:[e.jsx("td",{className:"border border-black dark:border-white p-2",children:D.userId}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D.userFullName}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D.userEmail}),e.jsx("td",{className:"border border-black dark:border-white p-2",children:D.userRole})]},D.userId))})]}),!C&&M.length>10&&e.jsx("button",{className:"mt-4 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors duration-300",onClick:()=>w(!0),children:"Show All Developers"})]})})]})})]})]})},Et=()=>{const[o,U]=r.useState(typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),{theme:R,toggleTheme:_}=r.useContext(ke),[Z,G]=r.useState("account"),[C,w]=r.useState({fullName:"",email:"",phone:"",position:""}),[M,V]=r.useState(""),[E,D]=r.useState(""),f=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/adminDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Users",path:"/allUsers"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/allProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/allTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/allComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/allLogs"},{icon:e.jsx(be,{}),label:"Settings"}];r.useEffect(()=>{const s=localStorage.getItem("userRole"),d=localStorage.getItem("userName");s&&Q(s),d&&X(d),I()},[]);const I=async()=>{try{const s=localStorage.getItem("token"),d=localStorage.getItem("userId"),x=localStorage.getItem("userRole");if(!s||!d){D("Authentication required. Please log in again.");return}w({fullName:localStorage.getItem("userName")||"",email:localStorage.getItem("userEmail")||"",phone:localStorage.getItem("phone")||"",position:localStorage.getItem("position")||x||""})}catch(s){console.error("Failed to fetch user profile:",s),D("Failed to load user profile. Please try again later.")}},N=async()=>{try{localStorage.setItem("userName",C.fullName),localStorage.setItem("userEmail",C.email),localStorage.setItem("phone",C.phone),localStorage.setItem("position",C.position),X(C.fullName),V("Profile updated successfully!"),setTimeout(()=>V(""),3e3)}catch(s){console.error("Failed to update profile:",s),D("Failed to update profile. Please try again."),setTimeout(()=>D(""),3e3)}},K=()=>{localStorage.clear(),q("/login")};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
            ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),f.map(({icon:s,label:d,path:x},$)=>e.jsxs("li",{onClick:()=>x&&q(x),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                      hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white hover:scale-105
                      dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600
                      ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:s}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:d})]},$))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${R==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:_,"aria-label":"Toggle dark mode",children:R==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{className:`transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:K,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full max-w-6xl p-6 bg-white/40 dark:bg-black/50 rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(be,{className:"text-blue-500"}),"Settings"]})}),M&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md border border-green-200 dark:bg-green-800/30 dark:text-green-300 dark:border-green-700/50",children:M}),E&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md border border-red-200 dark:bg-red-800/30 dark:text-red-300 dark:border-red-700/50",children:E}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:()=>G("account"),className:`px-4 py-2 font-medium rounded-t-lg transition-all ${Z==="account"?"text-white":"hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,style:{backgroundColor:Z==="account"?"#3b82f6":"transparent"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{}),"Account"]})})}),Z==="account"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:C.fullName,onChange:s=>w({...C,fullName:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:C.email,onChange:s=>w({...C,email:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:C.phone,onChange:s=>w({...C,phone:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Position"}),e.jsx("input",{type:"text",value:C.position,onChange:s=>w({...C,position:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Display Preferences"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[R==="dark"?e.jsx(pe,{className:"text-xl text-blue-500"}):e.jsx(xe,{className:"text-xl text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Theme"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:R==="dark"?"Dark mode is enabled":"Light mode is enabled"})]})]}),e.jsx("button",{onClick:_,className:"px-4 py-2 text-white rounded-md transition-colors bg-blue-500 hover:bg-blue-600",children:"Toggle Theme"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:N,className:"flex items-center gap-2 text-white px-6 py-2 rounded-lg shadow-md transition-all duration-300 bg-blue-500 hover:bg-blue-600",children:[e.jsx(We,{}),"Save Changes"]})})]})]})})]})]})},Lt=()=>{const[o,U]=r.useState(typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),{theme:R,toggleTheme:_}=r.useContext(ke),[Z,G]=r.useState("account"),[C,w]=r.useState({fullName:"",email:"",phone:"",position:""}),[M,V]=r.useState(""),[E,D]=r.useState(""),f=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/developerDashboard"},{icon:e.jsx(me,{}),label:"View Projects",path:"/developerProjects"},{icon:e.jsx(ue,{}),label:"View Tasks",path:"/developerTasks"},{icon:e.jsx(ve,{}),label:"View Comments",path:"/developerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/developerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/developerSettings"}];r.useEffect(()=>{const s=localStorage.getItem("userRole"),d=localStorage.getItem("userName");s&&Q(s),d&&X(d),I()},[]);const I=async()=>{try{const s=localStorage.getItem("token"),d=localStorage.getItem("userId"),x=localStorage.getItem("userRole");if(!s||!d){D("Authentication required. Please log in again.");return}w({fullName:localStorage.getItem("userName")||"",email:localStorage.getItem("userEmail")||"",phone:localStorage.getItem("phone")||"",position:localStorage.getItem("position")||x||""})}catch(s){console.error("Failed to fetch user profile:",s),D("Failed to load user profile. Please try again later.")}},N=async()=>{try{localStorage.setItem("userName",C.fullName),localStorage.setItem("userEmail",C.email),localStorage.setItem("phone",C.phone),localStorage.setItem("position",C.position),X(C.fullName),V("Profile updated successfully!"),setTimeout(()=>V(""),3e3)}catch(s){console.error("Failed to update profile:",s),D("Failed to update profile. Please try again."),setTimeout(()=>D(""),3e3)}},K=()=>{localStorage.clear(),q("/login")};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
            ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),f.map(({icon:s,label:d,path:x},$)=>e.jsxs("li",{onClick:()=>x&&q(x),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                      hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white hover:scale-105
                      dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600
                      ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:s}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:d})]},$))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${R==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:_,"aria-label":"Toggle dark mode",children:R==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{className:`transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:K,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full max-w-6xl p-6 bg-white/40 dark:bg-black/50 rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(be,{className:"text-blue-500"}),"Settings"]})}),M&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md border border-green-200 dark:bg-green-800/30 dark:text-green-300 dark:border-green-700/50",children:M}),E&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md border border-red-200 dark:bg-red-800/30 dark:text-red-300 dark:border-red-700/50",children:E}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:()=>G("account"),className:`px-4 py-2 font-medium rounded-t-lg transition-all ${Z==="account"?"text-white":"hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,style:{backgroundColor:Z==="account"?"#3b82f6":"transparent"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{}),"Account"]})})}),Z==="account"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:C.fullName,onChange:s=>w({...C,fullName:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:C.email,onChange:s=>w({...C,email:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:C.phone,onChange:s=>w({...C,phone:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Position"}),e.jsx("input",{type:"text",value:C.position,onChange:s=>w({...C,position:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Display Preferences"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[R==="dark"?e.jsx(pe,{className:"text-xl text-blue-500"}):e.jsx(xe,{className:"text-xl text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Theme"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:R==="dark"?"Dark mode is enabled":"Light mode is enabled"})]})]}),e.jsx("button",{onClick:_,className:"px-4 py-2 text-white rounded-md transition-colors bg-blue-500 hover:bg-blue-600",children:"Toggle Theme"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:N,className:"flex items-center gap-2 text-white px-6 py-2 rounded-lg shadow-md transition-all duration-300 bg-blue-500 hover:bg-blue-600",children:[e.jsx(We,{}),"Save Changes"]})})]})]})})]})]})},zt=()=>{const[o,U]=r.useState(typeof window<"u"&&window.innerWidth>=1024),[z,ee]=r.useState(!1),[O,Q]=r.useState(""),[W,X]=r.useState(""),q=fe(),{theme:R,toggleTheme:_}=r.useContext(ke),[Z,G]=r.useState("account"),[C,w]=r.useState({fullName:"",email:"",phone:"",position:""}),[M,V]=r.useState(""),[E,D]=r.useState(""),f=[{icon:e.jsx(Ne,{}),label:"Dashboard",path:"/projectManagerDashboard"},{icon:e.jsx(Ie,{}),label:"Manage Developers",path:"/projectManagerTeams"},{icon:e.jsx(me,{}),label:"Manage Projects",path:"/projectManagerProjects"},{icon:e.jsx(ue,{}),label:"Manage Tasks",path:"/projectManagerTasks"},{icon:e.jsx(ve,{}),label:"Manage Comments",path:"/projectManagerComments"},{icon:e.jsx(he,{}),label:"View Activity Logs",path:"/projectManagerLogs"},{icon:e.jsx(be,{}),label:"Settings",path:"/projectManagerSettings"}];r.useEffect(()=>{const s=localStorage.getItem("userRole"),d=localStorage.getItem("userName");s&&Q(s),d&&X(d),I()},[]);const I=async()=>{try{const s=localStorage.getItem("token"),d=localStorage.getItem("userId"),x=localStorage.getItem("userRole");if(!s||!d){D("Authentication required. Please log in again.");return}w({fullName:localStorage.getItem("userName")||"",email:localStorage.getItem("userEmail")||"",phone:localStorage.getItem("phone")||"",position:localStorage.getItem("position")||x||""})}catch(s){console.error("Failed to fetch user profile:",s),D("Failed to load user profile. Please try again later.")}},N=async()=>{try{localStorage.setItem("userName",C.fullName),localStorage.setItem("userEmail",C.email),localStorage.setItem("phone",C.phone),localStorage.setItem("position",C.position),X(C.fullName),V("Profile updated successfully!"),setTimeout(()=>V(""),3e3)}catch(s){console.error("Failed to update profile:",s),D("Failed to update profile. Please try again."),setTimeout(()=>D(""),3e3)}},K=()=>{localStorage.clear(),q("/login")};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(e.Fragment,{children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 sm:hidden",onClick:()=>U(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen bg-gradient-to-b from-blue-50 to-white dark:from-gray-900 dark:to-black transition-transform
            ${o?"w-full md:w-55":"w-16 sm:w-14 mt-6"}`,children:e.jsx("div",{className:"h-full text-black dark:text-white text-md font-medium px-4 py-8 overflow-y-auto",children:e.jsxs("ul",{className:"space-y-4",children:[e.jsx("li",{className:`flex items-center gap-2 p-2 justify-center bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg -mt-5 mb-10 ${!o&&"sm:hidden"}`,children:"PMS"}),f.map(({icon:s,label:d,path:x},$)=>e.jsxs("li",{onClick:()=>x&&q(x),className:`flex items-center gap-3 p-2 rounded-md cursor-pointer transition-all duration-200
                      hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white hover:scale-105
                      dark:hover:bg-gradient-to-r dark:hover:from-purple-600 dark:hover:to-blue-600
                      ${o?"w-full":"w-10 -ml-2"}`,children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:s}),e.jsx("span",{className:`whitespace-nowrap ${!o&&"hidden sm:hidden"}`,children:d})]},$))]})})})]}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${o?"md:ml-55":"md:ml-14"}`,children:[e.jsxs("header",{className:`p-4 bg-white dark:bg-black sticky top-0 z-50 h-16 flex items-center justify-between transition-all duration-300 ${o?"md:ml-0":"md:-ml-14"} ${R==="dark"?"bg-gray-400 text-white":""}`,children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx(we,{size:28,className:"cursor-pointer",onClick:()=>U(!o)})}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsx("button",{className:"p-3 rounded-full hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white transition-all duration-300",onClick:_,"aria-label":"Toggle dark mode",children:R==="dark"?e.jsx(xe,{size:18}):e.jsx(pe,{size:18})}),e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg transition-all",onClick:()=>ee(!z),children:[e.jsx("button",{className:"bg-gradient-to-r from-blue-400 to-purple-400 text-white p-3 rounded-full",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold dark:text-white text-sm",children:W||"User"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:O||"Guest"})]}),e.jsx(ye,{className:`transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&e.jsx("div",{className:"absolute right-0 top-14 bg-white dark:bg-black shadow-md rounded-md p-2 w-32",children:e.jsx("button",{className:"w-full text-left px-2 py-1 hover:bg-gradient-to-r hover:from-blue-400 hover:to-purple-400 hover:text-white rounded-md text-sm transition-all",onClick:K,children:"Logout"})})]})]}),e.jsx("main",{className:"flex flex-col justify-start items-center p-4 bg-gradient-rainbow animate-gradient-x min-h-screen rounded-tl-xl dark:rounded-none gap-8 dark:bg-gradient-rainbow-dark dark:text-white",children:e.jsxs("div",{className:"w-full max-w-6xl p-6 bg-white/40 dark:bg-black/50 rounded-lg shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(be,{className:"text-blue-500"}),"Settings"]})}),M&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md border border-green-200 dark:bg-green-800/30 dark:text-green-300 dark:border-green-700/50",children:M}),E&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md border border-red-200 dark:bg-red-800/30 dark:text-red-300 dark:border-red-700/50",children:E}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:()=>G("account"),className:`px-4 py-2 font-medium rounded-t-lg transition-all ${Z==="account"?"text-white":"hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,style:{backgroundColor:Z==="account"?"#3b82f6":"transparent"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{}),"Account"]})})}),Z==="account"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:C.fullName,onChange:s=>w({...C,fullName:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:C.email,onChange:s=>w({...C,email:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:C.phone,onChange:s=>w({...C,phone:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Position"}),e.jsx("input",{type:"text",value:C.position,onChange:s=>w({...C,position:s.target.value}),className:"border border-gray-300 dark:border-gray-600 p-2 rounded w-full bg-white dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Display Preferences"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[R==="dark"?e.jsx(pe,{className:"text-xl text-blue-500"}):e.jsx(xe,{className:"text-xl text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Theme"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:R==="dark"?"Dark mode is enabled":"Light mode is enabled"})]})]}),e.jsx("button",{onClick:_,className:"px-4 py-2 text-white rounded-md transition-colors bg-blue-500 hover:bg-blue-600",children:"Toggle Theme"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:N,className:"flex items-center gap-2 text-white px-6 py-2 rounded-lg shadow-md transition-all duration-300 bg-blue-500 hover:bg-blue-600",children:[e.jsx(We,{}),"Save Changes"]})})]})]})})]})]})};function Rt(){return e.jsx(rt,{children:e.jsxs(st,{children:[e.jsx(ge,{path:"/",element:e.jsx(at,{to:"/login"})}),e.jsx(ge,{path:"/login",element:e.jsx(ut,{})}),e.jsx(ge,{path:"/register",element:e.jsx(gt,{})}),e.jsx(ge,{path:"/forgotPassword",element:e.jsx(xt,{})}),e.jsx(ge,{path:"/resetPassword",element:e.jsx(pt,{})}),e.jsx(ge,{path:"/adminDashboard",element:e.jsx(jt,{})}),e.jsx(ge,{path:"/allUsers",element:e.jsx(Ct,{})}),e.jsx(ge,{path:"/allProjects",element:e.jsx(It,{})}),e.jsx(ge,{path:"/allTasks",element:e.jsx(St,{})}),e.jsx(ge,{path:"/allComments",element:e.jsx(vt,{})}),e.jsx(ge,{path:"/projectManagerDashboard",element:e.jsx(wt,{})}),e.jsx(ge,{path:"/projectManagerProjects",element:e.jsx(Nt,{})}),e.jsx(ge,{path:"/projectManagerTasks",element:e.jsx($t,{})}),e.jsx(ge,{path:"/projectManagerComments",element:e.jsx(Tt,{})}),e.jsx(ge,{path:"/projectManagerTeams",element:e.jsx(Mt,{})}),e.jsx(ge,{path:"/projectManagerLogs",element:e.jsx(Pt,{})}),e.jsx(ge,{path:"/developerDashboard",element:e.jsx(yt,{})}),e.jsx(ge,{path:"/developerLogs",element:e.jsx(At,{})}),e.jsx(ge,{path:"/developerComments",element:e.jsx(Dt,{})}),e.jsx(ge,{path:"/developerProjects",element:e.jsx(Ut,{})}),e.jsx(ge,{path:"/developerTasks",element:e.jsx(Ft,{})}),e.jsx(ge,{path:"/allLogs",element:e.jsx(kt,{})}),e.jsx(ge,{path:"/settings",element:e.jsx(Et,{})}),e.jsx(ge,{path:"/projectManagerSettings",element:e.jsx(zt,{})}),e.jsx(ge,{path:"/developerSettings",element:e.jsx(Lt,{})})]})})}const ke=r.createContext({theme:"light",toggleTheme:()=>{}});class Bt extends r.Component{constructor(U){super(U),this.state={hasError:!1}}static getDerivedStateFromError(U){return{hasError:!0}}componentDidCatch(U,z){console.error("Error caught by boundary:",U,z)}render(){return this.state.hasError?e.jsx("div",{children:"Something went wrong. Please refresh the page."}):this.props.children}}const Ot=({children:o})=>{const[U,z]=r.useState(()=>localStorage.getItem("theme")||"light");r.useEffect(()=>{U==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",U)},[U]);const ee=()=>z(O=>O==="dark"?"light":"dark");return e.jsx(ke.Provider,{value:{theme:U,toggleTheme:ee},children:o})};let qe=null;function qt(){const o=document.getElementById("root");qe||(qe=lt(o)),qe.render(e.jsx(Bt,{children:e.jsx(r.StrictMode,{children:e.jsx(Ot,{children:e.jsx(Rt,{})})})}))}qt();
